node --test tests/test_citizen_tailwind_md3_ui_contract.js
TAP version 13
# Subtest: citizen UI includes generated tailwind+md3 stylesheet and primitive class markers
ok 1 - citizen UI includes generated tailwind+md3 stylesheet and primitive class markers
  ---
  duration_ms: 2.972416
  ...
1..1
# tests 1
# suites 0
# pass 1
# fail 0
# cancelled 0
# skipped 0
# todo 0
# duration_ms 46.11
python3 -m unittest tests/test_build_citizen_tailwind_md3_css.py tests/test_report_citizen_tailwind_md3_contract.py tests/test_graph_ui_server_citizen_assets.py
......
----------------------------------------------------------------------
Ran 6 tests in 0.008s

OK
{
  "status": "ok",
  "tokens_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmplhlpyj4g/tokens.json",
  "out_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmplhlpyj4g/generated.css",
  "bytes": 5723,
  "would_change": true
}
{
  "status": "ok",
  "tokens_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmp2zy43hl6/tokens.json",
  "out_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmp2zy43hl6/generated.css",
  "bytes": 5723,
  "would_change": true
}
{
  "status": "drift",
  "tokens_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmp2zy43hl6/tokens.json",
  "out_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmp2zy43hl6/generated.css",
  "would_change": true
}
{
  "status": "ok",
  "tokens_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpop96k6k7/tokens.json",
  "out_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpop96k6k7/tailwind_md3.generated.css",
  "bytes": 5723,
  "would_change": true
}
{
  "generated_at": "2026-02-23T13:22:24+00:00",
  "status": "failed",
  "paths": {
    "tokens": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpop96k6k7/tokens.json",
    "generated_css": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpop96k6k7/tailwind_md3.generated.css",
    "ui_html": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpop96k6k7/index.html"
  },
  "metrics": {
    "generated_css_bytes": 5723,
    "token_colors_count": 15,
    "token_spacing_count": 3,
    "token_missing_sections": [],
    "generated_css_missing_markers": [],
    "ui_html_missing_markers": [
      "./tailwind_md3.generated.css",
      "md3-card",
      "md3-chip",
      "md3-button",
      "md3-tab"
    ],
    "md3_card_markers": 0,
    "md3_chip_markers": 0,
    "md3_button_markers": 0,
    "md3_tab_markers": 0
  },
  "thresholds": {
    "max_generated_css_bytes": 40000,
    "min_md3_card_markers": 1,
    "min_md3_chip_markers": 1,
    "min_md3_button_markers": 1,
    "min_md3_tab_markers": 1
  },
  "checks": {
    "token_sections_present": true,
    "token_schema_version_valid": true,
    "generated_css_within_budget": true,
    "generated_css_markers_present": true,
    "ui_html_markers_present": false,
    "md3_card_markers_meet_minimum": false,
    "md3_chip_markers_meet_minimum": false,
    "md3_button_markers_meet_minimum": false,
    "md3_tab_markers_meet_minimum": false
  },
  "failure_reasons": [
    "ui_html_markers_missing",
    "md3_card_markers_below_minimum",
    "md3_chip_markers_below_minimum",
    "md3_button_markers_below_minimum",
    "md3_tab_markers_below_minimum"
  ]
}
{
  "status": "ok",
  "tokens_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpf6pjaked/tokens.json",
  "out_path": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpf6pjaked/tailwind_md3.generated.css",
  "bytes": 5723,
  "would_change": true
}
{
  "generated_at": "2026-02-23T13:22:24+00:00",
  "status": "ok",
  "paths": {
    "tokens": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpf6pjaked/tokens.json",
    "generated_css": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpf6pjaked/tailwind_md3.generated.css",
    "ui_html": "/var/folders/mq/m2lss7dj6gjg_kzf2_zpls500000gn/T/tmpf6pjaked/index.html"
  },
  "metrics": {
    "generated_css_bytes": 5723,
    "token_colors_count": 15,
    "token_spacing_count": 3,
    "token_missing_sections": [],
    "generated_css_missing_markers": [],
    "ui_html_missing_markers": [],
    "md3_card_markers": 1,
    "md3_chip_markers": 1,
    "md3_button_markers": 1,
    "md3_tab_markers": 1
  },
  "thresholds": {
    "max_generated_css_bytes": 40000,
    "min_md3_card_markers": 1,
    "min_md3_chip_markers": 1,
    "min_md3_button_markers": 1,
    "min_md3_tab_markers": 1
  },
  "checks": {
    "token_sections_present": true,
    "token_schema_version_valid": true,
    "generated_css_within_budget": true,
    "generated_css_markers_present": true,
    "ui_html_markers_present": true,
    "md3_card_markers_meet_minimum": true,
    "md3_chip_markers_meet_minimum": true,
    "md3_button_markers_meet_minimum": true,
    "md3_tab_markers_meet_minimum": true
  },
  "failure_reasons": []
}
