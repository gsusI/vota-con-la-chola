# AI-OPS-27 Closeout

Status:
- IN_PROGRESS

Progress notes:
- 2026-02-22: `scripts/backfill_initiative_doc_fetch_status.py` added and executed on `etl/data/staging/politicos-es.db` to repair historical fetch traceability for initiative docs.
- 2026-02-22: fetch-status coverage for downloaded initiative docs moved from `8761/8966` to `8966/8966` (missing `205 -> 0`), removing false "missing" noise on Congreso docs.
- 2026-02-22: bounded Senate tail retry executed post-normalization (`docs/etl/sprints/AI-OPS-27/evidence/senado_tail_retry_post_fetchstatus_20260222T102357Z.json`): `119` candidate URLs, `0` recovered, tail now bucketed as `HTTP 404`.
- 2026-02-22: tracker + blocker logs updated with new checkpoint and evidence; latest status remains `senado_iniciativas 8204/8323 (98.57%)`.
- 2026-02-22: `scripts/report_initiative_doc_status.py` added and snapshot emitted (`docs/etl/sprints/AI-OPS-27/evidence/initiative_doc_status_20260222T103042Z.json`) consolidating link/download/fetch/excerpt KPIs in one deterministic command.
- 2026-02-22: `scripts/senado_tail_daemon.sh` hardened with anti-stall stops (`uniform_404_tail`, `no_progress`, `max_rounds`, `complete`) + `_stop_summary.json` artifact; smoke evidence in `docs/etl/sprints/AI-OPS-27/evidence/senado_tail_daemon_smoke2_20260222T103342Z/`.
- 2026-02-22: full-limits daemon pass confirms production stop behavior (`uniform_404_tail`) with stable tail counts (`missing=119`, all `404`): `docs/etl/sprints/AI-OPS-27/evidence/senado_tail_daemon_real_20260222T103548Z/_stop_summary.json`.
- 2026-02-22: core `quality-report --include-initiatives` now includes doc-link/fetch/excerpt KPIs + missing status buckets from `etl/parlamentario_es/quality.py`; evidence: `docs/etl/sprints/AI-OPS-27/evidence/quality_initiatives_doclink_kpis_20260222T133754Z.json`.
- 2026-02-22: regression tests added for initiative-doc KPI extension (quality core + CLI path) and validated with `python3 -m unittest tests.test_parl_quality tests.test_cli_quality_report` (`Ran 10 tests ... OK`).
- 2026-02-22: archive fallback shipped for initiative-doc backfill (`--archive-fallback`, Wayback lookup first on historical `404` tails), with tests in `tests/test_parl_text_documents.py`; production sweep attempted `119` lookups and found `0` snapshots (`docs/etl/sprints/AI-OPS-27/evidence/initdoc_archive_sweep_20260222T135005Z.json`), keeping tail at `119` (`docs/etl/sprints/AI-OPS-27/evidence/initiative_doc_status_after_archive_20260222T135622Z.json`).
- 2026-02-22: Senado tail triage shipped: downloader now derives/prioritizes `INI-3` URLs from `global_enmiendas_vetos` and report layer now splits `missing` into `likely_not_expected` vs `actionable`; with detail XML fallback (`tipoFich=3`) decomposition moved to `119 = 115 likely_not_expected + 4 actionable` (`docs/etl/sprints/AI-OPS-27/reports/senado-tail-triage-20260222.md`, evidence `initdoc_derived_ini_probe_20260222T140436Z.json`, `initdoc_derived_ini_probe_postfix_20260222T140611Z.json`, `initiative_doc_status_enhanced_detailfallback_20260222T140646Z.json`).
- 2026-02-22: added `scripts/backfill_senado_publication_links_from_detail_docs.py` to recover official Senado BOCG/DS publication links from downloaded `tipoFich=3` XML; applied on tail initiatives (`7` initiatives updated, `+50` links), then downloaded `49` new docs and backfilled `49` excerpts, moving global initiative coverage to `9016/9135` and keeping excerpt coverage at `100%` (`docs/etl/sprints/AI-OPS-27/reports/senado-detail-publication-links-backfill-20260222.md` + evidence `senado_detail_publication_links_backfill_20260222T141811Z.json`, `senado_detail_publication_download_20260222T141857Z.json`, `senado_excerpt_backfill_after_detail_publication_20260222T141958Z.json`, `initiative_doc_status_post_detail_publication_excerpt_20260222T142006Z.json`).
- 2026-02-22: redundant-global tail guard shipped end-to-end: downloader now skips stale Senate `global_enmiendas_vetos` URLs (and derived `INI-3` probes) when alternative BOCG docs already exist, report classifies those rows as `likely_not_expected_redundant_global_url`, and actionable tail drops to `0/119`; export path now supports `--exclude-redundant-senado-global` for actionable-only packets (`docs/etl/sprints/AI-OPS-27/evidence/senado_redundant_global_skip_run_20260222T142846Z.json`, `docs/etl/sprints/AI-OPS-27/evidence/initiative_doc_status_redundant_global_triage_20260222T142835Z.json`, `docs/etl/sprints/AI-OPS-27/exports/senado_tail_actionable_post_redundant_filter_20260222.csv`, `docs/etl/sprints/AI-OPS-27/reports/senado-redundant-global-skip-20260222.md`).
- 2026-02-22: canonical `quality-report --include-initiatives` now also emits actionable tail KPIs (`missing_doc_links_likely_not_expected`, `missing_doc_links_actionable`, `effective_downloaded_doc_links_pct`) and Senate `global_enmiendas_vetos_analysis`; evidence in `docs/etl/sprints/AI-OPS-27/evidence/quality_initiatives_actionable_kpis_20260222T143924Z.json` and report `docs/etl/sprints/AI-OPS-27/reports/initiative-quality-kpis-extension-20260222.md`.
- 2026-02-22: post-triage analysis queue check confirms no pending Senate downloaded-doc excerpt work (`rows=0`): `docs/etl/sprints/AI-OPS-27/exports/senado_pdf_analysis_queue_post_actionable_kpis_20260222.csv` + `docs/etl/sprints/AI-OPS-27/reports/senado-pdf-analysis-queue-empty-20260222.md`.
