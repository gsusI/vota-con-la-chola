(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6934,e=>{"use strict";var s=e.i(43476),i=e.i(71645);function a(){return"/vota-con-la-chola"}function r(e){let s=Number(e);return Number.isFinite(s)?Math.trunc(s):0}function n(e){let s=Number(e);return Number.isFinite(s)?s:0}function l(e){return r(e).toLocaleString("es-ES")}function t(e){return n(e).toLocaleString("es-ES",{style:"currency",currency:"EUR",maximumFractionDigits:2})}function c(e,s=2){return n(e).toLocaleString("es-ES",{minimumFractionDigits:s,maximumFractionDigits:s})}function d(e,s=!1){if(!Number.isFinite(Number(e)))return"—";let i=Number(e),a=i>0?"+":"";return`${a}${c(i,2)}${s?"%":""}`}function o(e){return String(e||"").normalize("NFD").replace(/[\\u0300-\\u036f]/g,"").toLowerCase().trim()}function h(e){return o(e).replace(/\\s+/g," ").trim()}function p(){let e=new URLSearchParams(window.location.search);return{q:String(e.get("q")||""),relation:String(e.get("relation")||""),infractionType:String(e.get("infraction_type")||""),sanctionSource:String(e.get("source")||""),sourceSystem:String(e.get("source_system")||""),kpi:String(e.get("kpi")||""),periodGranularity:String(e.get("granularity")||""),periodDate:String(e.get("period_date")||""),municipalStatus:String(e.get("municipal_status")||""),municipalQ:String(e.get("municipal_q")||"")}}function m(e,s,i){return!i||s.map(e=>o(e)).filter(Boolean).join(" ").includes(i)}function x(){let{loading:e,error:n,data:x}=function(){let[e,s]=(0,i.useState)({loading:!0,error:null,data:null});return(0,i.useEffect)(()=>{let e=new AbortController,i=`${a()}/legal-sanctions/data/legal-sanctions.json`;return s({loading:!0,error:null,data:null}),fetch(i,{signal:e.signal}).then(e=>{if(!e.ok)throw Error(`Respuesta no v\xe1lida: ${e.status}`);return e.json()}).then(e=>{s({loading:!1,error:null,data:e})}).catch(e=>{"AbortError"!==e.name&&s({loading:!1,error:e.message||String(e),data:null})}),()=>e.abort()},[]),e}(),[u,j]=(0,i.useState)(()=>p());if((0,i.useEffect)(()=>{j(p())},[]),(0,i.useEffect)(()=>{let e,s;e=new URLSearchParams,u.q&&e.set("q",u.q),u.relation&&e.set("relation",u.relation),u.infractionType&&e.set("infraction_type",u.infractionType),u.sanctionSource&&e.set("source",u.sanctionSource),u.sourceSystem&&e.set("source_system",u.sourceSystem),u.kpi&&e.set("kpi",u.kpi),u.periodGranularity&&e.set("granularity",u.periodGranularity),u.periodDate&&e.set("period_date",u.periodDate),u.municipalStatus&&e.set("municipal_status",u.municipalStatus),u.municipalQ&&e.set("municipal_q",u.municipalQ),s=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`,window.history.replaceState({},"",s)},[u]),e)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsx)("section",{className:"card block",children:(0,s.jsx)("h1",{children:"Cargando legal + sanciones…"})})});if(n)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("h1",{children:"No se pudo cargar el snapshot"}),(0,s.jsx)("p",{className:"sub",children:n}),(0,s.jsx)("p",{className:"sub",children:(0,s.jsx)("a",{href:`${a()}/legal-sanctions/?`,children:"Reintentar"})})]})});if(!x)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("h1",{children:"Sin datos"}),(0,s.jsx)("p",{className:"sub",children:"No se encontró el snapshot de monitorización jurídica."})]})});let _=h(u.q),N=x.legal_graph||{},b=x.infraction_network||{},g=x.sanction_volume_monitoring||{},y=x.procedural_kpi_drift||[],f=x.municipal_monitoring||{},v=f.summary||{},k=f.city_summary||[],S=f.ordinance_rows||[],C=x.responsibility_summary||{},T=x.liberty_restriction_monitoring||{},$=x.filters||{},D=(0,i.useMemo)(()=>Array.isArray(N.nodes)?N.nodes:[],[N.nodes]),M=(0,i.useMemo)(()=>Array.isArray(N.edges)?N.edges:[],[N.edges]),A=(0,i.useMemo)(()=>Array.isArray(b.infraction_types)?b.infraction_types:[],[b.infraction_types]),L=(0,i.useMemo)(()=>Array.isArray(b.mappings)?b.mappings:[],[b.mappings]),w=(0,i.useMemo)(()=>Array.isArray(g.series)?g.series:[],[g.series]);(0,i.useMemo)(()=>Array.isArray(g.source_totals)?g.source_totals:[],[g.source_totals]),(0,i.useMemo)(()=>Array.isArray(g.sources)?g.sources:[],[g.sources]);let I=(0,i.useMemo)(()=>Array.isArray(g.periods)?g.periods:[],[g.periods]),F=(0,i.useMemo)(()=>Array.isArray(y)?y:[],[y]),V=(0,i.useMemo)(()=>N.relation_types||$.relation_types||[],[N.relation_types,$.relation_types]),E=(0,i.useMemo)(()=>$.source_ids||[],[$.source_ids]),G=(0,i.useMemo)(()=>$.infraction_type_ids||[],[$.infraction_type_ids]),R=(0,i.useMemo)(()=>$.kpi_ids||[],[$.kpi_ids]),z=(0,i.useMemo)(()=>D.filter(e=>m(e,[e.norm_id,e.boe_id,e.title,e.scope,e.topic_hint,e.effective_date,e.published_date],_)),[D,_]),P=(0,i.useMemo)(()=>M.filter(e=>(!u.relation||o(e.relation_type)===o(u.relation))&&m(e,[e.source_norm_id,e.source_norm_boe_id,e.related_norm_id,e.related_norm_boe_id,e.source_norm_title,e.related_norm_title,e.relation_type,e.relation_scope,e.evidence_quote],_)),[M,u.relation,_]),q=(0,i.useMemo)(()=>A.filter(e=>(!u.infractionType||String(e.infraction_type_id||e.infraction_label)===u.infractionType)&&m(e,[e.infraction_type_id,e.infraction_label,e.infraction_domain,e.canonical_unit],_)),[A,u.infractionType,_]),B=(0,i.useMemo)(()=>L.filter(e=>{let s=!u.infractionType||String(e.infraction_type_id)===u.infractionType,i=!u.sourceSystem||o(e.source_system)===o(u.sourceSystem);return!!s&&!!i&&m(e,[e.mapping_key,e.norm_id,e.fragment_id,e.source_code,e.source_label,e.source_system],_)}),[L,u.infractionType,u.sourceSystem,_]),O=(0,i.useMemo)(()=>w.filter(e=>(!u.sanctionSource||e.sanction_source_id===u.sanctionSource)&&(!u.periodGranularity||e.period_granularity===u.periodGranularity)&&(!u.periodDate||e.period_date===u.periodDate)&&m(e,[e.sanction_source_id,e.source_label,e.admin_scope,e.territory_scope,e.territory_name],_)),[w,u.sanctionSource,u.periodGranularity,u.periodDate,_]),H=(0,i.useMemo)(()=>F.filter(e=>(!u.kpi||e.kpi_id===u.kpi)&&(!u.sanctionSource||e.sanction_source_id===u.sanctionSource)&&m(e,[e.kpi_id,e.kpi_label,e.territory_name,e.source_label],_)),[F,u.kpi,u.sanctionSource,_]),K=(0,i.useMemo)(()=>S.filter(e=>(!u.municipalStatus||o(e.ordinance_status)===o(u.municipalStatus))&&m(e,[e.city_name,e.province_name,e.ordinance_label,e.ordinance_status,e.publication_date],h(u.municipalQ))),[S,u.municipalStatus,u.municipalQ]),W=(0,i.useMemo)(()=>{let e=new Map;for(let s of I){let i=String(s.period_granularity||""),a=String(s.period_date||"");i&&a&&e.set(`${i}::${a}`,!0)}return Array.from(e.keys()).map(e=>{let[s,i]=e.split("::");return{granularity:s,periodDate:i,label:`${s} \xb7 ${i}`}}).sort((e,s)=>`${e.granularity} ${e.periodDate}`.localeCompare(`${s.granularity} ${s.periodDate}`))},[I]);return(0,s.jsxs)("main",{className:"shell",children:[(0,s.jsxs)("section",{className:"hero card",children:[(0,s.jsx)("p",{className:"eyebrow",children:"Legal + sanciones"}),(0,s.jsx)("h1",{children:"Monitor jurídico y de ejecución sancionadora"}),(0,s.jsx)("p",{className:"sub",children:"Conecta normas, vínculos de texto, tipos de infracción, volúmenes de sanciones y evolución de KPIs procedimentales. También incluye monitor municipal y restricciones de derechos con trazabilidad pública."}),(0,s.jsxs)("div",{className:"chips",children:[(0,s.jsxs)("span",{className:"chip",children:["Snapshot: ",x.snapshot_date||"—"]}),(0,s.jsxs)("span",{className:"chip",children:["Nodos normativos: ",l(N.node_count||0)]}),(0,s.jsxs)("span",{className:"chip",children:["Aristas de línea: ",l(N.edge_count||0)]}),(0,s.jsxs)("span",{className:"chip",children:["Tipos de infracción: ",l(q.length)]}),(0,s.jsxs)("span",{className:"chip",children:["Total asignaciones: ",l(B.length)]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Resumen ejecutivo"})}),(0,s.jsxs)("div",{className:"kpiGrid",children:[(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Responsabilidad (filas con evidencia principal)"}),(0,s.jsxs)("span",{className:"kpiValue",children:[l(C.rows_with_primary_evidence||0)," / ",l(C.rows_total||0)]})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Observaciones de sanción"}),(0,s.jsx)("span",{className:"kpiValue",children:l(w.length)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"KPIs procedimentales"}),(0,s.jsx)("span",{className:"kpiValue",children:l(F.length)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Ordenanzas municipales"}),(0,s.jsx)("span",{className:"kpiValue",children:l(S.length)}),(0,s.jsxs)("span",{className:"tileNote",children:["Normalizadas: ",l(v.normalized_ordinances||0)," / Bloqueadas:"," ",l(v.blocked_ordinances||0)]})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Libertad restringida"}),(0,s.jsx)("span",{className:"kpiValue",children:T.enabled?"Disponibilidad":"No activa"}),(0,s.jsxs)("span",{className:"tileNote",children:["Filas: ",l(T.rows||0)]})]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Filtros"})}),(0,s.jsxs)("div",{className:"filterGrid",children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Buscar"}),(0,s.jsx)("input",{className:"textInput",value:u.q,onChange:e=>j(s=>({...s,q:e.target.value})),placeholder:"BOE, título, relación, infracción, ámbito..."})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Tipo de relación legal"}),(0,s.jsxs)("select",{className:"textInput",value:u.relation,onChange:e=>j(s=>({...s,relation:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),V.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Tipo de infracción"}),(0,s.jsxs)("select",{className:"textInput",value:u.infractionType,onChange:e=>j(s=>({...s,infractionType:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),G.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Fuente de sanción"}),(0,s.jsxs)("select",{className:"textInput",value:u.sanctionSource,onChange:e=>j(s=>({...s,sanctionSource:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),$.source_ids?.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"KPIs (ID)"}),(0,s.jsxs)("select",{className:"textInput",value:u.kpi,onChange:e=>j(s=>({...s,kpi:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),R.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Sistema de origen (mapeo)"}),(0,s.jsxs)("select",{className:"textInput",value:u.sourceSystem,onChange:e=>j(s=>({...s,sourceSystem:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),E.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Granularidad temporal"}),(0,s.jsxs)("select",{className:"textInput",value:u.periodGranularity,onChange:e=>j(s=>({...s,periodGranularity:e.target.value,periodDate:""})),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),Array.from(new Set(I.map(e=>e.period_granularity||""))).filter(Boolean).sort().map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Periodo"}),(0,s.jsxs)("select",{className:"textInput",value:u.periodDate,onChange:e=>j(s=>({...s,periodDate:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),W.filter(e=>!u.periodGranularity||e.granularity===u.periodGranularity).map(e=>(0,s.jsx)("option",{value:e.periodDate,children:e.label},`${e.granularity}::${e.periodDate}`))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Estado municipal"}),(0,s.jsxs)("select",{className:"textInput",value:u.municipalStatus,onChange:e=>j(s=>({...s,municipalStatus:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),(v.status_counts||[]).map(e=>(0,s.jsxs)("option",{value:e.status,children:[e.status," (",e.total||0,")"]},e.status))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Buscar ordenanzas"}),(0,s.jsx)("input",{className:"textInput",value:u.municipalQ,onChange:e=>j(s=>({...s,municipalQ:e.target.value})),placeholder:"Ciudad, provincia, etiqueta..."})]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Grafo jurídico"})}),(0,s.jsxs)("div",{className:"kpiGrid",children:[(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Nodos mostrados"}),(0,s.jsx)("span",{className:"kpiValue",children:l(z.length)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Relaciones mostradas"}),(0,s.jsx)("span",{className:"kpiValue",children:l(P.length)})]})]}),(0,s.jsxs)("div",{className:"twoCols",style:{marginTop:"12px"},children:[(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Norma origen"}),(0,s.jsx)("th",{children:"BOE"}),(0,s.jsx)("th",{children:"Relación"}),(0,s.jsx)("th",{children:"Norma destino"}),(0,s.jsx)("th",{children:"BOE destino"}),(0,s.jsx)("th",{children:"Fecha evidencia"})]})}),(0,s.jsx)("tbody",{children:0===P.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,children:"No hay aristas con los filtros actuales."})}):P.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.source_norm_id}),(0,s.jsx)("td",{children:e.source_norm_boe_id||"—"}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"pill pill-muted",children:e.relation_type||"—"})}),(0,s.jsx)("td",{children:e.related_norm_id||"—"}),(0,s.jsx)("td",{children:e.related_norm_boe_id||"—"}),(0,s.jsx)("td",{children:e.evidence_date||"—"})]},`${e.lineage_edge_id}-${e.source_norm_id}-${e.related_norm_id}`))})]})}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Norma"}),(0,s.jsx)("th",{children:"BOE"}),(0,s.jsx)("th",{children:"Ámbito"}),(0,s.jsx)("th",{children:"Publicada"}),(0,s.jsx)("th",{children:"Fragmentos"})]})}),(0,s.jsx)("tbody",{children:0===z.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,children:"No hay normas con los filtros actuales."})}):z.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.title||e.norm_id}),(0,s.jsx)("td",{children:e.boe_id||"—"}),(0,s.jsx)("td",{children:e.scope||"—"}),(0,s.jsx)("td",{children:e.published_date||"—"}),(0,s.jsx)("td",{children:r(e.fragments_total)})]},e.norm_id))})]})})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Red de infracciones y responsabilidades"})}),(0,s.jsx)("div",{className:"tableWrap",style:{marginBottom:"12px"},children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Tipo de infracción"}),(0,s.jsx)("th",{children:"Dominio"}),(0,s.jsx)("th",{children:"Unidades"}),(0,s.jsx)("th",{children:"Mapeos"}),(0,s.jsx)("th",{children:"Normas cubiertas"}),(0,s.jsx)("th",{children:"Fragmentos"}),(0,s.jsx)("th",{children:"Expedientes"}),(0,s.jsx)("th",{children:"Importe"})]})}),(0,s.jsx)("tbody",{children:0===q.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,children:"Sin tipos de infracción para los filtros."})}):q.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.infraction_label||e.infraction_type_id}),(0,s.jsx)("td",{children:e.infraction_domain||"—"}),(0,s.jsx)("td",{children:e.canonical_unit||"—"}),(0,s.jsx)("td",{children:l(e.mapping_rows||0)}),(0,s.jsx)("td",{children:l(e.norms_covered||0)}),(0,s.jsx)("td",{children:l(e.fragments_covered||0)}),(0,s.jsx)("td",{children:l(e.obs_expediente_total||0)}),(0,s.jsx)("td",{children:t(e.obs_importe_total_eur||0)})]},e.infraction_type_id))})]})}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Tipo"}),(0,s.jsx)("th",{children:"Fuente/sistema"}),(0,s.jsx)("th",{children:"Código"}),(0,s.jsx)("th",{children:"Norma"}),(0,s.jsx)("th",{children:"Fragmento"}),(0,s.jsx)("th",{children:"Conf."}),(0,s.jsx)("th",{children:"Vía"})]})}),(0,s.jsx)("tbody",{children:0===B.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,children:"Sin mapeos con los filtros actuales."})}):B.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.infraction_label||e.infraction_type_id}),(0,s.jsx)("td",{children:e.source_system||e.source_label||"—"}),(0,s.jsx)("td",{children:e.source_code||"—"}),(0,s.jsx)("td",{children:e.norm_id||"—"}),(0,s.jsx)("td",{children:e.fragment_id||"—"}),(0,s.jsx)("td",{children:c(e.confidence,4)}),(0,s.jsx)("td",{children:e.source_url?(0,s.jsx)("a",{href:e.source_url,target:"_blank",rel:"noreferrer",children:"evidencia"}):"—"})]},e.mapping_id))})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsxs)("div",{className:"blockHead",children:[(0,s.jsx)("h2",{children:"Monitoreo de volumen por período"}),(0,s.jsx)("p",{className:"tileNote",children:"Deltas calculadas frente al punto anterior de la misma serie territorial-fuente."})]}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Fuente"}),(0,s.jsx)("th",{children:"Ámbito / Territorio"}),(0,s.jsx)("th",{children:"Periodo"}),(0,s.jsx)("th",{children:"Expedientes"}),(0,s.jsx)("th",{children:"Importe total"}),(0,s.jsx)("th",{children:"Delta exped."}),(0,s.jsx)("th",{children:"Delta importe %"}),(0,s.jsx)("th",{children:"Recurso presentado"}),(0,s.jsx)("th",{children:"Recurso desestimado"})]})}),(0,s.jsx)("tbody",{children:0===O.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,children:"Sin observaciones de volumen para los filtros."})}):O.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.source_label||e.sanction_source_id}),(0,s.jsxs)("td",{children:[e.admin_scope||"—",e.territory_name?` \xb7 ${e.territory_name}`:""]}),(0,s.jsxs)("td",{children:[e.period_granularity," ",e.period_date]}),(0,s.jsx)("td",{children:l(e.expediente_count||0)}),(0,s.jsx)("td",{children:t(e.importe_total_eur||0)}),(0,s.jsx)("td",{children:d(e.delta_expediente_count)}),(0,s.jsx)("td",{children:d(e.delta_importe_total_pct,!0)}),(0,s.jsx)("td",{children:l(e.recurso_presentado_count||0)}),(0,s.jsx)("td",{children:l(e.recurso_desestimado_count||0)})]},`${e.sanction_source_id}-${e.period_granularity}-${e.period_date}-${e.territory_name}`))})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsxs)("div",{className:"blockHead",children:[(0,s.jsx)("h2",{children:"Derivas de KPIs procesales"}),(0,s.jsx)("p",{className:"tileNote",children:"Variación temporal por norma organizativa y fuente."})]}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"KPI"}),(0,s.jsx)("th",{children:"Dirección objetivo"}),(0,s.jsx)("th",{children:"Fuente"}),(0,s.jsx)("th",{children:"Territorio"}),(0,s.jsx)("th",{children:"Periodo"}),(0,s.jsx)("th",{children:"Valor"}),(0,s.jsx)("th",{children:"Delta"}),(0,s.jsx)("th",{children:"Delta %"}),(0,s.jsx)("th",{children:"Numerador"}),(0,s.jsx)("th",{children:"Denominador"})]})}),(0,s.jsx)("tbody",{children:0===H.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,children:"Sin KPIs con los filtros actuales."})}):H.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[e.kpi_label||e.kpi_id,(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"tileNote",children:e.kpi_id})]}),(0,s.jsx)("td",{children:e.target_direction||"—"}),(0,s.jsx)("td",{children:e.source_label||e.sanction_source_id}),(0,s.jsx)("td",{children:e.territory_name||"—"}),(0,s.jsxs)("td",{children:[e.period_granularity," ",e.period_date]}),(0,s.jsx)("td",{children:c(e.value,4)}),(0,s.jsx)("td",{children:d(e.delta_value,!1)}),(0,s.jsx)("td",{children:d(e.delta_value_pct,!0)}),(0,s.jsx)("td",{children:c(e.numerator,4)}),(0,s.jsx)("td",{children:c(e.denominator,4)})]},`${e.kpi_id}-${e.sanction_source_id}-${e.territory_id}-${e.period_granularity}-${e.period_date}`))})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Órdenes y régimen municipal"})}),(0,s.jsxs)("div",{className:"kpiGrid",children:[(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Órdenes totales"}),(0,s.jsx)("span",{className:"kpiValue",children:l(v.total_ordinances||0)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Normalizadas"}),(0,s.jsx)("span",{className:"kpiValue",children:l(v.normalized_ordinances||0)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Identificadas"}),(0,s.jsx)("span",{className:"kpiValue",children:l(v.identified_ordinances||0)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Bloqueadas"}),(0,s.jsx)("span",{className:"kpiValue",children:l(v.blocked_ordinances||0)})]})]}),(0,s.jsx)("div",{className:"tableWrap",style:{marginTop:"12px"},children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Ciudad"}),(0,s.jsx)("th",{children:"Provincia"}),(0,s.jsx)("th",{children:"Órdenes"}),(0,s.jsx)("th",{children:"Normalizadas"}),(0,s.jsx)("th",{children:"Identificadas"}),(0,s.jsx)("th",{children:"Bloqueadas"})]})}),(0,s.jsx)("tbody",{children:0===k.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,children:"No hay resumen territorial."})}):k.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.city_name||"—"}),(0,s.jsx)("td",{children:e.province_name||"—"}),(0,s.jsx)("td",{children:l(e.ordinances_total||0)}),(0,s.jsx)("td",{children:l(e.normalized_total||0)}),(0,s.jsx)("td",{children:l(e.identified_total||0)}),(0,s.jsx)("td",{children:l(e.blocked_total||0)})]},`${e.city_name}-${e.province_name}`))})]})}),(0,s.jsx)("div",{className:"tableWrap",style:{marginTop:"12px"},children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Ciudad"}),(0,s.jsx)("th",{children:"Provincia"}),(0,s.jsx)("th",{children:"Ordenanza"}),(0,s.jsx)("th",{children:"Estado"}),(0,s.jsx)("th",{children:"Fecha publicación"}),(0,s.jsx)("th",{children:"Frags"}),(0,s.jsx)("th",{children:"Mapeadas"}),(0,s.jsx)("th",{children:"URL"})]})}),(0,s.jsx)("tbody",{children:0===K.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,children:"Sin ordenanzas con filtros actuales."})}):K.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.city_name||"—"}),(0,s.jsx)("td",{children:e.province_name||"—"}),(0,s.jsx)("td",{children:e.ordinance_label||"—"}),(0,s.jsx)("td",{children:e.ordinance_status||"—"}),(0,s.jsx)("td",{children:e.publication_date||"—"}),(0,s.jsx)("td",{children:l(e.fragments_total||0)}),(0,s.jsxs)("td",{children:[l(e.mapped_fragment_rows||0)," / ",l(e.mapped_norm_fragments||0)]}),(0,s.jsx)("td",{children:e.ordinance_url?(0,s.jsx)("a",{href:e.ordinance_url,target:"_blank",rel:"noreferrer",children:"abrir"}):"—"})]},e.ordinance_id))})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsxs)("div",{className:"blockHead",children:[(0,s.jsx)("h2",{children:"Restricción de libertades: señal"}),(0,s.jsx)("p",{className:"tileNote",children:"Vista mínima para enlazar cambios normativos con observaciones de impacto en derechos."})]}),(0,s.jsxs)("div",{className:"kpiGrid",children:[(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Activo"}),(0,s.jsx)("span",{className:"kpiValue",children:T.enabled?"Sí":"No"})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Observaciones"}),(0,s.jsx)("span",{className:"kpiValue",children:l(T.rows||0)})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"IRLC medio"}),(0,s.jsx)("span",{className:"kpiValue",children:"number"==typeof T.avg_irlc_score?c(T.avg_irlc_score,4):"—"})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Confianza media"}),(0,s.jsx)("span",{className:"kpiValue",children:"number"==typeof T.avg_confidence?c(T.avg_confidence,4):"—"})]})]})]})]})}e.s(["default",()=>x])}]);