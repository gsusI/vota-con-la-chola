(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50196,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function i(e){let t=Number(e);return Number.isFinite(t)?t:0}function l(e){let t=Number(e);return Number.isFinite(t)?t:0}function c(e){return i(e).toLocaleString("es-ES")}function r(e){let t=Number(e);return Number.isFinite(t)?`${t.toFixed(1)}%`:"—"}function a(e){let t=Number(e);if(!Number.isFinite(t))return"—";let s=t>0?"+":"";return`${s}${t.toFixed(1)}pp`}function n(e){let t=Number(e);return Number.isFinite(t)?t>0?"pill-success":t<0?"pill-danger":"pill-muted":"pill-muted"}function o(e){return"congreso"===e?"Congreso":"senado"===e?"Senado":e||"—"}function d(){let e=new URLSearchParams(window.location.search);return{bucket:String(e.get("bucket")||"all"),election:String(e.get("election")||""),party:String(e.get("party")||""),topic:String(e.get("topic")||""),territory:String(e.get("territory")||""),sortParty:String(e.get("sortParty")||"delta_abs_desc"),sortTopic:String(e.get("sortTopic")||"delta_abs_desc"),sortDistrict:String(e.get("sortDistrict")||"seats_desc")}}function h(){let{loading:e,error:h,data:p}=function(){let[e,t]=(0,s.useState)({loading:!0,error:null,data:null});return(0,s.useEffect)(()=>{let e=new AbortController;return t({loading:!0,error:null,data:null}),fetch("/vota-con-la-chola/elections-behavior/data/elections-behavior.json",{signal:e.signal}).then(e=>{if(!e.ok)throw Error(`Respuesta no v\xe1lida: ${e.status}`);return e.json()}).then(e=>{t({loading:!1,error:null,data:e})}).catch(e=>{"AbortError"!==e.name&&t({loading:!1,error:e.message||String(e),data:null})}),()=>e.abort()},[]),e}(),[x,_]=(0,s.useState)(()=>d());(0,s.useEffect)(()=>{_(d())},[]),(0,s.useEffect)(()=>{let e=new URLSearchParams;x.bucket&&"all"!==x.bucket&&e.set("bucket",x.bucket),x.election&&e.set("election",x.election),x.party&&e.set("party",x.party),x.topic&&e.set("topic",x.topic),x.territory&&e.set("territory",x.territory),"delta_abs_desc"!==x.sortParty&&e.set("sortParty",x.sortParty),"delta_abs_desc"!==x.sortTopic&&e.set("sortTopic",x.sortTopic),"seats_desc"!==x.sortDistrict&&e.set("sortDistrict",x.sortDistrict);let t=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`;window.history.replaceState({},"",t)},[x]);let j=(0,s.useMemo)(()=>p?.elections||[],[p?.elections]),u=(0,s.useMemo)(()=>p?.party_shifts||[],[p?.party_shifts]),b=(0,s.useMemo)(()=>p?.topic_shifts||[],[p?.topic_shifts]),m=(0,s.useMemo)(()=>p?.district_representation||[],[p?.district_representation]),v=p?.meta||{},g=(p?.institutions||[]).map(e=>e?.bucket||""),y=(0,s.useMemo)(()=>j.filter(e=>"all"===x.bucket||!x.bucket||e.bucket===x.bucket).sort((e,t)=>String(t.election_date||"").localeCompare(String(e.election_date||""))).map(e=>({election_id:String(e.election_id||""),label:`${String(e.label||e.election_id||"")} (${e.election_date||"—"})`,bucket:e.bucket})),[j,x.bucket]),N=(0,s.useMemo)(()=>{let e=x.party.trim().toLowerCase();return j.filter(e=>"all"===x.bucket||e.bucket===x.bucket).filter(e=>!x.election||e.election_id===x.election).filter(t=>!e||String(t.label||t.election_id||"").toLowerCase().includes(e))},[j,x.bucket,x.election,x.party]),f=(0,s.useMemo)(()=>{let e=x.party.trim().toLowerCase(),t=u.filter(t=>("all"===x.bucket||t.bucket===x.bucket)&&(!x.election||t.election_id===x.election)&&(!e||!!String(t.party_label||"").toLowerCase().includes(e)));return t.sort((e,t)=>{let s=x.sortParty;return"delta_desc"===s?l(t.delta_cohesion_pct)-l(e.delta_cohesion_pct):"delta_asc"===s?l(e.delta_cohesion_pct)-l(t.delta_cohesion_pct):"post_desc"===s?i(t.post_directional_votes)-i(e.post_directional_votes):"post_asc"===s?i(e.post_directional_votes)-i(t.post_directional_votes):Math.abs(l(t.delta_cohesion_pct))-Math.abs(l(e.delta_cohesion_pct))}),t},[u,x.bucket,x.election,x.party,x.sortParty]),k=(0,s.useMemo)(()=>{let e=x.topic.trim().toLowerCase(),t=b.filter(t=>("all"===x.bucket||t.bucket===x.bucket)&&(!x.election||t.election_id===x.election)&&(!e||!!String(t.topic||"").toLowerCase().includes(e)));return t.sort((e,t)=>{let s=x.sortTopic;return"delta_desc"===s?l(t.delta_cohesion_pct)-l(e.delta_cohesion_pct):"delta_asc"===s?l(e.delta_cohesion_pct)-l(t.delta_cohesion_pct):"pre_desc"===s?l(t.pre_directional_votes||0)-l(e.pre_directional_votes||0):"pre_asc"===s?l(e.pre_directional_votes||0)-l(t.pre_directional_votes||0):Math.abs(l(t.delta_cohesion_pct))-Math.abs(l(e.delta_cohesion_pct))}),t},[b,x.bucket,x.election,x.topic,x.sortTopic]),S=(0,s.useMemo)(()=>{let e=x.territory.trim().toLowerCase(),t=m.filter(t=>("all"===x.bucket||t.bucket===x.bucket)&&(!x.election||t.election_id===x.election)&&(!x.party||!!String(t.party_label||"").toLowerCase().includes(x.party.toLowerCase()))&&(!e||!!String(t.territory_label||"").toLowerCase().includes(e)));return t.sort((e,t)=>{let s=x.sortDistrict;return"seats_desc"===s?i(t.seats)-i(e.seats):"seats_asc"===s?i(e.seats)-i(t.seats):"cohesion_desc"===s?l(t.behavior_cohesion_pct)-l(e.behavior_cohesion_pct):"cohesion_asc"===s?l(e.behavior_cohesion_pct)-l(t.behavior_cohesion_pct):i(t.seats)-i(e.seats)}),t},[m,x.bucket,x.election,x.party,x.territory,x.sortDistrict]);return e?(0,t.jsx)("main",{className:"shell",children:(0,t.jsxs)("section",{className:"hero card",children:[(0,t.jsx)("p",{className:"eyebrow",children:"Conexión electoral"}),(0,t.jsx)("h1",{children:"Cargando conexiones elecciones-comportamiento"}),(0,t.jsx)("p",{className:"sub",children:"Esperando el snapshot estático de GH Pages..."})]})}):h?(0,t.jsx)("main",{className:"shell",children:(0,t.jsxs)("section",{className:"hero card",children:[(0,t.jsx)("p",{className:"eyebrow",children:"Conexión electoral"}),(0,t.jsx)("h1",{children:"No se pudo cargar el snapshot"}),(0,t.jsx)("p",{className:"sub",children:h})]})}):(0,t.jsxs)("main",{className:"shell",children:[(0,t.jsxs)("section",{className:"hero card",children:[(0,t.jsx)("p",{className:"eyebrow",children:"Conexión elecciones-comportamiento"}),(0,t.jsx)("h1",{children:"Análisis: antes y después de cada elección"}),(0,t.jsx)("p",{className:"sub",children:"Relaciona elección nacional (Congreso / Senado) con cambios de cohesión partidaria, cambios temáticos y representación territorial del periodo pre/post."}),(0,t.jsxs)("div",{className:"chips",style:{marginTop:10},children:[(0,t.jsxs)("span",{className:"chip",children:["Snapshot: ",v.generated_at||"sin fecha"]}),(0,t.jsxs)("span",{className:"chip",children:["Elecciones: ",c(j.length)]}),(0,t.jsxs)("span",{className:"chip",children:["Partidos con cambios: ",c(f.length)]}),(0,t.jsxs)("span",{className:"chip",children:["Temas con cambios: ",c(k.length)]}),(0,t.jsxs)("span",{className:"chip",children:["Territorios analizados: ",c(S.length)]})]})]}),(0,t.jsxs)("section",{className:"card block",children:[(0,t.jsx)("div",{className:"blockHead",children:(0,t.jsx)("h2",{children:"Filtros globales"})}),(0,t.jsxs)("div",{className:"filterGrid",children:[(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-bucket",children:"Camara"}),(0,t.jsxs)("select",{id:"eb-bucket",className:"tableFilterSelect",value:x.bucket,onChange:e=>_(t=>({...t,bucket:e.target.value})),children:[(0,t.jsx)("option",{value:"all",children:"Todas"}),g.map(e=>(0,t.jsx)("option",{value:e,children:o(e)},e))]})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-election",children:"Elección"}),(0,t.jsxs)("select",{id:"eb-election",className:"tableFilterSelect",value:x.election,onChange:e=>_(t=>({...t,election:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Todas"}),y.map(e=>(0,t.jsx)("option",{value:e.election_id,children:e.label},e.election_id))]})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-party",children:"Partido"}),(0,t.jsx)("input",{id:"eb-party",type:"text",className:"textInput",value:x.party,onChange:e=>_(t=>({...t,party:e.target.value}))})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-topic",children:"Tema"}),(0,t.jsx)("input",{id:"eb-topic",type:"text",className:"textInput",value:x.topic,onChange:e=>_(t=>({...t,topic:e.target.value}))})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-territory",children:"Territorio"}),(0,t.jsx)("input",{id:"eb-territory",type:"text",className:"textInput",value:x.territory,onChange:e=>_(t=>({...t,territory:e.target.value}))})]})]})]}),(0,t.jsxs)("section",{className:"card block",children:[(0,t.jsx)("div",{className:"blockHead",children:(0,t.jsx)("h2",{children:"Elections"})}),(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Camara"}),(0,t.jsx)("th",{children:"Elección"}),(0,t.jsx)("th",{children:"Fecha"}),(0,t.jsx)("th",{children:"Tipo"}),(0,t.jsx)("th",{children:"Ventana pre/post"}),(0,t.jsx)("th",{children:"Votaciones ventana pre"}),(0,t.jsx)("th",{children:"Votaciones ventana post"}),(0,t.jsx)("th",{children:"Resultado oficial"})]})}),(0,t.jsxs)("tbody",{children:[N.map(e=>{let s,i;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:o(e.bucket)}),(0,t.jsx)("td",{children:String(e.label||e.election_id||"—")}),(0,t.jsx)("td",{children:String(e.election_date||"—")}),(0,t.jsx)("td",{children:String(e.type||"—")}),(0,t.jsx)("td",{children:(s=`${e.pre_window_from||"—"} → ${e.pre_window_to||"—"}`,i=`${e.post_window_from||"—"} → ${e.post_window_to||"—"}`,`${s} / ${i}`)}),(0,t.jsx)("td",{children:c(e.pre_events||0)}),(0,t.jsx)("td",{children:c(e.post_events||0)}),(0,t.jsx)("td",{children:e.has_result_payload?`Cobertura ${c(e.result_rows||0)}`:"Sin cobertura"})]},e.election_id)}),!N.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:8,className:"sub",children:"No hay elecciones para el filtro aplicado."})})]})]})})]}),(0,t.jsxs)("section",{className:"card block",children:[(0,t.jsxs)("div",{className:"blockHead",children:[(0,t.jsx)("h2",{children:"Cambios de cohesión por partido (pre/post)"}),(0,t.jsx)("div",{className:"filterGrid",style:{marginTop:8},children:(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-sort-party",children:"Orden"}),(0,t.jsxs)("select",{id:"eb-sort-party",className:"tableFilterSelect",value:x.sortParty,onChange:e=>_(t=>({...t,sortParty:e.target.value})),children:[(0,t.jsx)("option",{value:"delta_abs_desc",children:"Δ Cohesión | abs descendente"}),(0,t.jsx)("option",{value:"delta_desc",children:"Δ Cohesión descendente"}),(0,t.jsx)("option",{value:"delta_asc",children:"Δ Cohesión ascendente"}),(0,t.jsx)("option",{value:"post_desc",children:"Votaciones post descendente"}),(0,t.jsx)("option",{value:"post_asc",children:"Votaciones post ascendente"})]})]})})]}),(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Camara"}),(0,t.jsx)("th",{children:"Elección"}),(0,t.jsx)("th",{children:"Partido"}),(0,t.jsx)("th",{children:"Pre"}),(0,t.jsx)("th",{children:"Post"}),(0,t.jsx)("th",{children:"Δ Cohesión"}),(0,t.jsx)("th",{children:"Pre vs elección anterior"})]})}),(0,t.jsxs)("tbody",{children:[f.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:o(e.bucket)}),(0,t.jsx)("td",{children:String(e.label||e.election_id||"—")}),(0,t.jsx)("td",{children:String(e.party_label||"")}),(0,t.jsxs)("td",{children:[r(e.pre_cohesion_pct),(0,t.jsxs)("span",{className:"sub",style:{marginLeft:6,display:"inline-block"},children:["(",c(e.pre_directional_votes)," votos direccionales)"]})]}),(0,t.jsxs)("td",{children:[r(e.post_cohesion_pct),(0,t.jsxs)("span",{className:"sub",style:{marginLeft:6,display:"inline-block"},children:["(",c(e.post_directional_votes)," votos direccionales)"]})]}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:`pill ${n(e.delta_cohesion_pct)}`,children:a(e.delta_cohesion_pct)})}),(0,t.jsx)("td",{children:null===e.pre_vs_prev_election_delta_pct||void 0===e.pre_vs_prev_election_delta_pct?"—":`${String(e.pre_vs_prev_election||"—")} (${a(e.pre_vs_prev_election_delta_pct)})`})]},`${e.bucket}-${e.election_id}-${e.party_id}`)),!f.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"sub",children:"No hay cambios para el filtro aplicado."})})]})]})})]}),(0,t.jsxs)("section",{className:"card block",children:[(0,t.jsxs)("div",{className:"blockHead",children:[(0,t.jsx)("h2",{children:"Cambios por tema (pre/post)"}),(0,t.jsx)("div",{className:"filterGrid",style:{marginTop:8},children:(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-sort-topic",children:"Orden"}),(0,t.jsxs)("select",{id:"eb-sort-topic",className:"tableFilterSelect",value:x.sortTopic,onChange:e=>_(t=>({...t,sortTopic:e.target.value})),children:[(0,t.jsx)("option",{value:"delta_abs_desc",children:"Δ Cohesión | abs descendente"}),(0,t.jsx)("option",{value:"delta_desc",children:"Δ Cohesión descendente"}),(0,t.jsx)("option",{value:"delta_asc",children:"Δ Cohesión ascendente"}),(0,t.jsx)("option",{value:"pre_desc",children:"Votaciones pre descendente"}),(0,t.jsx)("option",{value:"pre_asc",children:"Votaciones pre ascendente"})]})]})})]}),(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Camara"}),(0,t.jsx)("th",{children:"Elección"}),(0,t.jsx)("th",{children:"Partido"}),(0,t.jsx)("th",{children:"Tema"}),(0,t.jsx)("th",{children:"Pre"}),(0,t.jsx)("th",{children:"Post"}),(0,t.jsx)("th",{children:"Δ Cohesión"})]})}),(0,t.jsxs)("tbody",{children:[k.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:o(e.bucket)}),(0,t.jsx)("td",{children:String(e.label||e.election_id||"—")}),(0,t.jsx)("td",{children:String(e.party_label||"")}),(0,t.jsx)("td",{children:String(e.topic||"—")}),(0,t.jsxs)("td",{children:[r(e.pre_cohesion_pct),(0,t.jsxs)("span",{className:"sub",style:{marginLeft:6,display:"inline-block"},children:["(",c(e.pre_directional_votes)," direccionales)"]})]}),(0,t.jsxs)("td",{children:[r(e.post_cohesion_pct),(0,t.jsxs)("span",{className:"sub",style:{marginLeft:6,display:"inline-block"},children:["(",c(e.post_directional_votes)," direccionales)"]})]}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:`pill ${n(e.delta_cohesion_pct)}`,children:a(e.delta_cohesion_pct)})})]},`${e.bucket}-${e.election_id}-${e.party_id}-${e.topic}`)),!k.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"sub",children:"No hay cambios temáticos para el filtro aplicado."})})]})]})})]}),(0,t.jsxs)("section",{className:"card block",children:[(0,t.jsxs)("div",{className:"blockHead",children:[(0,t.jsx)("h2",{children:"Representación territorial y comportamiento post-elección"}),(0,t.jsx)("div",{className:"filterGrid",style:{marginTop:8},children:(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{htmlFor:"eb-sort-district",children:"Orden"}),(0,t.jsxs)("select",{id:"eb-sort-district",className:"tableFilterSelect",value:x.sortDistrict,onChange:e=>_(t=>({...t,sortDistrict:e.target.value})),children:[(0,t.jsx)("option",{value:"seats_desc",children:"Escaños (desc)"}),(0,t.jsx)("option",{value:"seats_asc",children:"Escaños (asc)"}),(0,t.jsx)("option",{value:"cohesion_desc",children:"Cohesión post (desc)"}),(0,t.jsx)("option",{value:"cohesion_asc",children:"Cohesión post (asc)"})]})]})})]}),(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Camara"}),(0,t.jsx)("th",{children:"Elección"}),(0,t.jsx)("th",{children:"Partido"}),(0,t.jsx)("th",{children:"Territorio"}),(0,t.jsx)("th",{children:"Escaños"}),(0,t.jsx)("th",{children:"Cuota escaños"}),(0,t.jsx)("th",{children:"Comportamiento post"})]})}),(0,t.jsxs)("tbody",{children:[S.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:o(e.bucket)}),(0,t.jsx)("td",{children:String(e.label||e.election_id||"—")}),(0,t.jsx)("td",{children:String(e.party_label||"—")}),(0,t.jsx)("td",{children:String(e.territory_label||"—")}),(0,t.jsx)("td",{children:c(e.seats||0)}),(0,t.jsx)("td",{children:r(e.seat_share_pct||0)}),(0,t.jsxs)("td",{children:[r(e.behavior_cohesion_pct||0)," ",(0,t.jsxs)("span",{className:"sub",children:["(",c(e.behavior_directional_votes||0)," direccionales)"]})]})]},`${e.bucket}-${e.election_id}-${e.party_id}-${e.territory_id}`)),!S.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"sub",children:"No hay filas de representación para el filtro aplicado."})})]})]})})]})]})}e.s(["default",()=>h])}]);