(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64718,e=>{"use strict";var s=e.i(43476),a=e.i(71645);function i(){return"/vota-con-la-chola"}function l(e){let s=Number(e);return Number.isFinite(s)?s:0}function t(e){let s=Number(e);return Number.isFinite(s)?s:null}function n(e){return String(e||"").trim().toLowerCase()}function r(e){return l(e).toLocaleString("es-ES")}function c(e){let s=t(e);return null===s?"—":s.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:4})}function o(e){let s=t(e);if(null===s)return"—";let a=s>0?"+":"";return`${a}${s.toFixed(2)}%`}function d(e){return String(e||"—")}function h(e){let s=t(e);return null===s?"pill-muted":s>0?"pill-success":s<0?"pill-danger":"pill-muted"}function u(e){let s=t(e);if(null===s)return"—";let a=s>0?"+":"";return`${a}${c(s)}`}function m(){let e=new URLSearchParams(window.location.search);return{q:String(e.get("q")||""),seriesSource:String(e.get("series_source")||""),eventSource:String(e.get("event_source")||""),domain:String(e.get("domain")||""),sortSeries:String(e.get("sortSeries")||"delta_abs_desc"),sortAssoc:String(e.get("sortAssoc")||"delta_abs_desc"),minAbsDelta:String(e.get("minAbsDelta")||""),mode:String(e.get("mode")||"series")}}function p(e){let a,i=String(e?.url||"").trim(),l=String(e?.label||"").trim();return(a=String(i||"").trim().toLowerCase()).startsWith("http://")||a.startsWith("https://")?(0,s.jsx)("a",{className:"tableButton",href:i,rel:"noopener noreferrer",target:"_blank",children:"Ver fuente"}):l?(0,s.jsx)("span",{className:"tileNote",children:l}):"—"}function x(){let{loading:e,error:x,data:_}=function(){let[e,s]=(0,a.useState)({loading:!0,error:null,data:null});return(0,a.useEffect)(()=>{let e=new AbortController,a=`${i()}/policy-outcomes/data/policy-outcomes.json`;return s({loading:!0,error:null,data:null}),fetch(a,{signal:e.signal}).then(e=>{if(!e.ok)throw Error(`Respuesta no v\xe1lida: ${e.status}`);return e.json()}).then(e=>s({loading:!1,error:null,data:e})).catch(e=>{"AbortError"!==e.name&&s({loading:!1,error:e.message||String(e),data:null})}),()=>e.abort()},[]),e}(),[j,v]=(0,a.useState)(()=>m());if((0,a.useEffect)(()=>{v(m())},[]),(0,a.useEffect)(()=>{let e,s;e=new URLSearchParams,j.q&&e.set("q",j.q),j.seriesSource&&e.set("series_source",j.seriesSource),j.eventSource&&e.set("event_source",j.eventSource),j.domain&&e.set("domain",j.domain),"delta_abs_desc"!==j.sortSeries&&e.set("sortSeries",j.sortSeries),"delta_abs_desc"!==j.sortAssoc&&e.set("sortAssoc",j.sortAssoc),j.minAbsDelta&&e.set("minAbsDelta",j.minAbsDelta),"series"!==j.mode&&e.set("mode",j.mode),s=`${window.location.pathname}${e.toString()?`?${e.toString()}`:""}`,window.history.replaceState({},"",s)},[j]),e)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsx)("section",{className:"card block",children:(0,s.jsx)("h1",{children:"Cargando resultados de política…"})})});if(x)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("h1",{children:"No se pudo cargar el snapshot"}),(0,s.jsx)("p",{className:"sub",children:x}),(0,s.jsx)("p",{className:"sub",children:(0,s.jsx)("a",{href:`${i()}/policy-outcomes/`,children:"Reintentar"})})]})});if(!_)return(0,s.jsx)("main",{className:"shell",children:(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("h1",{children:"Sin datos"}),(0,s.jsx)("p",{className:"sub",children:"No hay snapshot de resultados e indicadores disponible."})]})});let b=_.coverage||{},N=_.limitations||{},y=Array.isArray(_.filters?.series_source_ids)?_.filters.series_source_ids:[],g=Array.isArray(_.filters?.event_source_ids)?_.filters.event_source_ids:[],f=Array.isArray(_.filters?.domains)?_.filters.domains:[],S=n(j.domain),A=n(j.q).replace(/\s+/g," "),k=(0,a.useMemo)(()=>Array.isArray(_.series)?_.series:[],[_.series]),$=(0,a.useMemo)(()=>Array.isArray(_.associations)?_.associations:[],[_.associations]),C=(0,a.useMemo)(()=>{var e,s;let a,i,r=n(j.seriesSource);return e=k.filter(e=>{let s=n(`${e.label} ${e.canonical_key} ${e.domain_label} ${e.domain_key} ${e.territory_label}`);return(!A||!!s.includes(A))&&(!r||n(e.source_id)===r)&&(!S||!!n(`${e.domain_label} ${e.domain_key}`).includes(S))&&!0}),s=j.sortSeries,a=t(j.minAbsDelta),(i=[...e.filter(e=>null===a||Math.abs(t(e?.latest_delta)||0)>=a)]).sort((e,a)=>"points_desc"===s?l(a.point_count)-l(e.point_count):"label_asc"===s?n(e.label||"").localeCompare(n(a.label||"")):"delta_desc"===s?(t(a.latest_delta)||0)-(t(e.latest_delta)||0):"delta_asc"===s?(t(e.latest_delta)||0)-(t(a.latest_delta)||0):"recent"===s?n(a.latest_date).localeCompare(n(e.latest_date)):Math.abs(t(a.latest_delta)||0)-Math.abs(t(e.latest_delta)||0)),i},[k,A,j.seriesSource,j.sortSeries,j.minAbsDelta,S]),E=(0,a.useMemo)(()=>{var e,s;let a,i=n(j.eventSource);return e=$.filter(e=>{let s=n(`${e.indicator_series_label} ${e.indicator_series_canonical_key} ${e.policy_event_title} ${e.policy_event_id}`);return(!A||!!s.includes(A))&&(!i||n(e.policy_event_source_id)===i)&&(!S||!!n(`${e.policy_event_domain_label} ${e.policy_event_domain_key} ${e.indicator_domain_label}`).includes(S))&&(null===t(j.minAbsDelta)||Math.abs(t(e.delta)||0)>=t(j.minAbsDelta))}),s=j.sortAssoc,(a=[...e]).sort((e,a)=>"delta_desc"===s?(t(a.delta)||0)-(t(e.delta)||0):"delta_asc"===s?(t(e.delta)||0)-(t(a.delta)||0):"event_date_desc"===s?n(a.policy_event_date).localeCompare(n(e.policy_event_date)):"event_date_asc"===s?n(e.policy_event_date).localeCompare(n(a.policy_event_date)):"series_asc"===s?n(e.indicator_series_label).localeCompare(n(a.indicator_series_label)):Math.abs(t(a.delta)||0)-Math.abs(t(e.delta)||0)),a},[$,A,j.eventSource,j.sortAssoc,j.minAbsDelta,S]),D=(0,a.useMemo)(()=>{let e=n(j.eventSource);return A?(Array.isArray(_.policy_events)?_.policy_events:[]).filter(s=>(!e||n(s.source_id)===e)&&n(`${s.policy_event_id} ${s.title} ${s.summary} ${s.domain_label}`).includes(A)):(Array.isArray(_.policy_events)?_.policy_events:[]).filter(s=>!e||n(s.source_id)===e)},[_.policy_events,A,j.eventSource]);return(0,s.jsxs)("main",{className:"shell",children:[(0,s.jsxs)("section",{className:"hero card",children:[(0,s.jsx)("p",{className:"eyebrow",children:"Resultados de políticas"}),(0,s.jsx)("h1",{children:"Indicadores de resultados e impacto"}),(0,s.jsx)("p",{className:"sub",children:"Seguimiento temprano de series de indicadores (Eurostat/INE, BDE, AEMET), con cruces descriptivos frente a eventos de política pública."}),(0,s.jsxs)("div",{className:"chips",children:[(0,s.jsxs)("span",{className:"chip",children:["Snapshot: ",b.snapshot_date||_.meta?.snapshot_date||"—"]}),(0,s.jsxs)("span",{className:"chip",children:["Series exportadas: ",r(b.series_loaded||0)]}),(0,s.jsxs)("span",{className:"chip",children:["Puntos: ",r(b.indicator_points_total||0)]}),(0,s.jsxs)("span",{className:"chip",children:["Eventos: ",r(b.events_loaded||0)]}),(0,s.jsxs)("span",{className:"chip",children:["Asociaciones: ",r(b.associations_total||0)]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Resumen ejecutivo"})}),(0,s.jsxs)("div",{className:"kpiGrid",children:[(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Intervenciones"}),(0,s.jsx)("span",{className:"kpiValue",children:r(b.interventions_total||0)}),(0,s.jsx)("span",{className:"tileNote",children:"No hay tabla de intervenciones en esta ventana útil."})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Eventos vinculados"}),(0,s.jsx)("span",{className:"kpiValue",children:r(b.events_in_association||0)}),(0,s.jsx)("span",{className:"tileNote",children:"Eventos con al menos una asociación."})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Series con asociación"}),(0,s.jsx)("span",{className:"kpiValue",children:r(b.series_in_association||0)}),(0,s.jsx)("span",{className:"tileNote",children:"Series incluidas en asociaciones descriptivas."})]}),(0,s.jsxs)("div",{className:"kpiCard",children:[(0,s.jsx)("span",{className:"kpiLabel",children:"Series totales"}),(0,s.jsx)("span",{className:"kpiValue",children:r(b.indicator_series_total||0)}),(0,s.jsx)("span",{className:"tileNote",children:"Cobertura total en BD."})]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Guía de interpretación"})}),(0,s.jsx)("ul",{className:"artifactList",children:["Estas señales son descriptivas y comparables solo como evidencia de co-movimiento temporal.","No se reporta inferencia causal en esta fase por ausencia de vínculos `interventions` y `causal_estimates`.","Sin un diseño de identificación explícito (p. ej. placebo, panel, diferencias en diferencias), no se infiere impacto causal."].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("span",{children:e})},e))}),(0,s.jsxs)("p",{className:"sub",style:{marginTop:"10px"},children:["Estado causal:",(0,s.jsx)("span",{className:"chip",style:{marginLeft:"8px"},children:N.causal_estimates_available?"estimación disponible":"sin estimaciones causales"})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"Filtros"})}),(0,s.jsxs)("div",{className:"filterGrid",children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Buscar"}),(0,s.jsx)("input",{className:"textInput",value:j.q,onChange:e=>v(s=>({...s,q:e.target.value})),placeholder:"Serie o evento..."})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Fuente (series)"}),(0,s.jsxs)("select",{className:"textInput",value:j.seriesSource,onChange:e=>v(s=>({...s,seriesSource:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),y.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Fuente (eventos)"}),(0,s.jsxs)("select",{className:"textInput",value:j.eventSource,onChange:e=>v(s=>({...s,eventSource:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Dominio"}),(0,s.jsxs)("select",{className:"textInput",value:j.domain,onChange:e=>v(s=>({...s,domain:e.target.value})),children:[(0,s.jsx)("option",{value:"",children:"Todos"}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Orden (series)"}),(0,s.jsxs)("select",{className:"textInput",value:j.sortSeries,onChange:e=>v(s=>({...s,sortSeries:e.target.value})),children:[(0,s.jsx)("option",{value:"delta_abs_desc",children:"Variación absoluta (desc)"}),(0,s.jsx)("option",{value:"delta_desc",children:"Variación (desc)"}),(0,s.jsx)("option",{value:"delta_asc",children:"Variación (asc)"}),(0,s.jsx)("option",{value:"points_desc",children:"Puntos"}),(0,s.jsx)("option",{value:"recent",children:"Último punto"}),(0,s.jsx)("option",{value:"label_asc",children:"Etiqueta"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Orden (asociaciones)"}),(0,s.jsxs)("select",{className:"textInput",value:j.sortAssoc,onChange:e=>v(s=>({...s,sortAssoc:e.target.value})),children:[(0,s.jsx)("option",{value:"delta_abs_desc",children:"Variación absoluta (desc)"}),(0,s.jsx)("option",{value:"delta_desc",children:"Variación (desc)"}),(0,s.jsx)("option",{value:"delta_asc",children:"Variación (asc)"}),(0,s.jsx)("option",{value:"event_date_desc",children:"Evento (reciente)"}),(0,s.jsx)("option",{value:"event_date_asc",children:"Evento (antiguo)"}),(0,s.jsx)("option",{value:"series_asc",children:"Serie"})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{children:"Umbral cambio mínimo (abs)"}),(0,s.jsx)("input",{className:"textInput",value:j.minAbsDelta,onChange:e=>v(s=>({...s,minAbsDelta:e.target.value})),placeholder:"0",inputMode:"decimal"})]})]})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"1) Series de indicadores (outcomes)"})}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Serie"}),(0,s.jsx)("th",{children:"Fuente"}),(0,s.jsx)("th",{children:"Dominio"}),(0,s.jsx)("th",{children:"Territorio / ámbito"}),(0,s.jsx)("th",{children:"Último punto"}),(0,s.jsx)("th",{children:"Cambio reciente"}),(0,s.jsx)("th",{children:"Último cambio %"}),(0,s.jsx)("th",{children:"Fuente"})]})}),(0,s.jsxs)("tbody",{children:[C.map(e=>{let a=[e.domain_label,e.frequency,e.unit].filter(Boolean).join(" · ");return e.latest_value_text||c(e.latest_value),(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("strong",{children:e.label||e.canonical_key}),(0,s.jsx)("div",{className:"tileNote",children:a||e.canonical_key})]}),(0,s.jsx)("td",{children:e.source_id||"—"}),(0,s.jsx)("td",{children:e.domain_label||e.domain_key||"—"}),(0,s.jsx)("td",{children:e.territory_label||e.admin_level_label||"—"}),(0,s.jsxs)("td",{children:[c(e.latest_value)," ",e.unit?`(${e.unit})`:""," · ",d(e.latest_date),(0,s.jsxs)("div",{className:"tileNote",children:[d(e.previous_date)," → ",d(e.latest_date)]})]}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`pill ${h(e.latest_delta)}`,children:u(e.latest_delta)})}),(0,s.jsx)("td",{children:o(e.latest_delta_pct)}),(0,s.jsx)("td",{children:p({label:e.source_id,url:e.source_url})})]},e.indicator_series_id)}),!C.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"sub",colSpan:8,children:"No hay series que cumplan el filtro actual."})})]})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsxs)("div",{className:"blockHead",children:[(0,s.jsx)("h2",{children:"2) Eventos vinculados (descriptivo)"}),(0,s.jsx)("p",{className:"sub",children:'"Evento → indicador": compara el último punto previo y el siguiente punto posterior al evento.'})]}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Evento"}),(0,s.jsx)("th",{children:"Indicador"}),(0,s.jsx)("th",{children:"Delta previo/posterior"}),(0,s.jsx)("th",{children:"Cambio relativo"}),(0,s.jsx)("th",{children:"Distancia temporal"}),(0,s.jsx)("th",{children:"Fuente evento"})]})}),(0,s.jsxs)("tbody",{children:[E.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:d(e.policy_event_date)})}),(0,s.jsx)("div",{className:"tileNote",children:e.policy_event_title||e.policy_event_id}),(0,s.jsx)("div",{className:"tileNote",children:e.policy_event_domain_label||e.policy_event_domain_key||"—"})]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{children:e.indicator_series_label||e.indicator_series_canonical_key}),(0,s.jsx)("div",{className:"tileNote",children:e.indicator_unit?`Unidad: ${e.indicator_unit}`:"—"})]}),(0,s.jsxs)("td",{children:[(0,s.jsxs)("div",{children:[d(e.pre_point_date),": ",c(e.pre_value)]}),(0,s.jsxs)("div",{children:[d(e.post_point_date),": ",c(e.post_value)]}),(0,s.jsxs)("div",{children:["Cambio:",(0,s.jsx)("span",{className:`pill ${h(e.delta)}`,style:{marginLeft:"6px"},children:u(e.delta)})]})]}),(0,s.jsx)("td",{children:o(e.delta_pct)}),(0,s.jsxs)("td",{children:[(0,s.jsxs)("div",{children:["Antes: ",r(e.pre_gap_days)," días"]}),(0,s.jsxs)("div",{children:["Después: ",r(e.post_gap_days)," días"]})]}),(0,s.jsx)("td",{children:p({label:e.policy_event_source_id,url:e.policy_event_source_url})})]},`${e.policy_event_id}-${e.indicator_series_id}-${e.pre_point_date}`)),!E.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"sub",colSpan:6,children:"No hay asociaciones descriptivas para los filtros seleccionados."})})]})]})})]}),(0,s.jsxs)("section",{className:"card block",children:[(0,s.jsx)("div",{className:"blockHead",children:(0,s.jsx)("h2",{children:"3) Eventos de política más recientes"})}),(0,s.jsx)("div",{className:"tableWrap",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Evento"}),(0,s.jsx)("th",{children:"Resumen"}),(0,s.jsx)("th",{children:"Fuente"}),(0,s.jsx)("th",{children:"Territorio"}),(0,s.jsx)("th",{children:"Series asociadas"})]})}),(0,s.jsxs)("tbody",{children:[D.slice(0,120).map(e=>{let a;return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:d(e.event_date)})}),(0,s.jsx)("div",{className:"tileNote",children:e.policy_event_id}),(0,s.jsx)("div",{className:"tileNote",children:e.title?e.title:e.summary||"—"})]}),(0,s.jsx)("td",{className:"tileNote",children:e.summary||"—"}),(0,s.jsx)("td",{children:(a=String(e.source_url||"").trim())?(0,s.jsx)("a",{className:"tableButton",href:a,rel:"noopener noreferrer",target:"_blank",children:"Ver fuente"}):"—"}),(0,s.jsx)("td",{children:e.territory_label||e.institution_name||e.admin_level_label||"—"}),(0,s.jsx)("td",{children:r(e.associated_series_count||0)})]},e.policy_event_id)}),!D.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"sub",colSpan:5,children:"No hay eventos en el rango del snapshot."})})]})]})})]})]})}e.s(["default",()=>x])}]);