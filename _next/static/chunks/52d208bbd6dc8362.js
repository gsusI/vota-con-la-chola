(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87974,e=>{"use strict";var i=e.i(43476),s=e.i(71645);function t(e){let i=Number(e);return Number.isFinite(i)?i:0}function n(e){return null==e||Number.isNaN(Number(e))?"—":Number(e).toLocaleString("es-ES")}function a(e){return e?String(e):"—"}function l(e){let i=Number(e);return Number.isNaN(i)?"—":Number.isFinite(i)?String(Math.round(i)):"—"}function c(e){return null==e||Number.isNaN(e)?"—":`${Number(e).toFixed(2)}%`}function r(e){return"alta"===e?"pill-success":"media"===e?"pill-warning":"baja"===e?"pill-danger":"pill-muted"}function d(){let e=new URLSearchParams(window.location.search);return{initiativeId:String(e.get("initiative")||""),sort:String(e.get("sort")||"votes_desc"),source:String(e.get("source")||""),committee:String(e.get("committee")||""),legislature:String(e.get("legislature")||""),status:String(e.get("status")||""),confidence:String(e.get("confidence")||""),method:String(e.get("method")||""),q:String(e.get("q")||""),confidenceMode:String(e.get("confidenceMode")||"all")}}function o(){let{loading:e,error:o,data:h}=function(){let[e,i]=(0,s.useState)({loading:!0,error:null,data:null});return(0,s.useEffect)(()=>{let e=new AbortController;return i({loading:!0,error:null,data:null}),fetch("/vota-con-la-chola/initiative-lifecycle/data/lifecycle.json",{signal:e.signal}).then(e=>{if(!e.ok)throw Error(`Respuesta no v\xe1lida: ${e.status}`);return e.json()}).then(e=>i({loading:!1,error:null,data:e})).catch(e=>{"AbortError"!==e.name&&i({loading:!1,error:e.message||String(e),data:null})}),()=>e.abort()},[]),e}(),[u,m]=(0,s.useState)(d()),[x,j]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=d();m(e),j(e.initiativeId)},[]),(0,s.useEffect)(()=>{let e=new URLSearchParams;u.sort&&e.set("sort",u.sort),u.source&&e.set("source",u.source),u.committee&&e.set("committee",u.committee),u.legislature&&e.set("legislature",u.legislature),u.status&&e.set("status",u.status),u.confidence&&e.set("confidence",u.confidence),u.method&&e.set("method",u.method),u.q&&e.set("q",u.q),u.confidenceMode&&"all"!==u.confidenceMode&&e.set("confidenceMode",u.confidenceMode),x&&e.set("initiative",x);let i=e.toString(),s=`${window.location.pathname}${i?`?${i}`:""}`;window.history.replaceState({},"",s)},[u.sort,u.source,u.committee,u.legislature,u.status,u.confidence,u.method,u.q,u.confidenceMode,x]);let _=h?.initiatives||[],v=h?.filters||{},p=h?.initiative_overview||{},f=(h?.bottlenecks||{}).committee_by_throughput||[],g=(0,s.useMemo)(()=>{let e=[...function(e,i){let s=String(i.q||"").trim().toLowerCase(),t=String(i.source||"").trim().toLowerCase(),n=String(i.committee||"").trim().toLowerCase(),a=String(i.legislature||"").trim().toLowerCase(),l=String(i.status||"").trim().toLowerCase(),c=String(i.confidence||"").trim().toLowerCase(),r=String(i.method||"").trim().toLowerCase(),d="uncertain"===i.confidenceMode,o=[];for(let i of e)if((!t||String(i.source_id||"").toLowerCase()===t)&&(!n||String(i.competent_committee||"").toLowerCase()===n)&&(!a||String(i.legislature||"").toLowerCase()===a)&&(!l||String(i.current_status||"").toLowerCase()===l)&&(!c||String(i.link_summary?.link_confidence_bucket||"").toLowerCase()===c)&&(!r||String(i.link_summary?.dominant_method||"").toLowerCase()===r)){if(d&&!(Number(i.link_summary?.low_confidence_ratio||0)>.15)||s&&![i.initiative_id,i.expediente,i.title,i.author_text,i.competent_committee,i.current_status].map(e=>String(e||"").toLowerCase()).join(" ").includes(s))continue;o.push(i)}return o}(_,u)],i=u.sort||"votes_desc";return e.sort((e,s)=>{let n=e||{},a=s||{};return"first_vote_asc"===i?String(n.first_vote_date||"").localeCompare(String(a.first_vote_date||"")):"first_vote_desc"===i?String(a.first_vote_date||"").localeCompare(String(n.first_vote_date||"")):"status_delay_desc"===i?t(a.timeline_days?.presented_to_status_days)-t(n.timeline_days?.presented_to_status_days):"status_delay_asc"===i?t(n.timeline_days?.presented_to_status_days)-t(a.timeline_days?.presented_to_status_days):"confidence_desc"===i?t(a.link_summary?.low_confidence_links||0)-t(n.link_summary?.low_confidence_links||0):t(a.vote_count||0)-t(n.vote_count||0)}),e},[_,u.sort,u.source,u.committee,u.legislature,u.status,u.confidence,u.method,u.confidenceMode,u.q]),N=(0,s.useMemo)(()=>{if(x){let e=_.find(e=>e.initiative_id===x);if(e)return e}return g[0]||null},[_,g,x]);(0,s.useEffect)(()=>{N?N.initiative_id!==x&&j(N.initiative_id):j("")},[N,x]);let b=(e,i)=>m(s=>({...s,[e]:String(i||"")}));return e?(0,i.jsx)("main",{className:"shell",children:(0,i.jsx)("section",{className:"card block",children:(0,i.jsx)("h1",{children:"Cargando ciclo de vida de iniciativas…"})})}):o?(0,i.jsx)("main",{className:"shell",children:(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("h1",{children:"No se pudo cargar el snapshot"}),(0,i.jsx)("p",{className:"sub",children:o})]})}):h?(0,i.jsxs)("main",{className:"shell",children:[(0,i.jsxs)("section",{className:"hero card",children:[(0,i.jsx)("p",{className:"eyebrow",children:"Iniciativas"}),(0,i.jsx)("h1",{children:"Lifecycle + Throughput legislativo"}),(0,i.jsx)("p",{className:"sub",children:"Analiza tiempo de tramitación por iniciativa, cuellos de botella por comisión y la secuencia de votos con transparencia de confianza en el enlace iniciativa-votación."})]}),(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("div",{className:"blockHead",children:(0,i.jsx)("h2",{children:"Resumen rápido"})}),(0,i.jsxs)("div",{className:"kpiGrid",children:[(0,i.jsxs)("div",{className:"kpiCard",children:[(0,i.jsx)("span",{className:"kpiLabel",children:"Iniciativas expuestas"}),(0,i.jsx)("span",{className:"kpiValue",children:n(h.meta.total_initiatives)})]}),(0,i.jsxs)("div",{className:"kpiCard",children:[(0,i.jsx)("span",{className:"kpiLabel",children:"Con votación vinculada"}),(0,i.jsx)("span",{className:"kpiValue",children:n(p.linked_initiatives||0)})]}),(0,i.jsxs)("div",{className:"kpiCard",children:[(0,i.jsx)("span",{className:"kpiLabel",children:"Sin enlace de voto"}),(0,i.jsx)("span",{className:"kpiValue",children:n(p.unlinked_initiatives||0)})]}),(0,i.jsxs)("div",{className:"kpiCard",children:[(0,i.jsx)("span",{className:"kpiLabel",children:"Total enlaces votos"}),(0,i.jsx)("span",{className:"kpiValue",children:n(h.meta.total_vote_links)})]}),(0,i.jsxs)("div",{className:"kpiCard",children:[(0,i.jsx)("span",{className:"kpiLabel",children:"Confianza alta / media / baja"}),(0,i.jsxs)("span",{className:"kpiValue",children:[t(p.confidence_distribution?.high||0)," / ",t(p.confidence_distribution?.medium||0)," /"," ",t(p.confidence_distribution?.low||0)]}),(0,i.jsxs)("span",{className:"tileNote",children:["sin enlace: ",t(p.confidence_distribution?.none||0)]})]})]})]}),(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("div",{className:"blockHead",children:(0,i.jsx)("h2",{children:"Cuellos de botella por comité"})}),(0,i.jsx)("div",{className:"tableWrap",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Comité"}),(0,i.jsx)("th",{children:"Iniciativas"}),(0,i.jsx)("th",{children:"Sin voto"}),(0,i.jsx)("th",{children:"Median días (presentado→1ª votación)"}),(0,i.jsx)("th",{children:"Median días (presentado→estado)"}),(0,i.jsx)("th",{children:"Confiabilidad muestra"})]})}),(0,i.jsx)("tbody",{children:0===f.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:6,children:"Sin datos de comité suficiente para este snapshot."})}):f.slice(0,12).map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.committee}),(0,i.jsx)("td",{children:n(e.initiatives_total)}),(0,i.jsxs)("td",{children:[n(e.no_vote_initiatives)," (",c(e.no_vote_pct),")"]}),(0,i.jsx)("td",{children:l(e.stages?.presented_to_first_vote_days?.median)}),(0,i.jsx)("td",{children:l(e.stages?.presented_to_status_days?.median)}),(0,i.jsx)("td",{children:n(e.reliability?.sampled_initiatives)})]},e.committee))})]})})]}),(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("div",{className:"blockHead",children:(0,i.jsx)("h2",{children:"Filtros y timeline"})}),(0,i.jsxs)("div",{className:"filterGrid",children:[(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Buscar"}),(0,i.jsx)("input",{className:"textInput",value:u.q,onChange:e=>b("q",e.target.value),placeholder:"Expediente, título, autor, comité..."})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Origen"}),(0,i.jsxs)("select",{className:"textInput",value:u.source,onChange:e=>b("source",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todos"}),(v.source_ids||[]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Comité"}),(0,i.jsxs)("select",{className:"textInput",value:u.committee,onChange:e=>b("committee",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todos"}),(v.committees||[]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Legislatura"}),(0,i.jsxs)("select",{className:"textInput",value:u.legislature,onChange:e=>b("legislature",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todas"}),(v.legislatures||[]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Estado actual"}),(0,i.jsxs)("select",{className:"textInput",value:u.status,onChange:e=>b("status",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todos"}),(v.status_buckets||[]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Confianza del enlace"}),(0,i.jsxs)("select",{className:"textInput",value:u.confidence,onChange:e=>b("confidence",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todas"}),(0,i.jsx)("option",{value:"alta",children:"Alta"}),(0,i.jsx)("option",{value:"media",children:"Media"}),(0,i.jsx)("option",{value:"baja",children:"Baja"}),(0,i.jsx)("option",{value:"sin_enlace",children:"Sin enlace"})]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Método dominante"}),(0,i.jsxs)("select",{className:"textInput",value:u.method,onChange:e=>b("method",e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Todos"}),(v.link_methods||[]).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Orden"}),(0,i.jsxs)("select",{className:"textInput",value:u.sort,onChange:e=>b("sort",e.target.value),children:[(0,i.jsx)("option",{value:"votes_desc",children:"Más votos"}),(0,i.jsx)("option",{value:"first_vote_desc",children:"1ª votación (más reciente)"}),(0,i.jsx)("option",{value:"first_vote_asc",children:"1ª votación (más antigua)"}),(0,i.jsx)("option",{value:"status_delay_desc",children:"Tiempo a estado (lento primero)"}),(0,i.jsx)("option",{value:"status_delay_asc",children:"Tiempo a estado (rápido primero)"}),(0,i.jsx)("option",{value:"confidence_desc",children:"Más vínculos inciertos"})]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{children:"Enlace incierto"}),(0,i.jsxs)("select",{className:"textInput",value:u.confidenceMode,onChange:e=>b("confidenceMode",e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"Cualquier iniciativa"}),(0,i.jsx)("option",{value:"uncertain",children:"≥ 15% baja confianza"})]})]})]})]}),(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("div",{className:"blockHead",children:(0,i.jsx)("h2",{children:"Timeline de iniciativas"})}),(0,i.jsx)("div",{className:"tableWrap",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Iniciativa"}),(0,i.jsx)("th",{children:"Comité / órgano"}),(0,i.jsx)("th",{children:"Votos vinculados"}),(0,i.jsx)("th",{children:"1ª votación"}),(0,i.jsx)("th",{children:"Días (presentado→1ª)"}),(0,i.jsx)("th",{children:"Estado"}),(0,i.jsx)("th",{children:"Confianza del vínculo"})]})}),(0,i.jsx)("tbody",{children:0===g.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:7,children:"No hay iniciativas con los filtros actuales."})}):g.slice(0,240).map(e=>(0,i.jsxs)("tr",{className:x===e.initiative_id?"rowSelected":"",children:[(0,i.jsx)("td",{children:(0,i.jsxs)("button",{className:"tableButton",onClick:()=>j(e.initiative_id),type:"button",children:[(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:e.expediente||e.initiative_id})}),(0,i.jsxs)("div",{className:"tileNote",children:[e.title||"Sin título"," (",n(e.vote_count)," votos)"]})]})}),(0,i.jsx)("td",{children:e.competent_committee||"—"}),(0,i.jsxs)("td",{children:[n(e.vote_count)," "]}),(0,i.jsx)("td",{children:a(e.first_vote_date)}),(0,i.jsx)("td",{children:l(e.timeline_days?.presented_to_first_vote_days)}),(0,i.jsxs)("td",{children:[a(e.current_status)," "]}),(0,i.jsxs)("td",{children:[(0,i.jsx)("span",{className:`pill ${r(e.link_summary?.link_confidence_bucket)}`,children:e.link_summary?.link_confidence_bucket||"sin enlace"}),(0,i.jsxs)("span",{className:"tileNote",children:["links: ",n(e.link_summary?.low_confidence_links||0)," · ratio: ",c(100*(e.link_summary?.low_confidence_ratio||0))]})]})]},e.initiative_id))})]})})]}),(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("div",{className:"blockHead",children:(0,i.jsx)("h2",{children:"Votaciones alrededor de la iniciativa"})}),N?(0,i.jsxs)("div",{className:"twoCols",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"tileNote",children:["Iniciativa: ",N.initiative_id]}),(0,i.jsxs)("p",{className:"sub",children:[N.title||"Sin título"," · ",N.author_text||"Sin autor"]}),(0,i.jsxs)("p",{className:"tileNote",children:["Estado: ",N.current_status||"—"," · Confianza enlace dominante: ",N.link_summary?.link_confidence_bucket||"—","· Votos vinculados: ",n(N.vote_count),N.vote_truncated?` (corte: ${n(N.vote_truncated_count)})`:""]}),(0,i.jsxs)("p",{className:"tileNote",children:["Tiempos clave (días): registrado→calificado ",l(N.timeline_days?.presented_to_qualified_days)," · registrado→1ª votación ",l(N.timeline_days?.presented_to_first_vote_days)," · 1ª→última votación ",l(N.timeline_days?.first_to_last_vote_days)," · registrado→estado ",l(N.timeline_days?.presented_to_status_days)]})]}),(0,i.jsxs)("div",{className:"tile",children:[(0,i.jsx)("strong",{children:"Métodos de vínculo"}),(0,i.jsxs)("ul",{className:"artifactList",children:[0===Object.entries(N.link_summary||{}).length?(0,i.jsx)("li",{children:(0,i.jsx)("span",{children:"Sin evidencia de vínculo"})}):(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"Método dominante"}),(0,i.jsx)("span",{children:N.link_summary?.dominant_method||"—"})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"Confianza promedio"}),(0,i.jsx)("span",{children:c(100*(N.link_summary?.link_confidence_avg||0))})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"Baja confianza"}),(0,i.jsx)("span",{children:c(100*(N.link_summary?.low_confidence_ratio||0))})]})]})]})]}):null,N?(0,i.jsx)("div",{className:"tableWrap",children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Fecha"}),(0,i.jsx)("th",{children:"Evento"}),(0,i.jsx)("th",{children:"Contexto"}),(0,i.jsx)("th",{children:"Resultado"}),(0,i.jsx)("th",{children:"Margen"}),(0,i.jsx)("th",{children:"Método de enlace"}),(0,i.jsx)("th",{children:"Confianza"}),(0,i.jsx)("th",{children:"Fuente"})]})}),(0,i.jsx)("tbody",{children:(N.votes||[]).map(e=>{var s;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:a(e.vote_date)}),(0,i.jsxs)("td",{children:[(0,i.jsx)("div",{children:e.vote_title||"—"}),(0,i.jsx)("div",{className:"tileNote",children:e.subgroup_title||e.subgroup_text||e.expediente_text||""})]}),(0,i.jsx)("td",{children:e.context||"otro"}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:`pill ${"aprobada"===(s=e.outcome)?"pill-success":"rechazada"===s?"pill-danger":"empate"===s?"pill-warning":"pill-muted"}`,children:e.outcome})}),(0,i.jsx)("td",{children:e.outcome_margin}),(0,i.jsx)("td",{children:e.link_method||"sin método"}),(0,i.jsx)("td",{children:(0,i.jsxs)("span",{className:`pill ${r(e.link_confidence_band)}`,children:[null===e.link_confidence||void 0===e.link_confidence?"—":`${(100*e.link_confidence).toFixed(2)}%`," ",e.link_confidence_band]})}),(0,i.jsx)("td",{children:e.source_url?(0,i.jsx)("a",{className:"tableButton",href:e.source_url,target:"_blank",rel:"noreferrer",children:"Ver evidencia"}):"—"})]},e.vote_event_id)})})]})}):(0,i.jsx)("p",{className:"sub",children:"Selecciona una iniciativa para ver su ruta de votaciones."})]})]}):(0,i.jsx)("main",{className:"shell",children:(0,i.jsxs)("section",{className:"card block",children:[(0,i.jsx)("h1",{children:"Sin datos"}),(0,i.jsx)("p",{className:"sub",children:"No se encontraron métricas de iniciativas para esta publicación."})]})})}e.s(["default",()=>o])}]);