db_path := env_var_or_default("DB_PATH", "etl/data/staging/politicos-es.db")
snapshot_date := env_var_or_default("SNAPSHOT_DATE", "2026-02-12")
tracker_path := env_var_or_default("TRACKER_PATH", "docs/etl/e2e-scrape-load-tracker.md")
tracker_waivers_path := env_var_or_default("TRACKER_WAIVERS_PATH", "docs/etl/mismatch-waivers.json")
municipal_timeout := env_var_or_default("MUNICIPAL_TIMEOUT", "240")
galicia_manual_dir := env_var_or_default("GALICIA_MANUAL_DIR", "etl/data/raw/manual/galicia_deputado_profiles_20260212T141929Z/pages")
navarra_manual_dir := env_var_or_default("NAVARRA_MANUAL_DIR", "etl/data/raw/manual/navarra_persona_profiles_20260212T144911Z/pages")
infoelectoral_timeout := env_var_or_default("INFOELECTORAL_TIMEOUT", "30")
senado_detail_workers := env_var_or_default("SENADO_DETAIL_WORKERS", "16")
senado_detail_timeout := env_var_or_default("SENADO_DETAIL_TIMEOUT", "8")
senado_detail_max_events := env_var_or_default("SENADO_DETAIL_MAX_EVENTS", "30")
senado_detail_max_loops := env_var_or_default("SENADO_DETAIL_MAX_LOOPS", "1")
senado_detail_legislatures := env_var_or_default("SENADO_DETAIL_LEGISLATURES", "14")
senado_detail_dir := env_var_or_default("SENADO_DETAIL_DIR", "")
senado_manual_detail_dir := env_var_or_default("SENADO_MANUAL_DETAIL_DIR", "etl/data/raw/manual/senado_votaciones_ses")
senado_missing_detail_urls_file := env_var_or_default("SENADO_MISSING_DETAIL_URLS_FILE", "etl/data/raw/manual/senado_votaciones_ses/missing_detail_urls.txt")
senado_manual_download_timeout := env_var_or_default("SENADO_MANUAL_DOWNLOAD_TIMEOUT", "30")
senado_headful_channel := env_var_or_default("SENADO_HEADFUL_CHANNEL", "chrome")
senado_headful_timeout := env_var_or_default("SENADO_HEADFUL_TIMEOUT", "30")
senado_headful_user_data_dir := env_var_or_default("SENADO_HEADFUL_USER_DATA_DIR", "etl/data/raw/manual/senado_votaciones_ses/.headful-profile")
senado_headful_viewport := env_var_or_default("SENADO_HEADFUL_VIEWPORT", "1280x800")
senado_headful_wait_seconds := env_var_or_default("SENADO_HEADFUL_WAIT_SECONDS", "90")
senado_tail_cookie_file := env_var_or_default("SENADO_TAIL_COOKIE_FILE", "etl/data/raw/manual/senado_iniciativas_cookie_seed_refresh_20260218T201301Z.cookies.json")
senado_tail_burst_limit := env_var_or_default("SENADO_TAIL_BURST_LIMIT", "120")
senado_tail_wide_limit := env_var_or_default("SENADO_TAIL_WIDE_LIMIT", "4000")
senado_tail_timeout := env_var_or_default("SENADO_TAIL_TIMEOUT", "10")
senado_tail_cooldown := env_var_or_default("SENADO_TAIL_COOLDOWN", "60")
senado_tail_active_sleep := env_var_or_default("SENADO_TAIL_ACTIVE_SLEEP", "10")
senado_tail_max_idle_rounds := env_var_or_default("SENADO_TAIL_MAX_IDLE_ROUNDS", "6")
senado_tail_max_rounds := env_var_or_default("SENADO_TAIL_MAX_ROUNDS", "0")
senado_tail_stop_on_uniform_404 := env_var_or_default("SENADO_TAIL_STOP_ON_UNIFORM_404", "1")
senado_tail_archive_fallback := env_var_or_default("SENADO_TAIL_ARCHIVE_FALLBACK", "1")
senado_tail_archive_timeout := env_var_or_default("SENADO_TAIL_ARCHIVE_TIMEOUT", "12")
explorer_host := env_var_or_default("EXPLORER_HOST", "127.0.0.1")
explorer_port := env_var_or_default("EXPLORER_PORT", "9010")
gh_pages_dir := env_var_or_default("GH_PAGES_DIR", "docs/gh-pages")
gh_pages_remote := env_var_or_default("GH_PAGES_REMOTE", "origin")
gh_pages_branch := env_var_or_default("GH_PAGES_BRANCH", "gh-pages")
gh_pages_tmp_branch := env_var_or_default("GH_PAGES_TMP_BRANCH", "gh-pages-tmp")
topic_taxonomy_seed := env_var_or_default("TOPIC_TAXONOMY_SEED", "etl/data/seeds/topic_taxonomy_es.json")
textdoc_limit := env_var_or_default("TEXTDOC_LIMIT", "900")
textdoc_timeout := env_var_or_default("TEXTDOC_TIMEOUT", "25")
initdoc_limit := env_var_or_default("INITDOC_LIMIT", "200")
initdoc_max_per := env_var_or_default("INITDOC_MAX_PER", "3")
initdoc_timeout := env_var_or_default("INITDOC_TIMEOUT", "25")
initdoc_archive_timeout := env_var_or_default("INITDOC_ARCHIVE_TIMEOUT", "12")
initdoc_excerpt_scope := env_var_or_default("INITDOC_EXCERPT_SCOPE", "senado_iniciativas")
initdoc_fetch_scope := env_var_or_default("INITDOC_FETCH_SCOPE", "")
initdoc_status_out := env_var_or_default("INITDOC_STATUS_OUT", "docs/etl/sprints/AI-OPS-27/evidence/initiative_doc_status_latest.json")
initdoc_status_missing_sample_limit := env_var_or_default("INITDOC_STATUS_MISSING_SAMPLE_LIMIT", "20")
initdoc_missing_export_source_ids := env_var_or_default("INITDOC_MISSING_EXPORT_SOURCE_IDS", "senado_iniciativas")
initdoc_missing_export_out := env_var_or_default("INITDOC_MISSING_EXPORT_OUT", "docs/etl/sprints/AI-OPS-61/exports/senado_tail_actionable_latest.csv")
initdoc_actionable_contract_source_ids := env_var_or_default("INITDOC_ACTIONABLE_CONTRACT_SOURCE_IDS", "senado_iniciativas")
initdoc_actionable_contract_out := env_var_or_default("INITDOC_ACTIONABLE_CONTRACT_OUT", "docs/etl/sprints/AI-OPS-63/evidence/initdoc_actionable_tail_contract_latest.json")
initdoc_actionable_digest_out := env_var_or_default("INITDOC_ACTIONABLE_DIGEST_OUT", "docs/etl/sprints/AI-OPS-64/evidence/initdoc_actionable_tail_digest_latest.json")
initdoc_actionable_digest_max_missing := env_var_or_default("INITDOC_ACTIONABLE_DIGEST_MAX_MISSING", "0")
initdoc_actionable_digest_max_missing_pct := env_var_or_default("INITDOC_ACTIONABLE_DIGEST_MAX_MISSING_PCT", "0")
initdoc_actionable_heartbeat_path := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_PATH", "docs/etl/runs/initdoc_actionable_tail_digest_heartbeat.jsonl")
initdoc_actionable_heartbeat_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-66/evidence/initdoc_actionable_tail_digest_heartbeat_latest.json")
initdoc_actionable_heartbeat_window_last := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_LAST", "20")
initdoc_actionable_heartbeat_window_max_failed := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_MAX_FAILED", "0")
initdoc_actionable_heartbeat_window_max_failed_rate_pct := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
initdoc_actionable_heartbeat_window_max_degraded := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
initdoc_actionable_heartbeat_window_max_degraded_rate_pct := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
initdoc_actionable_heartbeat_window_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-66/evidence/initdoc_actionable_tail_digest_heartbeat_window_latest.json")
initdoc_actionable_heartbeat_compact_path := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/initdoc_actionable_tail_digest_heartbeat.compacted.jsonl")
initdoc_actionable_heartbeat_compact_recent := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_RECENT", "20")
initdoc_actionable_heartbeat_compact_mid_span := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_MID_SPAN", "100")
initdoc_actionable_heartbeat_compact_mid_every := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_MID_EVERY", "5")
initdoc_actionable_heartbeat_compact_old_every := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_OLD_EVERY", "20")
initdoc_actionable_heartbeat_compact_min_raw := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_MIN_RAW", "25")
initdoc_actionable_heartbeat_compact_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-67/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_latest.json")
initdoc_actionable_heartbeat_compact_window_last := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
initdoc_actionable_heartbeat_compact_window_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-67/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT", "docs/etl/sprints/AI-OPS-68/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_PATH", "docs/etl/runs/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat.jsonl")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-69/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_last := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_LAST", "20")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_FAILED", "0")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed_rate_pct := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded_rate_pct := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-69/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_window_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat.compacted.jsonl")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_recent := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_RECENT", "20")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_span := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_SPAN", "100")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_every := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_EVERY", "5")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_old_every := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OLD_EVERY", "20")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_min_raw := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MIN_RAW", "25")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-70/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_last := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-70/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window_latest.json")
initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out := env_var_or_default("INITDOC_ACTIONABLE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT", "docs/etl/sprints/AI-OPS-71/evidence/initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest_latest.json")
initdoc_extract_scope := env_var_or_default("INITDOC_EXTRACT_SCOPE", "congreso_iniciativas,senado_iniciativas")
initdoc_extract_limit := env_var_or_default("INITDOC_EXTRACT_LIMIT", "0")
initdoc_extract_out := env_var_or_default("INITDOC_EXTRACT_OUT", "docs/etl/sprints/AI-OPS-28/evidence/initdoc_extractions_latest.json")
initdoc_extract_review_limit := env_var_or_default("INITDOC_EXTRACT_REVIEW_LIMIT", "0")
initdoc_extract_review_out := env_var_or_default("INITDOC_EXTRACT_REVIEW_OUT", "docs/etl/sprints/AI-OPS-28/exports/initdoc_extraction_review_queue.csv")
initdoc_extract_review_apply_file := env_var_or_default("INITDOC_EXTRACT_REVIEW_APPLY_FILE", "")
initdoc_extract_review_apply_out := env_var_or_default("INITDOC_EXTRACT_REVIEW_APPLY_OUT", "docs/etl/sprints/AI-OPS-28/evidence/initdoc_extraction_review_apply_latest.json")
senado_detail_links_limit := env_var_or_default("SENADO_DETAIL_LINKS_LIMIT", "0")
doc_analysis_limit := env_var_or_default("DOC_ANALYSIS_LIMIT", "0")
doc_analysis_out := env_var_or_default("DOC_ANALYSIS_OUT", "docs/etl/sprints/AI-OPS-27/exports/senado_pdf_analysis_queue.csv")
text_extraction_queue_source_ids := env_var_or_default("TEXT_EXTRACTION_QUEUE_SOURCE_IDS", "parl_initiative_docs,congreso_intervenciones,programas_partidos")
text_extraction_queue_formats := env_var_or_default("TEXT_EXTRACTION_QUEUE_FORMATS", "pdf,html,xml")
text_extraction_queue_limit := env_var_or_default("TEXT_EXTRACTION_QUEUE_LIMIT", "0")
text_extraction_queue_out := env_var_or_default("TEXT_EXTRACTION_QUEUE_OUT", "docs/etl/sprints/AI-OPS-28/exports/text_extraction_queue.csv")
text_extraction_queue_summary_out := env_var_or_default("TEXT_EXTRACTION_QUEUE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-28/evidence/text_extraction_queue_summary.json")
declared_min_auto_confidence := env_var_or_default("DECLARED_MIN_AUTO_CONFIDENCE", "0.62")
declared_source_id := env_var_or_default("DECLARED_SOURCE_ID", "congreso_intervenciones")
declared_review_limit := env_var_or_default("DECLARED_REVIEW_LIMIT", "50")
declared_status_out := env_var_or_default("DECLARED_STATUS_OUT", "")
declared_quality_source_ids := env_var_or_default("DECLARED_QUALITY_SOURCE_IDS", "programas_partidos")
declared_quality_vote_source_ids := env_var_or_default("DECLARED_QUALITY_VOTE_SOURCE_IDS", "congreso_votaciones,senado_votaciones")
declared_quality_out := env_var_or_default("DECLARED_QUALITY_OUT", "")
declared_quality_skip_vote_gate := env_var_or_default("DECLARED_QUALITY_SKIP_VOTE_GATE", "1")
programas_manifest := env_var_or_default("PROGRAMAS_MANIFEST", "etl/data/raw/samples/programas_partidos_sample.csv")
programas_status_out := env_var_or_default("PROGRAMAS_STATUS_OUT", "docs/etl/sprints/AI-OPS-29/evidence/programas_status_latest.json")
programas_manifest_validate_out := env_var_or_default("PROGRAMAS_MANIFEST_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-30/evidence/programas_manifest_validate_latest.json")
programas_manifest_require_local_path := env_var_or_default("PROGRAMAS_MANIFEST_REQUIRE_LOCAL_PATH", "0")
sanction_norms_seed := env_var_or_default("SANCTION_NORMS_SEED", "etl/data/seeds/sanction_norms_seed_v1.json")
sanction_norms_seed_source_id := env_var_or_default("SANCTION_NORMS_SEED_SOURCE_ID", "boe_api_legal")
sanction_norms_seed_validate_out := env_var_or_default("SANCTION_NORMS_SEED_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-115/evidence/sanction_norms_seed_validate_latest.json")
sanction_norms_seed_import_out := env_var_or_default("SANCTION_NORMS_SEED_IMPORT_OUT", "docs/etl/sprints/AI-OPS-115/evidence/sanction_norms_seed_import_latest.json")
sanction_norms_seed_status_out := env_var_or_default("SANCTION_NORMS_SEED_STATUS_OUT", "docs/etl/sprints/AI-OPS-115/evidence/sanction_norms_seed_status_latest.json")
sanction_norms_seed_status_sample_limit := env_var_or_default("SANCTION_NORMS_SEED_STATUS_SAMPLE_LIMIT", "20")
sanction_norms_seed_source_record_upgrade_queue_out := env_var_or_default("SANCTION_NORMS_SEED_SOURCE_RECORD_UPGRADE_QUEUE_OUT", "docs/etl/sprints/AI-OPS-160/evidence/sanction_norms_seed_source_record_upgrade_queue_latest.json")
sanction_norms_seed_source_record_upgrade_queue_csv_out := env_var_or_default("SANCTION_NORMS_SEED_SOURCE_RECORD_UPGRADE_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-160/exports/sanction_norms_seed_source_record_upgrade_queue_latest.csv")
sanction_norms_seed_source_record_upgrade_queue_limit := env_var_or_default("SANCTION_NORMS_SEED_SOURCE_RECORD_UPGRADE_QUEUE_LIMIT", "0")
sanction_norms_seed_source_record_upgrade_queue_seed_schema_version := env_var_or_default("SANCTION_NORMS_SEED_SOURCE_RECORD_UPGRADE_QUEUE_SEED_SCHEMA_VERSION", "sanction_norms_seed_v1")
sanction_norms_boe_backfill_out := env_var_or_default("SANCTION_NORMS_BOE_BACKFILL_OUT", "docs/etl/sprints/AI-OPS-161/evidence/sanction_norms_boe_backfill_latest.json")
sanction_norms_boe_backfill_timeout := env_var_or_default("SANCTION_NORMS_BOE_BACKFILL_TIMEOUT", "30")
sanction_norms_boe_backfill_limit := env_var_or_default("SANCTION_NORMS_BOE_BACKFILL_LIMIT", "0")
sanction_norms_source_record_upgrade_apply_out := env_var_or_default("SANCTION_NORMS_SOURCE_RECORD_UPGRADE_APPLY_OUT", "docs/etl/sprints/AI-OPS-161/evidence/sanction_norms_source_record_upgrade_apply_latest.json")
sanction_norms_source_record_upgrade_apply_limit := env_var_or_default("SANCTION_NORMS_SOURCE_RECORD_UPGRADE_APPLY_LIMIT", "0")
sanction_norms_source_record_upgrade_apply_dry_run := env_var_or_default("SANCTION_NORMS_SOURCE_RECORD_UPGRADE_APPLY_DRY_RUN", "0")
sanction_norms_parliamentary_evidence_out := env_var_or_default("SANCTION_NORMS_PARLIAMENTARY_EVIDENCE_OUT", "docs/etl/sprints/AI-OPS-162/evidence/sanction_norms_parliamentary_evidence_backfill_latest.json")
sanction_norms_parliamentary_evidence_roles := env_var_or_default("SANCTION_NORMS_PARLIAMENTARY_EVIDENCE_ROLES", "approve,propose")
sanction_norms_parliamentary_evidence_limit := env_var_or_default("SANCTION_NORMS_PARLIAMENTARY_EVIDENCE_LIMIT", "0")
sanction_norms_vote_evidence_out := env_var_or_default("SANCTION_NORMS_VOTE_EVIDENCE_OUT", "docs/etl/sprints/AI-OPS-163/evidence/sanction_norms_vote_evidence_backfill_latest.json")
sanction_norms_vote_evidence_roles := env_var_or_default("SANCTION_NORMS_VOTE_EVIDENCE_ROLES", "approve,propose")
sanction_norms_vote_evidence_limit_events := env_var_or_default("SANCTION_NORMS_VOTE_EVIDENCE_LIMIT_EVENTS", "0")
sanction_norms_vote_gap_diagnosis_out := env_var_or_default("SANCTION_NORMS_VOTE_GAP_DIAGNOSIS_OUT", "docs/etl/sprints/AI-OPS-172/evidence/sanction_norms_vote_gap_diagnosis_latest.json")
sanction_norms_vote_gap_diagnosis_roles := env_var_or_default("SANCTION_NORMS_VOTE_GAP_DIAGNOSIS_ROLES", "approve,propose,enforce,delegate")
sanction_norms_execution_evidence_out := env_var_or_default("SANCTION_NORMS_EXECUTION_EVIDENCE_OUT", "docs/etl/sprints/AI-OPS-165/evidence/sanction_norms_execution_evidence_backfill_latest.json")
sanction_norms_execution_evidence_roles := env_var_or_default("SANCTION_NORMS_EXECUTION_EVIDENCE_ROLES", "enforce,approve,propose,delegate")
sanction_norms_execution_evidence_limit := env_var_or_default("SANCTION_NORMS_EXECUTION_EVIDENCE_LIMIT", "0")
sanction_norms_execution_lineage_evidence_out := env_var_or_default("SANCTION_NORMS_EXECUTION_LINEAGE_EVIDENCE_OUT", "docs/etl/sprints/AI-OPS-166/evidence/sanction_norms_execution_lineage_evidence_backfill_latest.json")
sanction_norms_execution_lineage_evidence_roles := env_var_or_default("SANCTION_NORMS_EXECUTION_LINEAGE_EVIDENCE_ROLES", "delegate")
sanction_norms_execution_lineage_evidence_limit := env_var_or_default("SANCTION_NORMS_EXECUTION_LINEAGE_EVIDENCE_LIMIT", "0")
sanction_norms_procedural_metric_evidence_out := env_var_or_default("SANCTION_NORMS_PROCEDURAL_METRIC_EVIDENCE_OUT", "docs/etl/sprints/AI-OPS-165/evidence/sanction_norms_procedural_metric_evidence_backfill_latest.json")
sanction_norms_procedural_metric_evidence_roles := env_var_or_default("SANCTION_NORMS_PROCEDURAL_METRIC_EVIDENCE_ROLES", "enforce,approve,propose,delegate")
sanction_norms_procedural_metric_evidence_limit := env_var_or_default("SANCTION_NORMS_PROCEDURAL_METRIC_EVIDENCE_LIMIT", "0")
sanction_data_catalog_seed := env_var_or_default("SANCTION_DATA_CATALOG_SEED", "etl/data/seeds/sanction_data_catalog_seed_v1.json")
sanction_data_catalog_source_id := env_var_or_default("SANCTION_DATA_CATALOG_SOURCE_ID", "boe_api_legal")
sanction_data_catalog_validate_out := env_var_or_default("SANCTION_DATA_CATALOG_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-116/evidence/sanction_data_catalog_validate_latest.json")
sanction_data_catalog_import_out := env_var_or_default("SANCTION_DATA_CATALOG_IMPORT_OUT", "docs/etl/sprints/AI-OPS-116/evidence/sanction_data_catalog_import_latest.json")
sanction_data_catalog_status_out := env_var_or_default("SANCTION_DATA_CATALOG_STATUS_OUT", "docs/etl/sprints/AI-OPS-116/evidence/sanction_data_catalog_status_latest.json")
sanction_data_catalog_status_sample_limit := env_var_or_default("SANCTION_DATA_CATALOG_STATUS_SAMPLE_LIMIT", "20")
sanction_procedural_official_review_status_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_STATUS_OUT", "docs/etl/sprints/AI-OPS-173/evidence/sanction_procedural_official_review_status_latest.json")
sanction_procedural_official_review_status_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_STATUS_CSV_OUT", "docs/etl/sprints/AI-OPS-173/exports/sanction_procedural_official_review_queue_latest.csv")
sanction_procedural_official_review_status_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_STATUS_QUEUE_LIMIT", "0")
sanction_procedural_official_review_status_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_STATUS_PERIOD_DATE", "")
sanction_procedural_official_review_status_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_STATUS_PERIOD_GRANULARITY", "")
sanction_procedural_official_review_kpi_gap_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_OUT", "docs/etl/sprints/AI-OPS-185/evidence/sanction_procedural_official_review_kpi_gap_queue_latest.json")
sanction_procedural_official_review_kpi_gap_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_CSV_OUT", "docs/etl/sprints/AI-OPS-185/exports/sanction_procedural_official_review_kpi_gap_queue_latest.csv")
sanction_procedural_official_review_kpi_gap_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_QUEUE_LIMIT", "0")
sanction_procedural_official_review_kpi_gap_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_PERIOD_DATE", "")
sanction_procedural_official_review_kpi_gap_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_PERIOD_GRANULARITY", "")
sanction_procedural_official_review_kpi_gap_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_INCLUDE_READY", "0")
sanction_procedural_official_review_kpi_gap_strict_empty := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_KPI_GAP_STRICT_EMPTY", "0")
sanction_procedural_official_review_apply_from_gap_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_OUT", "docs/etl/sprints/AI-OPS-186/exports/sanction_procedural_official_review_apply_from_gap_queue_latest.csv")
sanction_procedural_official_review_apply_from_gap_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-186/evidence/sanction_procedural_official_review_apply_from_gap_queue_latest.json")
sanction_procedural_official_review_apply_from_gap_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_QUEUE_LIMIT", "0")
sanction_procedural_official_review_apply_from_gap_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_PERIOD_DATE", "")
sanction_procedural_official_review_apply_from_gap_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_PERIOD_GRANULARITY", "")
sanction_procedural_official_review_apply_from_gap_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_STATUSES", "missing_metric,missing_source_record,missing_evidence")
sanction_procedural_official_review_apply_from_gap_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_apply_from_gap_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_INCLUDE_READY", "0")
sanction_procedural_official_review_apply_from_gap_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_FROM_GAP_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_raw_packets_out_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_OUT_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_raw_packets_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-188/evidence/sanction_procedural_official_review_raw_packets_latest.json")
sanction_procedural_official_review_raw_packets_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_STATUSES", "missing_metric")
sanction_procedural_official_review_raw_packets_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_raw_packets_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_raw_packets_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_QUEUE_LIMIT", "0")
sanction_procedural_official_review_raw_packets_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_INCLUDE_READY", "0")
sanction_procedural_official_review_raw_packets_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_raw_packets_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_raw_packets_progress_packets_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_PACKETS_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_raw_packets_progress_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_CSV_OUT", "docs/etl/sprints/AI-OPS-190/exports/sanction_procedural_official_review_raw_packets_progress_latest.csv")
sanction_procedural_official_review_raw_packets_progress_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_OUT", "docs/etl/sprints/AI-OPS-190/evidence/sanction_procedural_official_review_raw_packets_progress_latest.json")
sanction_procedural_official_review_raw_packets_progress_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_STATUSES", "missing_metric")
sanction_procedural_official_review_raw_packets_progress_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_raw_packets_progress_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_raw_packets_progress_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_QUEUE_LIMIT", "0")
sanction_procedural_official_review_raw_packets_progress_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_INCLUDE_READY", "0")
sanction_procedural_official_review_raw_packets_progress_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_raw_packets_progress_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_raw_packets_progress_strict_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_PROGRESS_STRICT_READY", "0")
sanction_procedural_official_review_packet_fix_queue_packets_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_PACKETS_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_packet_fix_queue_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-192/exports/sanction_procedural_official_review_packet_fix_queue_latest.csv")
sanction_procedural_official_review_packet_fix_queue_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_OUT", "docs/etl/sprints/AI-OPS-192/evidence/sanction_procedural_official_review_packet_fix_queue_latest.json")
sanction_procedural_official_review_packet_fix_queue_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_STATUSES", "missing_metric")
sanction_procedural_official_review_packet_fix_queue_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_packet_fix_queue_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_packet_fix_queue_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_QUEUE_LIMIT", "0")
sanction_procedural_official_review_packet_fix_queue_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_INCLUDE_READY", "0")
sanction_procedural_official_review_packet_fix_queue_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_packet_fix_queue_strict_empty := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_STRICT_EMPTY", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_packets_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_PACKETS_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_packet_fix_ready_cycle_fix_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_FIX_CSV_OUT", "docs/etl/sprints/AI-OPS-193/exports/sanction_procedural_official_review_packet_fix_queue_latest.csv")
sanction_procedural_official_review_packet_fix_ready_cycle_fix_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_FIX_OUT", "docs/etl/sprints/AI-OPS-193/evidence/sanction_procedural_official_review_packet_fix_ready_cycle_fix_queue_latest.json")
sanction_procedural_official_review_packet_fix_ready_cycle_raw_in_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_RAW_IN_OUT", "docs/etl/sprints/AI-OPS-193/exports/sanction_procedural_official_review_raw_from_packet_fix_ready_cycle_latest.csv")
sanction_procedural_official_review_packet_fix_ready_cycle_progress_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_PROGRESS_OUT", "docs/etl/sprints/AI-OPS-193/evidence/sanction_procedural_official_review_packet_fix_ready_cycle_progress_latest.json")
sanction_procedural_official_review_packet_fix_ready_cycle_ready_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_READY_CYCLE_OUT", "docs/etl/sprints/AI-OPS-193/evidence/sanction_procedural_official_review_packet_fix_ready_cycle_ready_cycle_latest.json")
sanction_procedural_official_review_packet_fix_ready_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_OUT", "docs/etl/sprints/AI-OPS-193/evidence/sanction_procedural_official_review_packet_fix_ready_cycle_latest.json")
sanction_procedural_official_review_packet_fix_ready_cycle_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STATUSES", "missing_metric")
sanction_procedural_official_review_packet_fix_ready_cycle_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_packet_fix_ready_cycle_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_packet_fix_ready_cycle_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_QUEUE_LIMIT", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_INCLUDE_READY", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_fix_empty := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_FIX_EMPTY", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_min_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_MIN_READY", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_min_ready_packets := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_MIN_READY_PACKETS", "1")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_RAW", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_prepare := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_PREPARE", "0")
sanction_procedural_official_review_packet_fix_ready_cycle_strict_readiness := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_READY_CYCLE_STRICT_READINESS", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_fix_queue_json := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_FIX_QUEUE_JSON", "docs/etl/sprints/AI-OPS-193/evidence/sanction_procedural_official_review_packet_fix_ready_cycle_fix_queue_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_path := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_PATH", "docs/etl/runs/sanction_procedural_official_review_packet_fix_queue_heartbeat.jsonl")
sanction_procedural_official_review_packet_fix_queue_heartbeat_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-194/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_failed := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_FAILED", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_failed_rate_pct := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_degraded := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_DEGRADED", "1000000")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_degraded_rate_pct := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "100")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_nonempty_queue_runs := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_NONEMPTY_QUEUE_RUNS", "1000000")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_nonempty_queue_rate_pct := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_NONEMPTY_QUEUE_RATE_PCT", "100")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_malformed := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_MAX_MALFORMED", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_window_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-194/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_window_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_path := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/sanction_procedural_official_review_packet_fix_queue_heartbeat.compacted.jsonl")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_recent := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_RECENT", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_mid_span := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_MID_SPAN", "100")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_mid_every := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_MID_EVERY", "5")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_old_every := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_OLD_EVERY", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_min_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_MIN_RAW", "25")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-195/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_last := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-195/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_in := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_IN", sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_out)
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT", "docs/etl/sprints/AI-OPS-196/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_digest_json := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_DIGEST_JSON", sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_out)
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_PATH", "docs/etl/runs/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat.jsonl")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-197/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_failed := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_FAILED", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_failed_rate_pct := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_degraded := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_degraded_rate_pct := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-197/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_window_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_path := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat.compacted.jsonl")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_recent := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_RECENT", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_mid_span := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_SPAN", "100")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_mid_every := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_EVERY", "5")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_old_every := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OLD_EVERY", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_min_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MIN_RAW", "25")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-198/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_last := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-198/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window_latest.json")
sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PACKET_FIX_QUEUE_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT", "docs/etl/sprints/AI-OPS-199/evidence/sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest_latest.json")
sanction_procedural_official_review_ready_packets_cycle_packets_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_PACKETS_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_ready_packets_cycle_raw_in_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_RAW_IN_OUT", "docs/etl/sprints/AI-OPS-191/exports/sanction_procedural_official_review_raw_from_ready_packets_latest.csv")
sanction_procedural_official_review_ready_packets_cycle_progress_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_PROGRESS_OUT", "docs/etl/sprints/AI-OPS-191/evidence/sanction_procedural_official_review_ready_packets_cycle_progress_latest.json")
sanction_procedural_official_review_ready_packets_cycle_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-191/evidence/sanction_procedural_official_review_ready_packets_cycle_cycle_latest.json")
sanction_procedural_official_review_ready_packets_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_OUT", "docs/etl/sprints/AI-OPS-191/evidence/sanction_procedural_official_review_ready_packets_cycle_latest.json")
sanction_procedural_official_review_ready_packets_cycle_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STATUSES", "missing_metric")
sanction_procedural_official_review_ready_packets_cycle_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_ready_packets_cycle_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_ready_packets_cycle_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_QUEUE_LIMIT", "0")
sanction_procedural_official_review_ready_packets_cycle_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_INCLUDE_READY", "0")
sanction_procedural_official_review_ready_packets_cycle_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_ready_packets_cycle_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_ready_packets_cycle_strict_min_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STRICT_MIN_READY", "0")
sanction_procedural_official_review_ready_packets_cycle_min_ready_packets := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_MIN_READY_PACKETS", "1")
sanction_procedural_official_review_ready_packets_cycle_strict_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STRICT_RAW", "0")
sanction_procedural_official_review_ready_packets_cycle_strict_prepare := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STRICT_PREPARE", "0")
sanction_procedural_official_review_ready_packets_cycle_strict_readiness := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READY_PACKETS_CYCLE_STRICT_READINESS", "0")
sanction_procedural_official_review_raw_packets_cycle_packets_dir := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_PACKETS_DIR", "docs/etl/sprints/AI-OPS-188/exports/sanction_procedural_official_review_raw_packets_latest")
sanction_procedural_official_review_raw_packets_cycle_raw_in_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_RAW_IN_OUT", "docs/etl/sprints/AI-OPS-189/exports/sanction_procedural_official_review_raw_from_packets_latest.csv")
sanction_procedural_official_review_raw_packets_cycle_packets_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_PACKETS_OUT", "docs/etl/sprints/AI-OPS-189/evidence/sanction_procedural_official_review_raw_packets_cycle_packets_latest.json")
sanction_procedural_official_review_raw_packets_cycle_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-189/evidence/sanction_procedural_official_review_raw_packets_cycle_cycle_latest.json")
sanction_procedural_official_review_raw_packets_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_OUT", "docs/etl/sprints/AI-OPS-189/evidence/sanction_procedural_official_review_raw_packets_cycle_latest.json")
sanction_procedural_official_review_raw_packets_cycle_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STATUSES", "missing_metric")
sanction_procedural_official_review_raw_packets_cycle_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_raw_packets_cycle_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_raw_packets_cycle_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_QUEUE_LIMIT", "0")
sanction_procedural_official_review_raw_packets_cycle_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_INCLUDE_READY", "0")
sanction_procedural_official_review_raw_packets_cycle_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_raw_packets_cycle_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_raw_packets_cycle_strict_packet_coverage := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STRICT_PACKET_COVERAGE", "0")
sanction_procedural_official_review_raw_packets_cycle_strict_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STRICT_RAW", "0")
sanction_procedural_official_review_raw_packets_cycle_strict_prepare := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STRICT_PREPARE", "0")
sanction_procedural_official_review_raw_packets_cycle_strict_readiness := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_PACKETS_CYCLE_STRICT_READINESS", "0")
sanction_procedural_official_review_gap_cycle_apply_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_APPLY_OUT", "docs/etl/sprints/AI-OPS-187/exports/sanction_procedural_official_review_apply_from_gap_cycle_latest.csv")
sanction_procedural_official_review_gap_cycle_gap_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_GAP_OUT", "docs/etl/sprints/AI-OPS-187/evidence/sanction_procedural_official_review_gap_cycle_gap_latest.json")
sanction_procedural_official_review_gap_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_OUT", "docs/etl/sprints/AI-OPS-187/evidence/sanction_procedural_official_review_gap_cycle_latest.json")
sanction_procedural_official_review_gap_cycle_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-187/evidence/sanction_procedural_official_review_gap_cycle_cycle_latest.json")
sanction_procedural_official_review_gap_cycle_statuses := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_STATUSES", "missing_source_record")
sanction_procedural_official_review_gap_cycle_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_PERIOD_DATE", "")
sanction_procedural_official_review_gap_cycle_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_PERIOD_GRANULARITY", "")
sanction_procedural_official_review_gap_cycle_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_QUEUE_LIMIT", "0")
sanction_procedural_official_review_gap_cycle_include_ready := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_INCLUDE_READY", "0")
sanction_procedural_official_review_gap_cycle_strict_actionable := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_GAP_CYCLE_STRICT_ACTIONABLE", "0")
sanction_procedural_official_review_apply_in := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_IN", "")
sanction_procedural_official_review_apply_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_apply_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_OUT", "docs/etl/sprints/AI-OPS-174/evidence/sanction_procedural_official_review_apply_latest.json")
sanction_procedural_official_review_template_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_template_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_template_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_template_only_missing := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_ONLY_MISSING", "1")
sanction_procedural_official_review_template_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_OUT", "docs/etl/sprints/AI-OPS-175/exports/sanction_procedural_official_review_apply_template_latest.csv")
sanction_procedural_official_review_template_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_TEMPLATE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-175/evidence/sanction_procedural_official_review_apply_template_latest.json")
sanction_procedural_official_review_raw_in := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_IN", "")
sanction_procedural_official_review_raw_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_OUT", "docs/etl/sprints/AI-OPS-181/exports/sanction_procedural_official_review_apply_from_raw_latest.csv")
sanction_procedural_official_review_raw_rejected_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_REJECTED_OUT", "docs/etl/sprints/AI-OPS-181/exports/sanction_procedural_official_review_apply_from_raw_rejected_latest.csv")
sanction_procedural_official_review_raw_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-181/evidence/sanction_procedural_official_review_apply_from_raw_latest.json")
sanction_procedural_official_review_raw_default_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_DEFAULT_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_raw_default_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_DEFAULT_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_raw_strict := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_STRICT", "0")
sanction_procedural_official_review_raw_template_period_date := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_PERIOD_DATE", snapshot_date)
sanction_procedural_official_review_raw_template_period_granularity := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_PERIOD_GRANULARITY", "year")
sanction_procedural_official_review_raw_template_source_id := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_SOURCE_ID", "boe_api_legal")
sanction_procedural_official_review_raw_template_only_missing := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_ONLY_MISSING", "1")
sanction_procedural_official_review_raw_template_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_OUT", "docs/etl/sprints/AI-OPS-183/exports/sanction_procedural_official_review_raw_template_latest.csv")
sanction_procedural_official_review_raw_template_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_TEMPLATE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-183/evidence/sanction_procedural_official_review_raw_template_latest.json")
sanction_procedural_official_review_raw_cycle_apply_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_APPLY_OUT", "docs/etl/sprints/AI-OPS-182/exports/sanction_procedural_official_review_apply_from_raw_cycle_latest.csv")
sanction_procedural_official_review_raw_cycle_raw_rejected_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_RAW_REJECTED_OUT", "docs/etl/sprints/AI-OPS-182/exports/sanction_procedural_official_review_apply_from_raw_cycle_rejected_latest.csv")
sanction_procedural_official_review_raw_cycle_raw_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_RAW_OUT", "docs/etl/sprints/AI-OPS-182/evidence/sanction_procedural_official_review_raw_cycle_raw_latest.json")
sanction_procedural_official_review_raw_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_OUT", "docs/etl/sprints/AI-OPS-182/evidence/sanction_procedural_official_review_raw_prepare_apply_cycle_latest.json")
sanction_procedural_official_review_raw_cycle_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-182/evidence/sanction_procedural_official_review_raw_prepare_apply_cycle_cycle_latest.json")
sanction_procedural_official_review_raw_cycle_strict_raw := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_CYCLE_STRICT_RAW", "1")
sanction_procedural_official_review_prepare_in := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_IN", sanction_procedural_official_review_template_out)
sanction_procedural_official_review_prepare_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_OUT", "docs/etl/sprints/AI-OPS-178/exports/sanction_procedural_official_review_apply_prepared_latest.csv")
sanction_procedural_official_review_prepare_rejected_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_REJECTED_OUT", "docs/etl/sprints/AI-OPS-178/exports/sanction_procedural_official_review_apply_rejected_latest.csv")
sanction_procedural_official_review_prepare_summary_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-178/evidence/sanction_procedural_official_review_apply_prepare_latest.json")
sanction_procedural_official_review_prepare_strict := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_STRICT", "0")
sanction_procedural_official_review_readiness_in := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_IN", sanction_procedural_official_review_template_out)
sanction_procedural_official_review_readiness_tolerance := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_TOLERANCE", "0.01")
sanction_procedural_official_review_readiness_queue_limit := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_QUEUE_LIMIT", "0")
sanction_procedural_official_review_readiness_csv_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_CSV_OUT", "docs/etl/sprints/AI-OPS-176/exports/sanction_procedural_official_review_apply_readiness_queue_latest.csv")
sanction_procedural_official_review_readiness_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_OUT", "docs/etl/sprints/AI-OPS-176/evidence/sanction_procedural_official_review_apply_readiness_latest.json")
sanction_procedural_official_review_readiness_strict := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_STRICT", "1")
sanction_procedural_official_review_apply_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_CYCLE_OUT", "docs/etl/sprints/AI-OPS-177/evidence/sanction_procedural_official_review_apply_cycle_latest.json")
sanction_procedural_official_review_apply_cycle_status_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_CYCLE_STATUS_OUT", "docs/etl/sprints/AI-OPS-177/evidence/sanction_procedural_official_review_apply_cycle_status_latest.json")
sanction_procedural_official_review_prepare_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-179/evidence/sanction_procedural_official_review_prepare_apply_cycle_latest.json")
sanction_procedural_official_review_prepare_cycle_cycle_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_CYCLE_CYCLE_OUT", "docs/etl/sprints/AI-OPS-179/evidence/sanction_procedural_official_review_prepare_apply_cycle_cycle_latest.json")
sanction_procedural_official_review_prepare_cycle_status_out := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_CYCLE_STATUS_OUT", "docs/etl/sprints/AI-OPS-179/evidence/sanction_procedural_official_review_prepare_apply_cycle_status_latest.json")
sanction_procedural_official_review_prepare_cycle_strict_prepare := env_var_or_default("SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_CYCLE_STRICT_PREPARE", "1")
sanction_volume_pilot_seed := env_var_or_default("SANCTION_VOLUME_PILOT_SEED", "etl/data/seeds/sanction_volume_pilot_seed_v1.json")
sanction_volume_pilot_source_id := env_var_or_default("SANCTION_VOLUME_PILOT_SOURCE_ID", "boe_api_legal")
sanction_volume_pilot_validate_out := env_var_or_default("SANCTION_VOLUME_PILOT_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-117/evidence/sanction_volume_pilot_validate_latest.json")
sanction_volume_pilot_import_out := env_var_or_default("SANCTION_VOLUME_PILOT_IMPORT_OUT", "docs/etl/sprints/AI-OPS-117/evidence/sanction_volume_pilot_import_latest.json")
sanction_volume_pilot_status_out := env_var_or_default("SANCTION_VOLUME_PILOT_STATUS_OUT", "docs/etl/sprints/AI-OPS-117/evidence/sanction_volume_pilot_status_latest.json")
sanction_volume_pilot_status_top_n := env_var_or_default("SANCTION_VOLUME_PILOT_STATUS_TOP_N", "10")
sanction_volume_pilot_status_dossier_limit := env_var_or_default("SANCTION_VOLUME_PILOT_STATUS_DOSSIER_LIMIT", "5")
sanction_volume_pilot_status_sample_limit := env_var_or_default("SANCTION_VOLUME_PILOT_STATUS_SAMPLE_LIMIT", "20")
liberty_restrictions_seed := env_var_or_default("LIBERTY_RESTRICTIONS_SEED", "etl/data/seeds/liberty_restrictions_seed_v1.json")
liberty_restrictions_source_id := env_var_or_default("LIBERTY_RESTRICTIONS_SOURCE_ID", "boe_api_legal")
liberty_restrictions_validate_out := env_var_or_default("LIBERTY_RESTRICTIONS_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-118/evidence/liberty_restrictions_validate_latest.json")
liberty_restrictions_import_out := env_var_or_default("LIBERTY_RESTRICTIONS_IMPORT_OUT", "docs/etl/sprints/AI-OPS-118/evidence/liberty_restrictions_import_latest.json")
liberty_restrictions_status_out := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_OUT", "docs/etl/sprints/AI-OPS-118/evidence/liberty_restrictions_status_latest.json")
liberty_restrictions_status_top_n := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_TOP_N", "20")
liberty_restrictions_norms_classified_min := env_var_or_default("LIBERTY_RESTRICTIONS_NORMS_CLASSIFIED_MIN", "0.8")
liberty_restrictions_fragments_irlc_min := env_var_or_default("LIBERTY_RESTRICTIONS_FRAGMENTS_IRLC_MIN", "0.6")
liberty_restrictions_fragments_accountability_min := env_var_or_default("LIBERTY_RESTRICTIONS_FRAGMENTS_ACCOUNTABILITY_MIN", "0.6")
liberty_restrictions_rights_with_data_min := env_var_or_default("LIBERTY_RESTRICTIONS_RIGHTS_WITH_DATA_MIN", "1.0")
liberty_restrictions_sources_with_assessments_min_pct := env_var_or_default("LIBERTY_RESTRICTIONS_SOURCES_WITH_ASSESSMENTS_MIN_PCT", "1.0")
liberty_restrictions_scopes_with_assessments_min_pct := env_var_or_default("LIBERTY_RESTRICTIONS_SCOPES_WITH_ASSESSMENTS_MIN_PCT", "1.0")
liberty_restrictions_min_assessment_sources := env_var_or_default("LIBERTY_RESTRICTIONS_MIN_ASSESSMENT_SOURCES", "1")
liberty_restrictions_min_assessment_scopes := env_var_or_default("LIBERTY_RESTRICTIONS_MIN_ASSESSMENT_SCOPES", "1")
liberty_restrictions_sources_with_dual_coverage_min_pct := env_var_or_default("LIBERTY_RESTRICTIONS_SOURCES_WITH_DUAL_COVERAGE_MIN_PCT", "1.0")
liberty_restrictions_scopes_with_dual_coverage_min_pct := env_var_or_default("LIBERTY_RESTRICTIONS_SCOPES_WITH_DUAL_COVERAGE_MIN_PCT", "1.0")
liberty_restrictions_min_dual_coverage_sources := env_var_or_default("LIBERTY_RESTRICTIONS_MIN_DUAL_COVERAGE_SOURCES", "1")
liberty_restrictions_min_dual_coverage_scopes := env_var_or_default("LIBERTY_RESTRICTIONS_MIN_DUAL_COVERAGE_SCOPES", "1")
liberty_restrictions_accountability_primary_evidence_min_pct := env_var_or_default("LIBERTY_RESTRICTIONS_ACCOUNTABILITY_PRIMARY_EVIDENCE_MIN_PCT", "1.0")
liberty_restrictions_min_accountability_primary_evidence_edges := env_var_or_default("LIBERTY_RESTRICTIONS_MIN_ACCOUNTABILITY_PRIMARY_EVIDENCE_EDGES", "1")
liberty_restrictions_status_heartbeat_path := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_PATH", "docs/etl/runs/liberty_restrictions_status_heartbeat.jsonl")
liberty_restrictions_status_heartbeat_out := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-123/evidence/liberty_restrictions_status_heartbeat_latest.json")
liberty_restrictions_status_heartbeat_window := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_WINDOW", "20")
liberty_restrictions_status_heartbeat_max_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FAILED", "0")
liberty_restrictions_status_heartbeat_max_failed_rate_pct := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FAILED_RATE_PCT", "0")
liberty_restrictions_status_heartbeat_max_focus_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FOCUS_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_focus_gate_failed_rate_pct := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FOCUS_GATE_FAILED_RATE_PCT", "0")
liberty_restrictions_status_heartbeat_max_norms_classified_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_NORMS_CLASSIFIED_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_fragments_irlc_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FRAGMENTS_IRLC_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_fragments_accountability_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_FRAGMENTS_ACCOUNTABILITY_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_rights_with_data_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_RIGHTS_WITH_DATA_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_source_representativity_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_SOURCE_REPRESENTATIVITY_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_scope_representativity_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_SCOPE_REPRESENTATIVITY_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_source_dual_coverage_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_SOURCE_DUAL_COVERAGE_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_scope_dual_coverage_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_SCOPE_DUAL_COVERAGE_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_max_accountability_primary_evidence_gate_failed := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_MAX_ACCOUNTABILITY_PRIMARY_EVIDENCE_GATE_FAILED", "0")
liberty_restrictions_status_heartbeat_window_out := env_var_or_default("LIBERTY_RESTRICTIONS_STATUS_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-123/evidence/liberty_restrictions_status_heartbeat_window_latest.json")
liberty_focus_scope_changed_paths := env_var_or_default("LIBERTY_FOCUS_SCOPE_CHANGED_PATHS", "docs/etl/runs/liberty_focus_changed_paths.txt")
liberty_focus_scope_out := env_var_or_default("LIBERTY_FOCUS_SCOPE_OUT", "docs/etl/sprints/AI-OPS-129/evidence/liberty_focus_scope_latest.json")
liberty_restrictions_snapshot_out := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_OUT", "docs/etl/sprints/AI-OPS-118/exports/liberty_restrictions_snapshot_latest.json")
liberty_restrictions_snapshot_prev := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_PREV", "")
liberty_restrictions_snapshot_diff_out := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_DIFF_OUT", "docs/etl/sprints/AI-OPS-124/evidence/liberty_restrictions_snapshot_diff_latest.json")
liberty_restrictions_snapshot_changelog_jsonl := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_CHANGELOG_JSONL", "docs/etl/runs/liberty_restrictions_snapshot_changelog.jsonl")
liberty_restrictions_snapshot_changelog_out := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_CHANGELOG_OUT", "docs/etl/sprints/AI-OPS-124/evidence/liberty_restrictions_snapshot_changelog_latest.json")
liberty_restrictions_snapshot_irlc_parquet_out := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_IRLC_PARQUET_OUT", "docs/etl/sprints/AI-OPS-124/exports/irlc_by_fragment_latest.parquet")
liberty_restrictions_snapshot_accountability_parquet_out := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_ACCOUNTABILITY_PARQUET_OUT", "docs/etl/sprints/AI-OPS-124/exports/accountability_edges_latest.parquet")
liberty_restrictions_snapshot_parquet_compression := env_var_or_default("LIBERTY_RESTRICTIONS_SNAPSHOT_PARQUET_COMPRESSION", "zstd")
liberty_atlas_publish_snapshot_json := env_var_or_default("LIBERTY_ATLAS_PUBLISH_SNAPSHOT_JSON", "docs/etl/sprints/AI-OPS-118/exports/liberty_restrictions_snapshot_latest.json")
liberty_atlas_publish_irlc_parquet := env_var_or_default("LIBERTY_ATLAS_PUBLISH_IRLC_PARQUET", "docs/etl/sprints/AI-OPS-124/exports/irlc_by_fragment_latest.parquet")
liberty_atlas_publish_accountability_parquet := env_var_or_default("LIBERTY_ATLAS_PUBLISH_ACCOUNTABILITY_PARQUET", "docs/etl/sprints/AI-OPS-124/exports/accountability_edges_latest.parquet")
liberty_atlas_publish_diff_json := env_var_or_default("LIBERTY_ATLAS_PUBLISH_DIFF_JSON", "docs/etl/sprints/AI-OPS-124/evidence/liberty_restrictions_snapshot_diff_latest.json")
liberty_atlas_publish_changelog_entry_json := env_var_or_default("LIBERTY_ATLAS_PUBLISH_CHANGELOG_ENTRY_JSON", "docs/etl/sprints/AI-OPS-124/evidence/liberty_restrictions_snapshot_changelog_latest.json")
liberty_atlas_publish_changelog_history_jsonl := env_var_or_default("LIBERTY_ATLAS_PUBLISH_CHANGELOG_HISTORY_JSONL", "docs/etl/runs/liberty_restrictions_snapshot_changelog.jsonl")
liberty_atlas_published_dir := env_var_or_default("LIBERTY_ATLAS_PUBLISHED_DIR", "etl/data/published")
liberty_atlas_publish_gh_pages_out := env_var_or_default("LIBERTY_ATLAS_PUBLISH_GH_PAGES_OUT", "docs/gh-pages/explorer-sources/data/liberty-atlas-release.json")
liberty_atlas_publish_out := env_var_or_default("LIBERTY_ATLAS_PUBLISH_OUT", "docs/etl/sprints/AI-OPS-125/evidence/liberty_atlas_publish_latest.json")
liberty_atlas_publish_allow_missing := env_var_or_default("LIBERTY_ATLAS_PUBLISH_ALLOW_MISSING", "0")
liberty_atlas_release_latest_json := env_var_or_default("LIBERTY_ATLAS_RELEASE_LATEST_JSON", "etl/data/published/liberty-restrictions-atlas-release-latest.json")
liberty_atlas_changelog_continuity_out := env_var_or_default("LIBERTY_ATLAS_CHANGELOG_CONTINUITY_OUT", "docs/etl/sprints/AI-OPS-125/evidence/liberty_atlas_changelog_continuity_latest.json")
liberty_atlas_release_heartbeat_path := env_var_or_default("LIBERTY_ATLAS_RELEASE_HEARTBEAT_PATH", "docs/etl/runs/liberty_atlas_release_heartbeat.jsonl")
liberty_atlas_release_heartbeat_out := env_var_or_default("LIBERTY_ATLAS_RELEASE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-126/evidence/liberty_atlas_release_heartbeat_latest.json")
liberty_atlas_release_heartbeat_window := env_var_or_default("LIBERTY_ATLAS_RELEASE_HEARTBEAT_WINDOW", "20")
liberty_atlas_release_heartbeat_window_out := env_var_or_default("LIBERTY_ATLAS_RELEASE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-126/evidence/liberty_atlas_release_heartbeat_window_latest.json")
liberty_atlas_release_max_snapshot_age_days := env_var_or_default("LIBERTY_ATLAS_RELEASE_MAX_SNAPSHOT_AGE_DAYS", "14")
liberty_atlas_release_expected_snapshot_date := env_var_or_default("LIBERTY_ATLAS_RELEASE_EXPECTED_SNAPSHOT_DATE", "")
liberty_atlas_release_hf_json := env_var_or_default("LIBERTY_ATLAS_RELEASE_HF_JSON", "")
liberty_atlas_release_hf_latest_url := env_var_or_default("LIBERTY_ATLAS_RELEASE_HF_LATEST_URL", "")
liberty_atlas_release_hf_dataset_repo := env_var_or_default("LIBERTY_ATLAS_RELEASE_HF_DATASET_REPO", "")
liberty_atlas_release_hf_username := env_var_or_default("LIBERTY_ATLAS_RELEASE_HF_USERNAME", "")
liberty_atlas_release_hf_timeout := env_var_or_default("LIBERTY_ATLAS_RELEASE_HF_TIMEOUT", "20")
liberty_atlas_release_allow_hf_unavailable := env_var_or_default("LIBERTY_ATLAS_RELEASE_ALLOW_HF_UNAVAILABLE", "1")
liberty_atlas_release_window_max_failed := env_var_or_default("LIBERTY_ATLAS_RELEASE_WINDOW_MAX_FAILED", "0")
liberty_atlas_release_window_max_degraded := env_var_or_default("LIBERTY_ATLAS_RELEASE_WINDOW_MAX_DEGRADED", "0")
liberty_atlas_release_window_max_stale_alerts := env_var_or_default("LIBERTY_ATLAS_RELEASE_WINDOW_MAX_STALE_ALERTS", "0")
liberty_atlas_release_window_max_drift_alerts := env_var_or_default("LIBERTY_ATLAS_RELEASE_WINDOW_MAX_DRIFT_ALERTS", "0")
liberty_atlas_release_window_max_hf_unavailable := env_var_or_default("LIBERTY_ATLAS_RELEASE_WINDOW_MAX_HF_UNAVAILABLE", "0")
liberty_proportionality_seed := env_var_or_default("LIBERTY_PROPORTIONALITY_SEED", "etl/data/seeds/liberty_proportionality_seed_v1.json")
liberty_proportionality_source_id := env_var_or_default("LIBERTY_PROPORTIONALITY_SOURCE_ID", "boe_api_legal")
liberty_proportionality_validate_out := env_var_or_default("LIBERTY_PROPORTIONALITY_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-119/evidence/liberty_proportionality_validate_latest.json")
liberty_proportionality_import_out := env_var_or_default("LIBERTY_PROPORTIONALITY_IMPORT_OUT", "docs/etl/sprints/AI-OPS-119/evidence/liberty_proportionality_import_latest.json")
liberty_proportionality_status_out := env_var_or_default("LIBERTY_PROPORTIONALITY_STATUS_OUT", "docs/etl/sprints/AI-OPS-119/evidence/liberty_proportionality_status_latest.json")
liberty_proportionality_target_coverage_min := env_var_or_default("LIBERTY_PROPORTIONALITY_TARGET_COVERAGE_MIN", "0.6")
liberty_proportionality_objective_defined_min := env_var_or_default("LIBERTY_PROPORTIONALITY_OBJECTIVE_DEFINED_MIN", "0.8")
liberty_proportionality_indicator_defined_min := env_var_or_default("LIBERTY_PROPORTIONALITY_INDICATOR_DEFINED_MIN", "0.6")
liberty_proportionality_alternatives_min := env_var_or_default("LIBERTY_PROPORTIONALITY_ALTERNATIVES_MIN", "0.4")
liberty_proportionality_low_score_threshold := env_var_or_default("LIBERTY_PROPORTIONALITY_LOW_SCORE_THRESHOLD", "50")
liberty_direct_accountability_scores_out := env_var_or_default("LIBERTY_DIRECT_ACCOUNTABILITY_SCORES_OUT", "docs/etl/sprints/AI-OPS-119/evidence/liberty_direct_accountability_scores_latest.json")
liberty_direct_accountability_top_n := env_var_or_default("LIBERTY_DIRECT_ACCOUNTABILITY_TOP_N", "20")
liberty_direct_accountability_coverage_min := env_var_or_default("LIBERTY_DIRECT_ACCOUNTABILITY_COVERAGE_MIN", "0.6")
liberty_direct_accountability_primary_evidence_min_pct := env_var_or_default("LIBERTY_DIRECT_ACCOUNTABILITY_PRIMARY_EVIDENCE_MIN_PCT", "1.0")
liberty_direct_accountability_min_primary_evidence_edges := env_var_or_default("LIBERTY_DIRECT_ACCOUNTABILITY_MIN_PRIMARY_EVIDENCE_EDGES", "1")
liberty_personal_accountability_scores_out := env_var_or_default("LIBERTY_PERSONAL_ACCOUNTABILITY_SCORES_OUT", "docs/etl/sprints/AI-OPS-138/evidence/liberty_personal_accountability_scores_latest.json")
liberty_personal_accountability_top_n := env_var_or_default("LIBERTY_PERSONAL_ACCOUNTABILITY_TOP_N", "20")
liberty_personal_confidence_min := env_var_or_default("LIBERTY_PERSONAL_CONFIDENCE_MIN", "0.55")
liberty_personal_max_distance := env_var_or_default("LIBERTY_PERSONAL_MAX_DISTANCE", "2")
liberty_personal_fragment_coverage_min := env_var_or_default("LIBERTY_PERSONAL_FRAGMENT_COVERAGE_MIN", "0.5")
liberty_personal_primary_evidence_min_pct := env_var_or_default("LIBERTY_PERSONAL_PRIMARY_EVIDENCE_MIN_PCT", "1.0")
liberty_personal_min_primary_evidence_edges := env_var_or_default("LIBERTY_PERSONAL_MIN_PRIMARY_EVIDENCE_EDGES", "1")
liberty_personal_indirect_window_min_pct := env_var_or_default("LIBERTY_PERSONAL_INDIRECT_WINDOW_MIN_PCT", "1.0")
liberty_personal_min_indirect_window_edges := env_var_or_default("LIBERTY_PERSONAL_MIN_INDIRECT_WINDOW_EDGES", "1")
liberty_personal_indirect_identity_resolution_min_pct := env_var_or_default("LIBERTY_PERSONAL_INDIRECT_IDENTITY_RESOLUTION_MIN_PCT", "0.0")
liberty_personal_min_indirect_identity_resolution_edges := env_var_or_default("LIBERTY_PERSONAL_MIN_INDIRECT_IDENTITY_RESOLUTION_EDGES", "1")
liberty_personal_indirect_non_manual_alias_resolution_min_pct := env_var_or_default("LIBERTY_PERSONAL_INDIRECT_NON_MANUAL_ALIAS_RESOLUTION_MIN_PCT", "0.0")
liberty_personal_min_indirect_non_manual_alias_resolution_edges := env_var_or_default("LIBERTY_PERSONAL_MIN_INDIRECT_NON_MANUAL_ALIAS_RESOLUTION_EDGES", "1")
liberty_personal_manual_alias_share_max := env_var_or_default("LIBERTY_PERSONAL_MANUAL_ALIAS_SHARE_MAX", "1.0")
liberty_personal_min_alias_rows_for_manual_share_gate := env_var_or_default("LIBERTY_PERSONAL_MIN_ALIAS_ROWS_FOR_MANUAL_SHARE_GATE", "1")
liberty_personal_official_alias_share_min_pct := env_var_or_default("LIBERTY_PERSONAL_OFFICIAL_ALIAS_SHARE_MIN_PCT", "0.0")
liberty_personal_min_alias_rows_for_official_share_gate := env_var_or_default("LIBERTY_PERSONAL_MIN_ALIAS_ROWS_FOR_OFFICIAL_SHARE_GATE", "1")
liberty_personal_official_alias_evidence_min_pct := env_var_or_default("LIBERTY_PERSONAL_OFFICIAL_ALIAS_EVIDENCE_MIN_PCT", "1.0")
liberty_personal_min_official_alias_rows_for_evidence_gate := env_var_or_default("LIBERTY_PERSONAL_MIN_OFFICIAL_ALIAS_ROWS_FOR_EVIDENCE_GATE", "1")
liberty_personal_official_alias_source_record_min_pct := env_var_or_default("LIBERTY_PERSONAL_OFFICIAL_ALIAS_SOURCE_RECORD_MIN_PCT", "1.0")
liberty_personal_min_official_alias_rows_for_source_record_gate := env_var_or_default("LIBERTY_PERSONAL_MIN_OFFICIAL_ALIAS_ROWS_FOR_SOURCE_RECORD_GATE", "1")
liberty_personal_min_persons_scored := env_var_or_default("LIBERTY_PERSONAL_MIN_PERSONS_SCORED", "1")
liberty_person_identity_seed := env_var_or_default("LIBERTY_PERSON_IDENTITY_SEED", "etl/data/seeds/liberty_person_identity_resolution_seed_v1.json")
liberty_person_identity_source_id := env_var_or_default("LIBERTY_PERSON_IDENTITY_SOURCE_ID", "boe_api_legal")
liberty_person_identity_validate_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-143/evidence/liberty_person_identity_validate_latest.json")
liberty_person_identity_import_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_IMPORT_OUT", "docs/etl/sprints/AI-OPS-143/evidence/liberty_person_identity_import_latest.json")
liberty_person_identity_resolution_queue_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_RESOLUTION_QUEUE_OUT", "docs/etl/sprints/AI-OPS-143/evidence/liberty_person_identity_resolution_queue_latest.json")
liberty_person_identity_resolution_queue_csv_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_RESOLUTION_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-143/exports/liberty_person_identity_resolution_queue_latest.csv")
liberty_person_identity_manual_upgrade_queue_csv_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_MANUAL_UPGRADE_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-144/exports/liberty_person_identity_manual_upgrade_queue_latest.csv")
liberty_person_identity_official_evidence_upgrade_queue_csv_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_EVIDENCE_UPGRADE_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-149/exports/liberty_person_identity_official_alias_evidence_upgrade_queue_latest.csv")
liberty_person_identity_official_source_record_upgrade_queue_csv_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_SOURCE_RECORD_UPGRADE_QUEUE_CSV_OUT", "docs/etl/sprints/AI-OPS-149/exports/liberty_person_identity_official_alias_source_record_upgrade_queue_latest.csv")
liberty_person_identity_official_upgrade_review_queue_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_OUT", "docs/etl/sprints/AI-OPS-150/exports/liberty_person_identity_official_upgrade_review_queue_latest.csv")
liberty_person_identity_official_upgrade_review_queue_summary_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-150/evidence/liberty_person_identity_official_upgrade_review_queue_latest.json")
liberty_person_identity_official_upgrade_review_queue_actionable_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_OUT", "docs/etl/sprints/AI-OPS-153/exports/liberty_person_identity_official_upgrade_review_queue_actionable_latest.csv")
liberty_person_identity_official_upgrade_review_queue_actionable_summary_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_SUMMARY_OUT", "docs/etl/sprints/AI-OPS-153/evidence/liberty_person_identity_official_upgrade_review_queue_actionable_latest.json")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_path := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_PATH", "docs/etl/runs/liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat.jsonl")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-154/evidence/liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_latest.json")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW", "20")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_failed := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW_MAX_FAILED", "0")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_failed_rate_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_actionable_nonempty_runs := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW_MAX_ACTIONABLE_NONEMPTY_RUNS", "0")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_actionable_nonempty_runs_rate_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW_MAX_ACTIONABLE_NONEMPTY_RUNS_RATE_PCT", "0")
liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEW_QUEUE_ACTIONABLE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-154/evidence/liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_latest.json")
liberty_person_identity_official_upgrade_reviews_in := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_REVIEWS_IN", "docs/etl/sprints/AI-OPS-150/exports/liberty_person_identity_official_upgrade_review_queue_latest.csv")
liberty_person_identity_seed_review_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_SEED_REVIEW_OUT", "docs/etl/sprints/AI-OPS-150/exports/liberty_person_identity_resolution_seed_reviewed_latest.json")
liberty_person_identity_official_upgrade_apply_out := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_UPGRADE_APPLY_OUT", "docs/etl/sprints/AI-OPS-150/evidence/liberty_person_identity_official_upgrade_apply_latest.json")
liberty_person_identity_resolution_queue_limit := env_var_or_default("LIBERTY_PERSON_IDENTITY_RESOLUTION_QUEUE_LIMIT", "0")
liberty_person_identity_resolution_min_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_RESOLUTION_MIN_PCT", "0.0")
liberty_person_identity_resolution_min_edges := env_var_or_default("LIBERTY_PERSON_IDENTITY_RESOLUTION_MIN_EDGES", "1")
liberty_person_identity_non_manual_alias_resolution_min_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_NON_MANUAL_ALIAS_RESOLUTION_MIN_PCT", "0.0")
liberty_person_identity_non_manual_alias_resolution_min_edges := env_var_or_default("LIBERTY_PERSON_IDENTITY_NON_MANUAL_ALIAS_RESOLUTION_MIN_EDGES", "1")
liberty_person_identity_manual_alias_share_max := env_var_or_default("LIBERTY_PERSON_IDENTITY_MANUAL_ALIAS_SHARE_MAX", "1.0")
liberty_person_identity_min_alias_rows_for_manual_share_gate := env_var_or_default("LIBERTY_PERSON_IDENTITY_MIN_ALIAS_ROWS_FOR_MANUAL_SHARE_GATE", "1")
liberty_person_identity_official_alias_share_min_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_ALIAS_SHARE_MIN_PCT", "0.0")
liberty_person_identity_min_alias_rows_for_official_share_gate := env_var_or_default("LIBERTY_PERSON_IDENTITY_MIN_ALIAS_ROWS_FOR_OFFICIAL_SHARE_GATE", "1")
liberty_person_identity_official_alias_evidence_min_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_ALIAS_EVIDENCE_MIN_PCT", "1.0")
liberty_person_identity_min_official_alias_rows_for_evidence_gate := env_var_or_default("LIBERTY_PERSON_IDENTITY_MIN_OFFICIAL_ALIAS_ROWS_FOR_EVIDENCE_GATE", "1")
liberty_person_identity_official_alias_source_record_min_pct := env_var_or_default("LIBERTY_PERSON_IDENTITY_OFFICIAL_ALIAS_SOURCE_RECORD_MIN_PCT", "1.0")
liberty_person_identity_min_official_alias_rows_for_source_record_gate := env_var_or_default("LIBERTY_PERSON_IDENTITY_MIN_OFFICIAL_ALIAS_ROWS_FOR_SOURCE_RECORD_GATE", "1")
liberty_enforcement_seed := env_var_or_default("LIBERTY_ENFORCEMENT_SEED", "etl/data/seeds/liberty_enforcement_seed_v1.json")
liberty_enforcement_source_id := env_var_or_default("LIBERTY_ENFORCEMENT_SOURCE_ID", "boe_api_legal")
liberty_enforcement_validate_out := env_var_or_default("LIBERTY_ENFORCEMENT_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_enforcement_validate_latest.json")
liberty_enforcement_import_out := env_var_or_default("LIBERTY_ENFORCEMENT_IMPORT_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_enforcement_import_latest.json")
liberty_enforcement_status_out := env_var_or_default("LIBERTY_ENFORCEMENT_STATUS_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_enforcement_status_latest.json")
liberty_enforcement_top_n := env_var_or_default("LIBERTY_ENFORCEMENT_TOP_N", "20")
liberty_enforcement_sanction_spread_min := env_var_or_default("LIBERTY_ENFORCEMENT_SANCTION_SPREAD_MIN", "0.35")
liberty_enforcement_annulment_spread_min := env_var_or_default("LIBERTY_ENFORCEMENT_ANNULMENT_SPREAD_MIN", "0.08")
liberty_enforcement_delay_spread_days_min := env_var_or_default("LIBERTY_ENFORCEMENT_DELAY_SPREAD_DAYS_MIN", "45")
liberty_enforcement_target_coverage_min := env_var_or_default("LIBERTY_ENFORCEMENT_TARGET_COVERAGE_MIN", "0.6")
liberty_enforcement_multi_territory_min := env_var_or_default("LIBERTY_ENFORCEMENT_MULTI_TERRITORY_MIN", "0.6")
liberty_indirect_seed := env_var_or_default("LIBERTY_INDIRECT_SEED", "etl/data/seeds/liberty_indirect_accountability_seed_v1.json")
liberty_indirect_source_id := env_var_or_default("LIBERTY_INDIRECT_SOURCE_ID", "boe_api_legal")
liberty_indirect_validate_out := env_var_or_default("LIBERTY_INDIRECT_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_indirect_validate_latest.json")
liberty_indirect_import_out := env_var_or_default("LIBERTY_INDIRECT_IMPORT_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_indirect_import_latest.json")
liberty_indirect_status_out := env_var_or_default("LIBERTY_INDIRECT_STATUS_OUT", "docs/etl/sprints/AI-OPS-120/evidence/liberty_indirect_status_latest.json")
liberty_indirect_top_n := env_var_or_default("LIBERTY_INDIRECT_TOP_N", "20")
liberty_indirect_confidence_min := env_var_or_default("LIBERTY_INDIRECT_CONFIDENCE_MIN", "0.55")
liberty_indirect_max_distance := env_var_or_default("LIBERTY_INDIRECT_MAX_DISTANCE", "2")
liberty_indirect_fragment_coverage_min := env_var_or_default("LIBERTY_INDIRECT_FRAGMENT_COVERAGE_MIN", "0.5")
liberty_indirect_person_window_min := env_var_or_default("LIBERTY_INDIRECT_PERSON_WINDOW_MIN", "1.0")
liberty_indirect_min_person_window_edges := env_var_or_default("LIBERTY_INDIRECT_MIN_PERSON_WINDOW_EDGES", "1")
liberty_delegated_seed := env_var_or_default("LIBERTY_DELEGATED_SEED", "etl/data/seeds/liberty_delegated_enforcement_seed_v1.json")
liberty_delegated_source_id := env_var_or_default("LIBERTY_DELEGATED_SOURCE_ID", "boe_api_legal")
liberty_delegated_validate_out := env_var_or_default("LIBERTY_DELEGATED_VALIDATE_OUT", "docs/etl/sprints/AI-OPS-121/evidence/liberty_delegated_validate_latest.json")
liberty_delegated_import_out := env_var_or_default("LIBERTY_DELEGATED_IMPORT_OUT", "docs/etl/sprints/AI-OPS-121/evidence/liberty_delegated_import_latest.json")
liberty_delegated_status_out := env_var_or_default("LIBERTY_DELEGATED_STATUS_OUT", "docs/etl/sprints/AI-OPS-121/evidence/liberty_delegated_status_latest.json")
liberty_delegated_top_n := env_var_or_default("LIBERTY_DELEGATED_TOP_N", "20")
liberty_delegated_target_coverage_min := env_var_or_default("LIBERTY_DELEGATED_TARGET_COVERAGE_MIN", "0.6")
liberty_delegated_designated_actor_min := env_var_or_default("LIBERTY_DELEGATED_DESIGNATED_ACTOR_MIN", "0.5")
liberty_delegated_enforcement_evidence_min := env_var_or_default("LIBERTY_DELEGATED_ENFORCEMENT_EVIDENCE_MIN", "0.7")
code_zip_name := env_var_or_default("CODE_ZIP_NAME", "vota-con-la-chola-code.zip")
hf_dataset_repo_id := env_var_or_default("HF_DATASET_REPO_ID", "vota-con-la-chola-data")
hf_parquet_batch_rows := env_var_or_default("HF_PARQUET_BATCH_ROWS", "50000")
hf_parquet_compression := env_var_or_default("HF_PARQUET_COMPRESSION", "zstd")
hf_parquet_tables := env_var_or_default("HF_PARQUET_TABLES", "")
hf_parquet_exclude_tables := env_var_or_default("HF_PARQUET_EXCLUDE_TABLES", "raw_fetches,run_fetches,source_records,lost_and_found")
hf_allow_sensitive_parquet := env_var_or_default("HF_ALLOW_SENSITIVE_PARQUET", "0")
hf_include_sqlite_gz := env_var_or_default("HF_INCLUDE_SQLITE_GZ", "0")
hf_require_quality_report := env_var_or_default("HF_REQUIRE_QUALITY_REPORT", "1")
hf_require_liberty_atlas_release_latest := env_var_or_default("HF_REQUIRE_LIBERTY_ATLAS_RELEASE_LATEST", "1")
hf_raw_dataset_repo_id := env_var_or_default("HF_RAW_DATASET_REPO_ID", "vota-con-la-chola-raw")
hf_raw_max_files_per_block := env_var_or_default("HF_RAW_MAX_FILES_PER_BLOCK", "10000")
hf_raw_include_manual := env_var_or_default("HF_RAW_INCLUDE_MANUAL", "0")
hf_verify_timeout := env_var_or_default("HF_VERIFY_TIMEOUT", "20")
hf_verify_out := env_var_or_default("HF_VERIFY_OUT", "")
citizen_preset_contract_fixture := env_var_or_default("CITIZEN_PRESET_CONTRACT_FIXTURE", "tests/fixtures/citizen_preset_hash_matrix.json")
citizen_preset_contract_out := env_var_or_default("CITIZEN_PRESET_CONTRACT_OUT", "")
citizen_preset_parity_source := env_var_or_default("CITIZEN_PRESET_PARITY_SOURCE", "ui/citizen/preset_codec.js")
citizen_preset_parity_published := env_var_or_default("CITIZEN_PRESET_PARITY_PUBLISHED", "docs/gh-pages/citizen/preset_codec.js")
citizen_preset_parity_out := env_var_or_default("CITIZEN_PRESET_PARITY_OUT", "")
citizen_preset_sync_source := env_var_or_default("CITIZEN_PRESET_SYNC_SOURCE", "ui/citizen/preset_codec.js")
citizen_preset_sync_published := env_var_or_default("CITIZEN_PRESET_SYNC_PUBLISHED", "docs/gh-pages/citizen/preset_codec.js")
citizen_preset_sync_out := env_var_or_default("CITIZEN_PRESET_SYNC_OUT", "")
citizen_preset_bundle_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_OUT", "")
citizen_preset_bundle_history_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history.jsonl")
citizen_preset_bundle_history_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_OUT", "")
citizen_preset_bundle_history_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_WINDOW", "20")
citizen_preset_bundle_history_window_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_WINDOW_OUT", "")
citizen_preset_bundle_history_compact_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history.compacted.jsonl")
citizen_preset_bundle_history_compact_recent := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_RECENT", "20")
citizen_preset_bundle_history_compact_mid_span := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_MID_SPAN", "100")
citizen_preset_bundle_history_compact_mid_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_MID_EVERY", "5")
citizen_preset_bundle_history_compact_old_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_OLD_EVERY", "20")
citizen_preset_bundle_history_compact_min_raw := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_MIN_RAW", "25")
citizen_preset_bundle_history_compact_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_COMPACT_OUT", "")
citizen_preset_bundle_history_slo_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_WINDOW", "20")
citizen_preset_bundle_history_slo_max_regressions := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_MAX_REGRESSIONS", "0")
citizen_preset_bundle_history_slo_max_regression_rate_pct := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_MAX_REGRESSION_RATE_PCT", "0")
citizen_preset_bundle_history_slo_min_green_streak := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_MIN_GREEN_STREAK", "1")
citizen_preset_bundle_history_slo_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_OUT", "")
citizen_preset_bundle_history_slo_digest_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history_slo_digest_heartbeat.jsonl")
citizen_preset_bundle_history_slo_digest_heartbeat_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_WINDOW", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_max_failed := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_MAX_FAILED", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_max_failed_rate_pct := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_MAX_FAILED_RATE_PCT", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_window_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_WINDOW_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history_slo_digest_heartbeat.compacted.jsonl")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_recent := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_RECENT", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_old_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat.jsonl")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_failed := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_MAX_FAILED", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_failed_rate_pct := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_MAX_FAILED_RATE_PCT", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_degraded := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_MAX_DEGRADED", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_degraded_rate_pct := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_MAX_DEGRADED_RATE_PCT", "0")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_window_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_WINDOW_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_path := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat.compacted.jsonl")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_recent := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_RECENT", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_old_every := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_OUT", "")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_window := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW", "20")
citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_window_out := env_var_or_default("CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_HEARTBEAT_COMPACT_WINDOW_OUT", "")
citizen_product_kpi_snapshot := env_var_or_default("CITIZEN_PRODUCT_KPI_SNAPSHOT", "docs/gh-pages/citizen/data/citizen.json")
citizen_product_kpi_events := env_var_or_default("CITIZEN_PRODUCT_KPI_EVENTS", "")
citizen_product_kpi_summary := env_var_or_default("CITIZEN_PRODUCT_KPI_SUMMARY", "")
citizen_product_kpi_out := env_var_or_default("CITIZEN_PRODUCT_KPI_OUT", "docs/etl/sprints/AI-OPS-72/evidence/citizen_product_kpis_latest.json")
citizen_product_kpi_max_unknown_rate := env_var_or_default("CITIZEN_PRODUCT_KPI_MAX_UNKNOWN_RATE", "0.45")
citizen_product_kpi_max_tfa_seconds := env_var_or_default("CITIZEN_PRODUCT_KPI_MAX_TFA_SECONDS", "120")
citizen_product_kpi_min_drilldown_rate := env_var_or_default("CITIZEN_PRODUCT_KPI_MIN_DRILLDOWN_RATE", "0.20")
citizen_product_kpi_heartbeat_events := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_EVENTS", "tests/fixtures/citizen_product_kpi_events_sample.jsonl")
citizen_product_kpi_heartbeat_summary := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_SUMMARY", "")
citizen_product_kpi_heartbeat_digest := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-98/evidence/citizen_product_kpis_latest.json")
citizen_product_kpi_heartbeat_path := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_PATH", "docs/etl/runs/citizen_product_kpis_heartbeat.jsonl")
citizen_product_kpi_heartbeat_out := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-98/evidence/citizen_product_kpis_heartbeat_latest.json")
citizen_product_kpi_heartbeat_window_last := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_LAST", "20")
citizen_product_kpi_heartbeat_window_max_failed := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_product_kpi_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_product_kpi_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_max_contract_incomplete := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE", "0")
citizen_product_kpi_heartbeat_window_max_contract_incomplete_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_max_unknown_rate_violations := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_UNKNOWN_RATE_VIOLATIONS", "0")
citizen_product_kpi_heartbeat_window_max_unknown_rate_violation_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_UNKNOWN_RATE_VIOLATION_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_max_tfa_violations := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_TFA_VIOLATIONS", "0")
citizen_product_kpi_heartbeat_window_max_tfa_violation_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_TFA_VIOLATION_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_max_drilldown_violations := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_DRILLDOWN_VIOLATIONS", "0")
citizen_product_kpi_heartbeat_window_max_drilldown_violation_rate_pct := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_MAX_DRILLDOWN_VIOLATION_RATE_PCT", "0")
citizen_product_kpi_heartbeat_window_out := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-98/evidence/citizen_product_kpis_heartbeat_window_latest.json")
citizen_product_kpi_heartbeat_compact_path := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_product_kpis_heartbeat.compacted.jsonl")
citizen_product_kpi_heartbeat_compact_recent := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_RECENT", "20")
citizen_product_kpi_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_product_kpi_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_product_kpi_heartbeat_compact_old_every := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_product_kpi_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_product_kpi_heartbeat_compact_out := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-107/evidence/citizen_product_kpis_heartbeat_compaction_latest.json")
citizen_product_kpi_heartbeat_compact_window_last := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_product_kpi_heartbeat_compact_window_out := env_var_or_default("CITIZEN_PRODUCT_KPI_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-107/evidence/citizen_product_kpis_heartbeat_compaction_window_latest.json")
citizen_mobile_perf_ui_html := env_var_or_default("CITIZEN_MOBILE_PERF_UI_HTML", "ui/citizen/index.html")
citizen_mobile_perf_ui_assets := env_var_or_default("CITIZEN_MOBILE_PERF_UI_ASSETS", "ui/citizen/preset_codec.js,ui/citizen/onboarding_funnel.js,ui/citizen/first_answer_accelerator.js,ui/citizen/unknown_explainability.js,ui/citizen/cross_method_stability.js,ui/citizen/evidence_trust_panel.js")
citizen_mobile_perf_snapshot := env_var_or_default("CITIZEN_MOBILE_PERF_SNAPSHOT", "docs/gh-pages/citizen/data/citizen.json")
citizen_mobile_perf_out := env_var_or_default("CITIZEN_MOBILE_PERF_OUT", "docs/etl/sprints/AI-OPS-76/evidence/citizen_mobile_performance_budget_latest.json")
citizen_mobile_perf_max_ui_html_bytes := env_var_or_default("CITIZEN_MOBILE_PERF_MAX_UI_HTML_BYTES", "220000")
citizen_mobile_perf_max_ui_assets_total_bytes := env_var_or_default("CITIZEN_MOBILE_PERF_MAX_UI_ASSETS_TOTAL_BYTES", "60000")
citizen_mobile_perf_max_snapshot_bytes := env_var_or_default("CITIZEN_MOBILE_PERF_MAX_SNAPSHOT_BYTES", "5000000")
citizen_mobile_obs_events := env_var_or_default("CITIZEN_MOBILE_OBS_EVENTS", "tests/fixtures/citizen_mobile_latency_events_sample.jsonl")
citizen_mobile_obs_summary := env_var_or_default("CITIZEN_MOBILE_OBS_SUMMARY", "")
citizen_mobile_obs_out := env_var_or_default("CITIZEN_MOBILE_OBS_OUT", "docs/etl/sprints/AI-OPS-83/evidence/citizen_mobile_observability_latest.json")
citizen_mobile_obs_min_samples := env_var_or_default("CITIZEN_MOBILE_OBS_MIN_SAMPLES", "20")
citizen_mobile_obs_max_p50_ms := env_var_or_default("CITIZEN_MOBILE_OBS_MAX_P50_MS", "180")
citizen_mobile_obs_max_p90_ms := env_var_or_default("CITIZEN_MOBILE_OBS_MAX_P90_MS", "450")
citizen_mobile_obs_heartbeat_digest := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-83/evidence/citizen_mobile_observability_latest.json")
citizen_mobile_obs_heartbeat_path := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_PATH", "docs/etl/runs/citizen_mobile_observability_heartbeat.jsonl")
citizen_mobile_obs_heartbeat_out := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-90/evidence/citizen_mobile_observability_heartbeat_latest.json")
citizen_mobile_obs_heartbeat_window_last := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_LAST", "20")
citizen_mobile_obs_heartbeat_window_max_failed := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_mobile_obs_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_mobile_obs_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_mobile_obs_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_mobile_obs_heartbeat_window_max_p90_threshold_violations := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_P90_THRESHOLD_VIOLATIONS", "0")
citizen_mobile_obs_heartbeat_window_max_p90_threshold_violation_rate_pct := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_MAX_P90_THRESHOLD_VIOLATION_RATE_PCT", "0")
citizen_mobile_obs_heartbeat_window_out := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-90/evidence/citizen_mobile_observability_heartbeat_window_latest.json")
citizen_mobile_obs_heartbeat_compact_path := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_mobile_observability_heartbeat.compacted.jsonl")
citizen_mobile_obs_heartbeat_compact_recent := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_RECENT", "20")
citizen_mobile_obs_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_mobile_obs_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_mobile_obs_heartbeat_compact_old_every := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_mobile_obs_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_mobile_obs_heartbeat_compact_out := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-95/evidence/citizen_mobile_observability_heartbeat_compaction_latest.json")
citizen_mobile_obs_heartbeat_compact_window_last := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_mobile_obs_heartbeat_compact_window_out := env_var_or_default("CITIZEN_MOBILE_OBS_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-95/evidence/citizen_mobile_observability_heartbeat_compaction_window_latest.json")
citizen_tailwind_md3_tokens := env_var_or_default("CITIZEN_TAILWIND_MD3_TOKENS", "ui/citizen/tailwind_md3.tokens.json")
citizen_tailwind_md3_css := env_var_or_default("CITIZEN_TAILWIND_MD3_CSS", "ui/citizen/tailwind_md3.generated.css")
citizen_tailwind_md3_out := env_var_or_default("CITIZEN_TAILWIND_MD3_OUT", "docs/etl/sprints/AI-OPS-91/evidence/citizen_tailwind_md3_contract_latest.json")
citizen_tailwind_md3_max_css_bytes := env_var_or_default("CITIZEN_TAILWIND_MD3_MAX_CSS_BYTES", "40000")
citizen_tailwind_md3_min_card_markers := env_var_or_default("CITIZEN_TAILWIND_MD3_MIN_CARD_MARKERS", "6")
citizen_tailwind_md3_min_chip_markers := env_var_or_default("CITIZEN_TAILWIND_MD3_MIN_CHIP_MARKERS", "8")
citizen_tailwind_md3_min_button_markers := env_var_or_default("CITIZEN_TAILWIND_MD3_MIN_BUTTON_MARKERS", "20")
citizen_tailwind_md3_min_tab_markers := env_var_or_default("CITIZEN_TAILWIND_MD3_MIN_TAB_MARKERS", "6")
citizen_tailwind_md3_drift_contract := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_CONTRACT", "docs/etl/sprints/AI-OPS-96/evidence/citizen_tailwind_md3_contract_latest.json")
citizen_tailwind_md3_drift_published_tokens := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_PUBLISHED_TOKENS", "docs/gh-pages/citizen/tailwind_md3.tokens.json")
citizen_tailwind_md3_drift_published_data_tokens := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_PUBLISHED_DATA_TOKENS", "docs/gh-pages/citizen/data/tailwind_md3.tokens.json")
citizen_tailwind_md3_drift_published_css := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_PUBLISHED_CSS", "docs/gh-pages/citizen/tailwind_md3.generated.css")
citizen_tailwind_md3_drift_published_ui_html := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_PUBLISHED_UI_HTML", "docs/gh-pages/citizen/index.html")
citizen_tailwind_md3_drift_out := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_OUT", "docs/etl/sprints/AI-OPS-96/evidence/citizen_tailwind_md3_visual_drift_digest_latest.json")
citizen_tailwind_md3_drift_heartbeat_path := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_PATH", "docs/etl/runs/citizen_tailwind_md3_visual_drift_digest_heartbeat.jsonl")
citizen_tailwind_md3_drift_heartbeat_out := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-103/evidence/citizen_tailwind_md3_visual_drift_digest_heartbeat_latest.json")
citizen_tailwind_md3_drift_heartbeat_window_last := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_LAST", "20")
citizen_tailwind_md3_drift_heartbeat_window_max_failed := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_PARITY_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch_rate_pct := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_PARITY_MISMATCH_RATE_PCT", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_tokens_parity_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_TOKENS_PARITY_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_tokens_data_parity_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_TOKENS_DATA_PARITY_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_css_parity_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_CSS_PARITY_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_ui_html_parity_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_UI_HTML_PARITY_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_max_marker_mismatch := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_MAX_MARKER_MISMATCH", "0")
citizen_tailwind_md3_drift_heartbeat_window_out := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-103/evidence/citizen_tailwind_md3_visual_drift_digest_heartbeat_window_latest.json")
citizen_tailwind_md3_drift_heartbeat_compact_path := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_tailwind_md3_visual_drift_digest_heartbeat.compacted.jsonl")
citizen_tailwind_md3_drift_heartbeat_compact_recent := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_RECENT", "20")
citizen_tailwind_md3_drift_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_tailwind_md3_drift_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_tailwind_md3_drift_heartbeat_compact_old_every := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_tailwind_md3_drift_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_tailwind_md3_drift_heartbeat_compact_out := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-108/evidence/citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction_latest.json")
citizen_tailwind_md3_drift_heartbeat_compact_window_last := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_tailwind_md3_drift_heartbeat_compact_window_out := env_var_or_default("CITIZEN_TAILWIND_MD3_DRIFT_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-108/evidence/citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction_window_latest.json")
citizen_release_source_root := env_var_or_default("CITIZEN_RELEASE_SOURCE_ROOT", "ui/citizen")
citizen_release_published_root := env_var_or_default("CITIZEN_RELEASE_PUBLISHED_ROOT", "docs/gh-pages/citizen")
citizen_release_snapshot := env_var_or_default("CITIZEN_RELEASE_SNAPSHOT", "docs/gh-pages/citizen/data/citizen.json")
citizen_release_concerns := env_var_or_default("CITIZEN_RELEASE_CONCERNS", "ui/citizen/concerns_v1.json")
citizen_release_assets := env_var_or_default("CITIZEN_RELEASE_ASSETS", "index.html,preset_codec.js,onboarding_funnel.js,first_answer_accelerator.js,unknown_explainability.js,cross_method_stability.js,evidence_trust_panel.js,tailwind_md3.generated.css,tailwind_md3.tokens.json")
citizen_release_max_snapshot_bytes := env_var_or_default("CITIZEN_RELEASE_MAX_SNAPSHOT_BYTES", "5000000")
citizen_release_out := env_var_or_default("CITIZEN_RELEASE_OUT", "docs/etl/sprints/AI-OPS-81/evidence/citizen_release_hardening_latest.json")
citizen_release_trace_source := env_var_or_default("CITIZEN_RELEASE_TRACE_SOURCE", "docs/etl/sprints/AI-OPS-81/evidence/citizen_release_hardening_latest.json")
citizen_release_trace_max_age_minutes := env_var_or_default("CITIZEN_RELEASE_TRACE_MAX_AGE_MINUTES", "360")
citizen_release_trace_out := env_var_or_default("CITIZEN_RELEASE_TRACE_OUT", "docs/etl/sprints/AI-OPS-88/evidence/citizen_release_trace_digest_latest.json")
citizen_release_trace_heartbeat_digest := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-88/evidence/citizen_release_trace_digest_latest.json")
citizen_release_trace_heartbeat_path := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_PATH", "docs/etl/runs/citizen_release_trace_digest_heartbeat.jsonl")
citizen_release_trace_heartbeat_out := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-93/evidence/citizen_release_trace_digest_heartbeat_latest.json")
citizen_release_trace_heartbeat_window_last := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_LAST", "20")
citizen_release_trace_heartbeat_window_max_failed := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_release_trace_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_release_trace_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_release_trace_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_release_trace_heartbeat_window_max_stale := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_STALE", "0")
citizen_release_trace_heartbeat_window_max_stale_rate_pct := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_MAX_STALE_RATE_PCT", "0")
citizen_release_trace_heartbeat_window_out := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-93/evidence/citizen_release_trace_digest_heartbeat_window_latest.json")
citizen_release_trace_heartbeat_compact_path := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_release_trace_digest_heartbeat.compacted.jsonl")
citizen_release_trace_heartbeat_compact_recent := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_RECENT", "20")
citizen_release_trace_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_release_trace_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_release_trace_heartbeat_compact_old_every := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_release_trace_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_release_trace_heartbeat_compact_out := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-102/evidence/citizen_release_trace_digest_heartbeat_compaction_latest.json")
citizen_release_trace_heartbeat_compact_window_last := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_release_trace_heartbeat_compact_window_out := env_var_or_default("CITIZEN_RELEASE_TRACE_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-102/evidence/citizen_release_trace_digest_heartbeat_compaction_window_latest.json")
citizen_pack_quality_snapshot := env_var_or_default("CITIZEN_PACK_QUALITY_SNAPSHOT", "docs/gh-pages/citizen/data/citizen.json")
citizen_pack_quality_concerns := env_var_or_default("CITIZEN_PACK_QUALITY_CONCERNS", "ui/citizen/concerns_v1.json")
citizen_pack_quality_out := env_var_or_default("CITIZEN_PACK_QUALITY_OUT", "docs/etl/sprints/AI-OPS-78/evidence/citizen_concern_pack_quality_latest.json")
citizen_pack_quality_min_topics_per_pack := env_var_or_default("CITIZEN_PACK_QUALITY_MIN_TOPICS_PER_PACK", "10")
citizen_pack_quality_min_clear_cells_pct := env_var_or_default("CITIZEN_PACK_QUALITY_MIN_CLEAR_CELLS_PCT", "0.70")
citizen_pack_quality_max_unknown_cells_pct := env_var_or_default("CITIZEN_PACK_QUALITY_MAX_UNKNOWN_CELLS_PCT", "0.30")
citizen_pack_quality_min_confidence_avg_signal := env_var_or_default("CITIZEN_PACK_QUALITY_MIN_CONFIDENCE_AVG_SIGNAL", "0.50")
citizen_pack_quality_min_high_stakes_share := env_var_or_default("CITIZEN_PACK_QUALITY_MIN_HIGH_STAKES_SHARE", "0.12")
citizen_pack_quality_max_weak_packs := env_var_or_default("CITIZEN_PACK_QUALITY_MAX_WEAK_PACKS", "1")
citizen_pack_outcome_events := env_var_or_default("CITIZEN_PACK_OUTCOME_EVENTS", "tests/fixtures/citizen_concern_pack_outcome_events_sample.jsonl")
citizen_pack_outcome_quality := env_var_or_default("CITIZEN_PACK_OUTCOME_QUALITY", "tests/fixtures/citizen_concern_pack_quality_sample.json")
citizen_pack_outcome_out := env_var_or_default("CITIZEN_PACK_OUTCOME_OUT", "docs/etl/sprints/AI-OPS-85/evidence/citizen_concern_pack_outcomes_latest.json")
citizen_pack_outcome_min_pack_select_events := env_var_or_default("CITIZEN_PACK_OUTCOME_MIN_PACK_SELECT_EVENTS", "20")
citizen_pack_outcome_min_weak_pack_select_sessions := env_var_or_default("CITIZEN_PACK_OUTCOME_MIN_WEAK_PACK_SELECT_SESSIONS", "5")
citizen_pack_outcome_min_weak_pack_followthrough_rate := env_var_or_default("CITIZEN_PACK_OUTCOME_MIN_WEAK_PACK_FOLLOWTHROUGH_RATE", "0.30")
citizen_pack_outcome_max_unknown_pack_select_share := env_var_or_default("CITIZEN_PACK_OUTCOME_MAX_UNKNOWN_PACK_SELECT_SHARE", "0.20")
citizen_pack_outcome_heartbeat_digest := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-85/evidence/citizen_concern_pack_outcomes_latest.json")
citizen_pack_outcome_heartbeat_path := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_PATH", "docs/etl/runs/citizen_concern_pack_outcomes_heartbeat.jsonl")
citizen_pack_outcome_heartbeat_out := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-100/evidence/citizen_concern_pack_outcomes_heartbeat_latest.json")
citizen_pack_outcome_heartbeat_window_last := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_LAST", "20")
citizen_pack_outcome_heartbeat_window_max_failed := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_pack_outcome_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_pack_outcome_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_pack_outcome_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_pack_outcome_heartbeat_window_max_contract_incomplete := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE", "0")
citizen_pack_outcome_heartbeat_window_max_contract_incomplete_rate_pct := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE_RATE_PCT", "0")
citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violations := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_WEAK_PACK_FOLLOWTHROUGH_VIOLATIONS", "0")
citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violation_rate_pct := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_WEAK_PACK_FOLLOWTHROUGH_VIOLATION_RATE_PCT", "0")
citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violations := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_UNKNOWN_PACK_SELECT_SHARE_VIOLATIONS", "0")
citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violation_rate_pct := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_MAX_UNKNOWN_PACK_SELECT_SHARE_VIOLATION_RATE_PCT", "0")
citizen_pack_outcome_heartbeat_window_out := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-100/evidence/citizen_concern_pack_outcomes_heartbeat_window_latest.json")
citizen_pack_outcome_heartbeat_compact_path := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_concern_pack_outcomes_heartbeat.compacted.jsonl")
citizen_pack_outcome_heartbeat_compact_recent := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_RECENT", "20")
citizen_pack_outcome_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_pack_outcome_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_pack_outcome_heartbeat_compact_old_every := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_pack_outcome_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_pack_outcome_heartbeat_compact_out := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-105/evidence/citizen_concern_pack_outcomes_heartbeat_compaction_latest.json")
citizen_pack_outcome_heartbeat_compact_window_last := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_pack_outcome_heartbeat_compact_window_out := env_var_or_default("CITIZEN_PACK_OUTCOME_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-105/evidence/citizen_concern_pack_outcomes_heartbeat_compaction_window_latest.json")
citizen_trust_action_nudge_events := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_EVENTS", "tests/fixtures/citizen_trust_action_nudge_events_sample.jsonl")
citizen_trust_action_nudge_out := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_OUT", "docs/etl/sprints/AI-OPS-86/evidence/citizen_trust_action_nudges_latest.json")
citizen_trust_action_nudge_min_shown_events := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_MIN_SHOWN_EVENTS", "8")
citizen_trust_action_nudge_min_shown_sessions := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_MIN_SHOWN_SESSIONS", "5")
citizen_trust_action_nudge_min_clickthrough_rate := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_MIN_CLICKTHROUGH_RATE", "0.40")
citizen_trust_action_nudge_heartbeat_digest := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-86/evidence/citizen_trust_action_nudges_latest.json")
citizen_trust_action_nudge_heartbeat_path := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_PATH", "docs/etl/runs/citizen_trust_action_nudges_heartbeat.jsonl")
citizen_trust_action_nudge_heartbeat_out := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-101/evidence/citizen_trust_action_nudges_heartbeat_latest.json")
citizen_trust_action_nudge_heartbeat_window_last := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_LAST", "20")
citizen_trust_action_nudge_heartbeat_window_max_failed := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_trust_action_nudge_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_trust_action_nudge_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_trust_action_nudge_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE", "0")
citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete_rate_pct := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE_RATE_PCT", "0")
citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violations := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_NUDGE_CLICKTHROUGH_VIOLATIONS", "0")
citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violation_rate_pct := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_MAX_NUDGE_CLICKTHROUGH_VIOLATION_RATE_PCT", "0")
citizen_trust_action_nudge_heartbeat_window_out := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-101/evidence/citizen_trust_action_nudges_heartbeat_window_latest.json")
citizen_trust_action_nudge_heartbeat_compact_path := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_trust_action_nudges_heartbeat.compacted.jsonl")
citizen_trust_action_nudge_heartbeat_compact_recent := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_RECENT", "20")
citizen_trust_action_nudge_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_trust_action_nudge_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_trust_action_nudge_heartbeat_compact_old_every := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_trust_action_nudge_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_trust_action_nudge_heartbeat_compact_out := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-106/evidence/citizen_trust_action_nudges_heartbeat_compaction_latest.json")
citizen_trust_action_nudge_heartbeat_compact_window_last := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_trust_action_nudge_heartbeat_compact_window_out := env_var_or_default("CITIZEN_TRUST_ACTION_NUDGE_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-106/evidence/citizen_trust_action_nudges_heartbeat_compaction_window_latest.json")
citizen_explainability_copy_ui_html := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_UI_HTML", "ui/citizen/index.html")
citizen_explainability_copy_out := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_OUT", "docs/etl/sprints/AI-OPS-87/evidence/citizen_explainability_copy_latest.json")
citizen_explainability_copy_min_terms := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_MIN_TERMS", "4")
citizen_explainability_copy_max_definition_words := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_MAX_DEFINITION_WORDS", "12")
citizen_explainability_copy_max_copy_sentence_words := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_MAX_COPY_SENTENCE_WORDS", "16")
citizen_explainability_copy_forbidden_jargon := env_var_or_default("CITIZEN_EXPLAINABILITY_COPY_FORBIDDEN_JARGON", "embedding,ontologia,bayesiano,vectorizacion,heuristica")
citizen_explainability_outcome_events := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_EVENTS", "tests/fixtures/citizen_explainability_outcome_events_sample.jsonl")
citizen_explainability_outcome_out := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_OUT", "docs/etl/sprints/AI-OPS-92/evidence/citizen_explainability_outcomes_latest.json")
citizen_explainability_outcome_min_glossary_interaction_events := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_MIN_GLOSSARY_INTERACTION_EVENTS", "8")
citizen_explainability_outcome_min_help_copy_interaction_events := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_MIN_HELP_COPY_INTERACTION_EVENTS", "5")
citizen_explainability_outcome_min_adoption_sessions := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_MIN_ADOPTION_SESSIONS", "5")
citizen_explainability_outcome_min_adoption_completeness_rate := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_MIN_ADOPTION_COMPLETENESS_RATE", "0.60")
citizen_explainability_outcome_heartbeat_digest := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-92/evidence/citizen_explainability_outcomes_latest.json")
citizen_explainability_outcome_heartbeat_path := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_PATH", "docs/etl/runs/citizen_explainability_outcomes_heartbeat.jsonl")
citizen_explainability_outcome_heartbeat_out := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-97/evidence/citizen_explainability_outcomes_heartbeat_latest.json")
citizen_explainability_outcome_heartbeat_window_last := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_LAST", "20")
citizen_explainability_outcome_heartbeat_window_max_failed := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_explainability_outcome_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_explainability_outcome_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_explainability_outcome_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_explainability_outcome_heartbeat_window_max_contract_incomplete := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE", "0")
citizen_explainability_outcome_heartbeat_window_max_contract_incomplete_rate_pct := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE_RATE_PCT", "0")
citizen_explainability_outcome_heartbeat_window_out := env_var_or_default("CITIZEN_EXPLAINABILITY_OUTCOME_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-97/evidence/citizen_explainability_outcomes_heartbeat_window_latest.json")
citizen_coherence_outcome_events := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_EVENTS", "tests/fixtures/citizen_coherence_drilldown_events_sample.jsonl")
citizen_coherence_outcome_out := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_OUT", "docs/etl/sprints/AI-OPS-99/evidence/citizen_coherence_drilldown_outcomes_latest.json")
citizen_coherence_outcome_min_drilldown_click_events := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_MIN_DRILLDOWN_CLICK_EVENTS", "8")
citizen_coherence_outcome_min_replay_attempt_events := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_MIN_REPLAY_ATTEMPT_EVENTS", "8")
citizen_coherence_outcome_min_replay_success_rate := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_MIN_REPLAY_SUCCESS_RATE", "0.85")
citizen_coherence_outcome_min_contract_complete_click_rate := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_MIN_CONTRACT_COMPLETE_CLICK_RATE", "0.90")
citizen_coherence_outcome_max_replay_failure_rate := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_MAX_REPLAY_FAILURE_RATE", "0.15")
citizen_coherence_outcome_heartbeat_digest := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_DIGEST", "docs/etl/sprints/AI-OPS-99/evidence/citizen_coherence_drilldown_outcomes_latest.json")
citizen_coherence_outcome_heartbeat_path := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_PATH", "docs/etl/runs/citizen_coherence_drilldown_outcomes_heartbeat.jsonl")
citizen_coherence_outcome_heartbeat_out := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_OUT", "docs/etl/sprints/AI-OPS-99/evidence/citizen_coherence_drilldown_outcomes_heartbeat_latest.json")
citizen_coherence_outcome_heartbeat_window_last := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_LAST", "20")
citizen_coherence_outcome_heartbeat_window_max_failed := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED", "0")
citizen_coherence_outcome_heartbeat_window_max_failed_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_FAILED_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_max_degraded := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED", "0")
citizen_coherence_outcome_heartbeat_window_max_degraded_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_DEGRADED_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_max_contract_incomplete := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE", "0")
citizen_coherence_outcome_heartbeat_window_max_contract_incomplete_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_INCOMPLETE_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violations := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_REPLAY_SUCCESS_RATE_VIOLATIONS", "0")
citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violation_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_REPLAY_SUCCESS_RATE_VIOLATION_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violations := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_CLICK_RATE_VIOLATIONS", "0")
citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violation_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_CONTRACT_CLICK_RATE_VIOLATION_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violations := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_REPLAY_FAILURE_RATE_VIOLATIONS", "0")
citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violation_rate_pct := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_MAX_REPLAY_FAILURE_RATE_VIOLATION_RATE_PCT", "0")
citizen_coherence_outcome_heartbeat_window_out := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-99/evidence/citizen_coherence_drilldown_outcomes_heartbeat_window_latest.json")
citizen_coherence_outcome_heartbeat_compact_path := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_PATH", "docs/etl/runs/citizen_coherence_drilldown_outcomes_heartbeat.compacted.jsonl")
citizen_coherence_outcome_heartbeat_compact_recent := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_RECENT", "20")
citizen_coherence_outcome_heartbeat_compact_mid_span := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_MID_SPAN", "100")
citizen_coherence_outcome_heartbeat_compact_mid_every := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_MID_EVERY", "5")
citizen_coherence_outcome_heartbeat_compact_old_every := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_OLD_EVERY", "20")
citizen_coherence_outcome_heartbeat_compact_min_raw := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_MIN_RAW", "25")
citizen_coherence_outcome_heartbeat_compact_out := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_OUT", "docs/etl/sprints/AI-OPS-104/evidence/citizen_coherence_drilldown_outcomes_heartbeat_compaction_latest.json")
citizen_coherence_outcome_heartbeat_compact_window_last := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_WINDOW_LAST", "20")
citizen_coherence_outcome_heartbeat_compact_window_out := env_var_or_default("CITIZEN_COHERENCE_OUTCOME_HEARTBEAT_COMPACT_WINDOW_OUT", "docs/etl/sprints/AI-OPS-104/evidence/citizen_coherence_drilldown_outcomes_heartbeat_compaction_window_latest.json")

default:
  @just --list

zip-code output='':
  out="{{output}}"; \
  if [ -z "$out" ]; then out="dist/{{code_zip_name}}"; fi; \
  mkdir -p "$(dirname "$out")"; \
  rm -f "$out"; \
  git ls-files \
    | rg '^(scripts/|etl/|ui/|tests/|justfile$|docker-compose\.ya?ml$|Dockerfile$|pyproject\.toml$|requirements[^/]*\.txt$)' \
    | rg -v '^etl/data/' \
    | zip -q "$out" -@; \
  echo "OK wrote $out"

etl-cli cmd:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py {{cmd}}"

py cmd:
  docker compose run --rm --build etl "python3 {{cmd}}"

parl-cli cmd:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py {{cmd}}"

etl-build:
  docker compose build etl

etl-init:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py init-db --db {{db_path}}"

etl-samples:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source congreso_diputados --from-file etl/data/raw/samples/congreso_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_aragon_diputados --from-file etl/data/raw/samples/cortes_aragon_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source senado_senadores --from-file etl/data/raw/samples/senado_senadores_sample.csv --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source europarl_meps --from-file etl/data/raw/samples/europarl_meps_sample.xml --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source municipal_concejales --from-file etl/data/raw/samples/municipal_concejales_sample.csv --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_madrid_ocupaciones --from-file etl/data/raw/samples/asamblea_madrid_ocupaciones_sample.csv --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_ceuta_diputados --from-file etl/data/raw/samples/asamblea_ceuta_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_melilla_diputados --from-file etl/data/raw/samples/asamblea_melilla_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_extremadura_diputados --from-file etl/data/raw/samples/asamblea_extremadura_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_murcia_diputados --from-file etl/data/raw/samples/asamblea_murcia_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source jgpa_diputados --from-file etl/data/raw/samples/jgpa_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_canarias_diputados --from-file etl/data/raw/samples/parlamento_canarias_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_cantabria_diputados --from-file etl/data/raw/samples/parlamento_cantabria_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_balears_diputats --from-file etl/data/raw/samples/parlament_balears_diputats_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_larioja_diputados --from-file etl/data/raw/samples/parlamento_larioja_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_catalunya_diputats --from-file etl/data/raw/samples/parlament_catalunya_diputats_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source corts_valencianes_diputats --from-file etl/data/raw/samples/corts_valencianes_diputats_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_clm_diputados --from-file etl/data/raw/samples/cortes_clm_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_cyl_procuradores --from-file etl/data/raw/samples/cortes_cyl_procuradores_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_andalucia_diputados --from-file etl/data/raw/samples/parlamento_andalucia_diputados_sample.json --snapshot-date {{snapshot_date}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_vasco_parlamentarios --from-file etl/data/raw/samples/parlamento_vasco_parlamentarios_sample.json --snapshot-date {{snapshot_date}}"

parl-init:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py init-db --db {{db_path}}"

parl-samples:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_votaciones --from-file etl/data/raw/samples/congreso_votaciones_sample.json --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_iniciativas --from-file etl/data/raw/samples/congreso_iniciativas_sample.json --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source senado_iniciativas --from-file etl/data/raw/samples/senado_iniciativas_sample.xml --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source senado_votaciones --from-file etl/data/raw/samples/senado_votaciones_sample.xml --snapshot-date {{snapshot_date}} --strict-network"

etl-stats:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py stats --db {{db_path}}"

etl-backfill-normalized:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py backfill-normalized --db {{db_path}}"

etl-backfill-territories:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py backfill-territories --db {{db_path}}"

etl-backfill-policy-events-moncloa:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py backfill-policy-events-moncloa --db {{db_path}}"

etl-backfill-policy-events-boe:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py backfill-policy-events-boe --db {{db_path}}"

etl-test:
  docker compose run --rm --build etl "python3 -m unittest discover -s tests -v"

etl-live:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source all --snapshot-date {{snapshot_date}} --timeout {{municipal_timeout}}"

etl-elecciones:
  docker compose run --rm --build etl "python3 scripts/generar_proximas_elecciones_espana.py --today {{snapshot_date}}"

etl-publish-representantes:
  docker compose run --rm --build etl "python3 scripts/publicar_representantes_es.py --db {{db_path}} --snapshot-date {{snapshot_date}}"

etl-publish-votaciones:
  docker compose run --rm --build etl "python3 scripts/publicar_votaciones_es.py --db {{db_path}} --snapshot-date {{snapshot_date}}"

etl-publish-votaciones-unmatched:
  docker compose run --rm --build etl "python3 scripts/publicar_votaciones_es.py --db {{db_path}} --snapshot-date {{snapshot_date}} --include-unmatched --unmatched-sample-limit 100"

etl-publish-infoelectoral:
  docker compose run --rm --build etl "python3 scripts/publicar_infoelectoral_es.py --db {{db_path}} --snapshot-date {{snapshot_date}}"

etl-publish-hf:
  python3 scripts/check_public_privacy_leaks.py --path etl/data/published
  sqlite_arg="--skip-sqlite-gz"; \
  sensitive_arg=""; \
  quality_arg=""; \
  liberty_atlas_arg=""; \
  if [ "{{hf_include_sqlite_gz}}" = "1" ]; then sqlite_arg=""; fi; \
  if [ "{{hf_allow_sensitive_parquet}}" = "1" ]; then sensitive_arg="--allow-sensitive-parquet"; fi; \
  if [ "{{hf_require_quality_report}}" = "1" ]; then quality_arg="--require-quality-report"; fi; \
  if [ "{{hf_require_liberty_atlas_release_latest}}" = "1" ]; then liberty_atlas_arg="--require-liberty-atlas-release-latest"; fi; \
  docker compose run --rm --build etl "python3 scripts/publicar_hf_snapshot.py --db {{db_path}} --snapshot-date {{snapshot_date}} --dataset-repo {{hf_dataset_repo_id}} --parquet-compression {{hf_parquet_compression}} --parquet-batch-rows {{hf_parquet_batch_rows}} --parquet-tables '{{hf_parquet_tables}}' --parquet-exclude-tables '{{hf_parquet_exclude_tables}}' ${sqlite_arg} ${sensitive_arg} ${quality_arg} ${liberty_atlas_arg}"

etl-publish-hf-dry-run:
  python3 scripts/check_public_privacy_leaks.py --path etl/data/published
  sqlite_arg="--skip-sqlite-gz"; \
  sensitive_arg=""; \
  quality_arg=""; \
  liberty_atlas_arg=""; \
  if [ "{{hf_include_sqlite_gz}}" = "1" ]; then sqlite_arg=""; fi; \
  if [ "{{hf_allow_sensitive_parquet}}" = "1" ]; then sensitive_arg="--allow-sensitive-parquet"; fi; \
  if [ "{{hf_require_quality_report}}" = "1" ]; then quality_arg="--require-quality-report"; fi; \
  if [ "{{hf_require_liberty_atlas_release_latest}}" = "1" ]; then liberty_atlas_arg="--require-liberty-atlas-release-latest"; fi; \
  docker compose run --rm --build etl "python3 scripts/publicar_hf_snapshot.py --db {{db_path}} --snapshot-date {{snapshot_date}} --dataset-repo {{hf_dataset_repo_id}} --parquet-compression {{hf_parquet_compression}} --parquet-batch-rows {{hf_parquet_batch_rows}} --parquet-tables '{{hf_parquet_tables}}' --parquet-exclude-tables '{{hf_parquet_exclude_tables}}' --dry-run ${sqlite_arg} ${sensitive_arg} ${quality_arg} ${liberty_atlas_arg}"

etl-verify-hf-quality:
  out_arg=""; \
  if [ -n "{{hf_verify_out}}" ]; then out_arg="--json-out {{hf_verify_out}}"; fi; \
  docker compose run --rm --build etl "python3 scripts/verify_hf_snapshot_quality.py --dataset-repo {{hf_dataset_repo_id}} --snapshot-date {{snapshot_date}} --timeout {{hf_verify_timeout}} ${out_arg}"

etl-publish-hf-verify:
  just etl-publish-hf
  just etl-verify-hf-quality

etl-publish-hf-raw:
  manual_arg=""; \
  if [ "{{hf_raw_include_manual}}" = "1" ]; then manual_arg="--include-manual"; fi; \
  docker compose run --rm --build etl "python3 scripts/publicar_hf_raw_blocks.py --raw-dir etl/data/raw --snapshot-date {{snapshot_date}} --dataset-repo {{hf_raw_dataset_repo_id}} --max-files-per-block {{hf_raw_max_files_per_block}} ${manual_arg}"

etl-publish-hf-raw-dry-run:
  manual_arg=""; \
  if [ "{{hf_raw_include_manual}}" = "1" ]; then manual_arg="--include-manual"; fi; \
  docker compose run --rm --build etl "python3 scripts/publicar_hf_raw_blocks.py --raw-dir etl/data/raw --snapshot-date {{snapshot_date}} --dataset-repo {{hf_raw_dataset_repo_id}} --max-files-per-block {{hf_raw_max_files_per_block}} --dry-run ${manual_arg}"

parl-extract-congreso-votaciones:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_votaciones --snapshot-date {{snapshot_date}} --strict-network"

parl-extract-congreso-iniciativas:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_iniciativas --snapshot-date {{snapshot_date}} --strict-network"

parl-extract-congreso-intervenciones:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_intervenciones --snapshot-date {{snapshot_date}} --strict-network"

parl-extract-senado-iniciativas:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source senado_iniciativas --snapshot-date {{snapshot_date}} --strict-network"

parl-extract-senado-votaciones:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source senado_votaciones --snapshot-date {{snapshot_date}} --strict-network"

parl-senado-export-missing-detail-urls:
  mkdir -p "{{senado_manual_detail_dir}}"
  python3 scripts/export_senado_missing_detail_urls.py --db {{db_path}} --mode session --legislature {{senado_detail_legislatures}} --validate --validate-timeout 5 > "{{senado_missing_detail_urls_file}}"
  @echo "OK wrote {{senado_missing_detail_urls_file}}"

parl-senado-export-missing-detail-urls-vote:
  mkdir -p "{{senado_manual_detail_dir}}"
  python3 scripts/export_senado_missing_detail_urls.py --db {{db_path}} --mode vote --legislature {{senado_detail_legislatures}} > "{{senado_missing_detail_urls_file}}"
  @echo "OK wrote {{senado_missing_detail_urls_file}}"

parl-senado-download-missing-details:
  test -f "{{senado_missing_detail_urls_file}}" || (echo "Missing SENADO_MISSING_DETAIL_URLS_FILE: {{senado_missing_detail_urls_file}}" && exit 2)
  mkdir -p "{{senado_manual_detail_dir}}"
  python3 scripts/download_senado_missing_detail_urls_headful.py \
    --urls-file "{{senado_missing_detail_urls_file}}" \
    --out-dir "{{senado_manual_detail_dir}}" \
    --timeout "{{senado_manual_download_timeout}}" \
    --headful-timeout "{{senado_headful_timeout}}" \
    --headful-wait-seconds "{{senado_headful_wait_seconds}}" \
    --channel "{{senado_headful_channel}}" \
    --user-data-dir "{{senado_headful_user_data_dir}}" \
    --cookie "${SENADO_DETAIL_COOKIE:-}" \
    --viewport "{{senado_headful_viewport}}"

parl-backfill-senado-details-manual:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-senado-details --db {{db_path}} --auto --legislature {{senado_detail_legislatures}} --max-events {{senado_detail_max_events}} --max-loops {{senado_detail_max_loops}} --timeout {{senado_detail_timeout}} --detail-workers {{senado_detail_workers}} --snapshot-date {{snapshot_date}} --senado-detail-dir {{senado_manual_detail_dir}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --source-ids senado_votaciones --json-out etl/data/published/votaciones-kpis-senado-{{snapshot_date}}.json"

parl-senado-manual-pipeline:
  just parl-senado-export-missing-detail-urls
  just parl-senado-download-missing-details
  just parl-backfill-senado-details-manual

parl-backfill-senado-details:
  senado_detail_arg=""; \
  if [ -n "{{senado_detail_dir}}" ]; then \
    senado_detail_arg=" --senado-detail-dir {{senado_detail_dir}}"; \
  fi; \
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-senado-details --db {{db_path}} --auto --legislature {{senado_detail_legislatures}} --max-events {{senado_detail_max_events}} --max-loops {{senado_detail_max_loops}} --timeout {{senado_detail_timeout}} --detail-workers {{senado_detail_workers}} --snapshot-date {{snapshot_date}}${senado_detail_arg}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --source-ids senado_votaciones --json-out etl/data/published/votaciones-kpis-senado-{{snapshot_date}}.json"

parl-senado-tail-daemon:
  DB_PATH={{db_path}} \
  COOKIE_FILE={{senado_tail_cookie_file}} \
  BURST_LIMIT={{senado_tail_burst_limit}} \
  WIDE_LIMIT={{senado_tail_wide_limit}} \
  TIMEOUT_SECS={{senado_tail_timeout}} \
  COOLDOWN_SECS={{senado_tail_cooldown}} \
  ACTIVE_SLEEP_SECS={{senado_tail_active_sleep}} \
  MAX_IDLE_ROUNDS={{senado_tail_max_idle_rounds}} \
  MAX_ROUNDS={{senado_tail_max_rounds}} \
  STOP_ON_UNIFORM_404={{senado_tail_stop_on_uniform_404}} \
  ARCHIVE_FALLBACK={{senado_tail_archive_fallback}} \
  ARCHIVE_TIMEOUT={{senado_tail_archive_timeout}} \
  bash scripts/senado_tail_daemon.sh

parl-link-votes:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py link-votes --db {{db_path}}"

parl-backfill-topic-analytics:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-topic-analytics --db {{db_path}} --as-of-date {{snapshot_date}} --taxonomy-seed {{topic_taxonomy_seed}}"

parl-backfill-text-documents:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-text-documents --db {{db_path}} --source-id congreso_intervenciones --limit {{textdoc_limit}} --only-missing --timeout {{textdoc_timeout}}"

parl-backfill-initiative-links:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-initiative-links --db {{db_path}} --source-ids congreso_iniciativas,senado_iniciativas"

parl-backfill-senado-detail-publication-links:
  docker compose run --rm --build etl "python3 scripts/backfill_senado_publication_links_from_detail_docs.py --db {{db_path}} --source-id senado_iniciativas --doc-source-id parl_initiative_docs --only-initiatives-with-missing-docs --limit {{senado_detail_links_limit}}"

parl-backfill-initiative-documents:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-initiative-documents --db {{db_path}} --initiative-source-ids congreso_iniciativas,senado_iniciativas --raw-dir etl/data/raw --timeout {{initdoc_timeout}} --snapshot-date {{snapshot_date}} --limit-initiatives {{initdoc_limit}} --max-docs-per-initiative {{initdoc_max_per}}"

parl-backfill-initiative-documents-auto:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-initiative-documents --db {{db_path}} --initiative-source-ids congreso_iniciativas,senado_iniciativas --raw-dir etl/data/raw --timeout {{initdoc_timeout}} --snapshot-date {{snapshot_date}} --limit-initiatives {{initdoc_limit}} --max-docs-per-initiative {{initdoc_max_per}} --auto --max-loops 50"

parl-backfill-initiative-documents-archive:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-initiative-documents --db {{db_path}} --initiative-source-ids senado_iniciativas --include-unlinked --retry-forbidden --archive-fallback --archive-timeout {{initdoc_archive_timeout}} --raw-dir etl/data/raw --timeout {{initdoc_timeout}} --snapshot-date {{snapshot_date}} --limit-initiatives {{initdoc_limit}} --max-docs-per-initiative {{initdoc_max_per}}"

parl-export-initdoc-analysis-queue:
  docker compose run --rm --build etl "python3 scripts/export_pdf_analysis_queue.py --db {{db_path}} --initiative-source-id {{initdoc_excerpt_scope}} --doc-source-id parl_initiative_docs --only-missing-excerpt --limit {{doc_analysis_limit}} --out {{doc_analysis_out}}"

parl-export-text-extraction-queue:
  python3 scripts/export_text_extraction_queue.py --db {{db_path}} --source-ids '{{text_extraction_queue_source_ids}}' --formats '{{text_extraction_queue_formats}}' --dedupe-by content_sha256 --limit {{text_extraction_queue_limit}} --out {{text_extraction_queue_out}} --summary-out {{text_extraction_queue_summary_out}}

parl-export-text-extraction-queue-missing:
  python3 scripts/export_text_extraction_queue.py --db {{db_path}} --source-ids '{{text_extraction_queue_source_ids}}' --formats '{{text_extraction_queue_formats}}' --only-missing-excerpt --dedupe-by content_sha256 --limit {{text_extraction_queue_limit}} --out {{text_extraction_queue_out}} --summary-out {{text_extraction_queue_summary_out}}

parl-backfill-initdoc-excerpts:
  docker compose run --rm --build etl "python3 scripts/backfill_initiative_doc_excerpts.py --db {{db_path}} --source-id parl_initiative_docs --initiative-source-id {{initdoc_excerpt_scope}}"

parl-backfill-initdoc-excerpts-all:
  docker compose run --rm --build etl "python3 scripts/backfill_initiative_doc_excerpts.py --db {{db_path}} --source-id parl_initiative_docs"

parl-backfill-initdoc-fetch-status:
  scope_arg=""; \
  if [ -n "{{initdoc_fetch_scope}}" ]; then \
    scope_arg=" --initiative-source-id {{initdoc_fetch_scope}}"; \
  fi; \
  docker compose run --rm --build etl "python3 scripts/backfill_initiative_doc_fetch_status.py --db {{db_path}} --source-id parl_initiative_docs${scope_arg}"

parl-report-initdoc-status:
  docker compose run --rm --build etl "python3 scripts/report_initiative_doc_status.py --db {{db_path}} --initiative-source-ids congreso_iniciativas,senado_iniciativas --doc-source-id parl_initiative_docs --missing-sample-limit {{initdoc_status_missing_sample_limit}} --out {{initdoc_status_out}}"

parl-export-missing-initdoc-urls-actionable:
  python3 scripts/export_missing_initiative_doc_urls.py --db {{db_path}} --initiative-source-ids '{{initdoc_missing_export_source_ids}}' --only-actionable-missing --format csv --out {{initdoc_missing_export_out}}

parl-check-missing-initdoc-urls-actionable-empty:
  python3 scripts/export_missing_initiative_doc_urls.py --db {{db_path}} --initiative-source-ids '{{initdoc_missing_export_source_ids}}' --only-actionable-missing --strict-empty --format csv --out {{initdoc_missing_export_out}}

parl-report-initdoc-actionable-tail-contract:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --out {{initdoc_actionable_contract_out}}

parl-check-initdoc-actionable-tail-contract:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --strict --out {{initdoc_actionable_contract_out}}

parl-report-initdoc-actionable-tail-digest:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --out {{initdoc_actionable_contract_out}}
  python3 scripts/report_initdoc_actionable_tail_digest.py --contract-json {{initdoc_actionable_contract_out}} --max-actionable-missing {{initdoc_actionable_digest_max_missing}} --max-actionable-missing-pct {{initdoc_actionable_digest_max_missing_pct}} --out {{initdoc_actionable_digest_out}}

parl-check-initdoc-actionable-tail-digest:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --out {{initdoc_actionable_contract_out}}
  python3 scripts/report_initdoc_actionable_tail_digest.py --contract-json {{initdoc_actionable_contract_out}} --max-actionable-missing {{initdoc_actionable_digest_max_missing}} --max-actionable-missing-pct {{initdoc_actionable_digest_max_missing_pct}} --strict --out {{initdoc_actionable_digest_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --out {{initdoc_actionable_contract_out}}
  python3 scripts/report_initdoc_actionable_tail_digest.py --contract-json {{initdoc_actionable_contract_out}} --max-actionable-missing {{initdoc_actionable_digest_max_missing}} --max-actionable-missing-pct {{initdoc_actionable_digest_max_missing_pct}} --out {{initdoc_actionable_digest_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat.py --digest-json {{initdoc_actionable_digest_out}} --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --out {{initdoc_actionable_heartbeat_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat:
  python3 scripts/report_initdoc_actionable_tail_contract.py --db {{db_path}} --initiative-source-ids '{{initdoc_actionable_contract_source_ids}}' --out {{initdoc_actionable_contract_out}}
  python3 scripts/report_initdoc_actionable_tail_digest.py --contract-json {{initdoc_actionable_contract_out}} --max-actionable-missing {{initdoc_actionable_digest_max_missing}} --max-actionable-missing-pct {{initdoc_actionable_digest_max_missing_pct}} --out {{initdoc_actionable_digest_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat.py --digest-json {{initdoc_actionable_digest_out}} --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --strict --out {{initdoc_actionable_heartbeat_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --last {{initdoc_actionable_heartbeat_window_last}} --max-failed {{initdoc_actionable_heartbeat_window_max_failed}} --max-failed-rate-pct {{initdoc_actionable_heartbeat_window_max_failed_rate_pct}} --max-degraded {{initdoc_actionable_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{initdoc_actionable_heartbeat_window_max_degraded_rate_pct}} --out {{initdoc_actionable_heartbeat_window_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --last {{initdoc_actionable_heartbeat_window_last}} --max-failed {{initdoc_actionable_heartbeat_window_max_failed}} --max-failed-rate-pct {{initdoc_actionable_heartbeat_window_max_failed_rate_pct}} --max-degraded {{initdoc_actionable_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{initdoc_actionable_heartbeat_window_max_degraded_rate_pct}} --strict --out {{initdoc_actionable_heartbeat_window_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --keep-recent {{initdoc_actionable_heartbeat_compact_recent}} --keep-mid-span {{initdoc_actionable_heartbeat_compact_mid_span}} --keep-mid-every {{initdoc_actionable_heartbeat_compact_mid_every}} --keep-old-every {{initdoc_actionable_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{initdoc_actionable_heartbeat_compact_min_raw}} --out {{initdoc_actionable_heartbeat_compact_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --keep-recent {{initdoc_actionable_heartbeat_compact_recent}} --keep-mid-span {{initdoc_actionable_heartbeat_compact_mid_span}} --keep-mid-every {{initdoc_actionable_heartbeat_compact_mid_every}} --keep-old-every {{initdoc_actionable_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{initdoc_actionable_heartbeat_compact_min_raw}} --strict --out {{initdoc_actionable_heartbeat_compact_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --strict --out {{initdoc_actionable_heartbeat_compact_window_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_out}} --out {{initdoc_actionable_heartbeat_compact_window_digest_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_out}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_out}} --out {{initdoc_actionable_heartbeat_compact_window_digest_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat.py --digest-json {{initdoc_actionable_heartbeat_compact_window_digest_out}} --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_out}} --out {{initdoc_actionable_heartbeat_compact_window_digest_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat.py --digest-json {{initdoc_actionable_heartbeat_compact_window_digest_out}} --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_last}} --max-failed {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed}} --max-failed-rate-pct {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed_rate_pct}} --max-degraded {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded_rate_pct}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_last}} --max-failed {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed}} --max-failed-rate-pct {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_failed_rate_pct}} --max-degraded {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_max_degraded_rate_pct}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_window_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --keep-recent {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_recent}} --keep-mid-span {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_span}} --keep-mid-every {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_every}} --keep-old-every {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_min_raw}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --keep-recent {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_recent}} --keep-mid-span {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_span}} --keep-mid-every {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_mid_every}} --keep-old-every {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_min_raw}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact-window:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}}

parl-report-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact-window-digest:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out}}

parl-check-initdoc-actionable-tail-digest-heartbeat-compact-window-digest-heartbeat-compact-window-digest:
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}}
  python3 scripts/report_initdoc_actionable_tail_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_out}} --strict --out {{initdoc_actionable_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out}}

parl-backfill-initdoc-extractions:
  python3 scripts/backfill_initiative_doc_extractions.py --db {{db_path}} --doc-source-id parl_initiative_docs --initiative-source-ids '{{initdoc_extract_scope}}' --extractor-version heuristic_subject_v2 --limit {{initdoc_extract_limit}} --out {{initdoc_extract_out}}

parl-backfill-initdoc-extractions-missing:
  python3 scripts/backfill_initiative_doc_extractions.py --db {{db_path}} --doc-source-id parl_initiative_docs --initiative-source-ids '{{initdoc_extract_scope}}' --extractor-version heuristic_subject_v2 --only-missing --limit {{initdoc_extract_limit}} --out {{initdoc_extract_out}}

parl-export-initdoc-extraction-review-queue:
  python3 scripts/export_initdoc_extraction_review_queue.py --db {{db_path}} --source-id parl_initiative_docs --only-needs-review --limit {{initdoc_extract_review_limit}} --out {{initdoc_extract_review_out}}

parl-apply-initdoc-extraction-reviews:
  test -n "{{initdoc_extract_review_apply_file}}" || (echo "Set INITDOC_EXTRACT_REVIEW_APPLY_FILE=<csv_path>" && exit 2)
  python3 scripts/apply_initdoc_extraction_reviews.py --db {{db_path}} --source-id parl_initiative_docs --in "{{initdoc_extract_review_apply_file}}" --out {{initdoc_extract_review_apply_out}}

parl-apply-initdoc-extraction-reviews-dry-run:
  test -n "{{initdoc_extract_review_apply_file}}" || (echo "Set INITDOC_EXTRACT_REVIEW_APPLY_FILE=<csv_path>" && exit 2)
  python3 scripts/apply_initdoc_extraction_reviews.py --db {{db_path}} --source-id parl_initiative_docs --in "{{initdoc_extract_review_apply_file}}" --dry-run --out {{initdoc_extract_review_apply_out}}

parl-backfill-declared-stance:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-declared-stance --db {{db_path}} --source-id {{declared_source_id}} --min-auto-confidence {{declared_min_auto_confidence}}"

parl-backfill-declared-positions:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-declared-positions --db {{db_path}} --source-id {{declared_source_id}} --as-of-date {{snapshot_date}}"

parl-report-declared-source-status:
  out_arg=""; \
  if [ -n "{{declared_status_out}}" ]; then \
    out_arg=" --out {{declared_status_out}}"; \
  fi; \
  python3 scripts/report_declared_source_status.py --db {{db_path}} --source-id {{declared_source_id}}${out_arg}

parl-programas-status:
  python3 scripts/report_declared_source_status.py --db {{db_path}} --source-id programas_partidos --out {{programas_status_out}}

parl-validate-programas-manifest:
  require_local_arg=""; \
  if [ "{{programas_manifest_require_local_path}}" = "1" ]; then \
    require_local_arg=" --require-local-path"; \
  fi; \
  python3 scripts/validate_programas_manifest.py --manifest {{programas_manifest}} --out {{programas_manifest_validate_out}}${require_local_arg}

parl-validate-sanction-norms-seed:
  PYTHONPATH=. python3 scripts/validate_sanction_norms_seed.py --seed {{sanction_norms_seed}} --out {{sanction_norms_seed_validate_out}}

parl-import-sanction-norms-seed:
  PYTHONPATH=. python3 scripts/import_sanction_norms_seed.py --db {{db_path}} --seed {{sanction_norms_seed}} --snapshot-date {{snapshot_date}} --source-id {{sanction_norms_seed_source_id}} --out {{sanction_norms_seed_import_out}}

parl-report-sanction-norms-seed-status:
  PYTHONPATH=. python3 scripts/report_sanction_norms_seed_status.py --db {{db_path}} --sample-limit {{sanction_norms_seed_status_sample_limit}} --out {{sanction_norms_seed_status_out}}

parl-report-sanction-norms-vote-gap-diagnosis:
  PYTHONPATH=. python3 scripts/report_sanction_norms_vote_gap_diagnosis.py --db {{db_path}} --roles {{sanction_norms_vote_gap_diagnosis_roles}} --out {{sanction_norms_vote_gap_diagnosis_out}}

parl-export-sanction-norms-seed-source-record-upgrade-queue:
  PYTHONPATH=. python3 scripts/export_sanction_norms_seed_source_record_upgrade_queue.py --db {{db_path}} --seed-schema-version {{sanction_norms_seed_source_record_upgrade_queue_seed_schema_version}} --limit {{sanction_norms_seed_source_record_upgrade_queue_limit}} --out {{sanction_norms_seed_source_record_upgrade_queue_out}} --csv-out {{sanction_norms_seed_source_record_upgrade_queue_csv_out}}

parl-backfill-sanction-norms-boe-source-records:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_boe_source_records.py --db {{db_path}} --source-id {{sanction_norms_seed_source_id}} --seed-schema-version {{sanction_norms_seed_source_record_upgrade_queue_seed_schema_version}} --timeout {{sanction_norms_boe_backfill_timeout}} --limit {{sanction_norms_boe_backfill_limit}} --strict-network --out {{sanction_norms_boe_backfill_out}}

parl-apply-sanction-norms-source-record-upgrade:
  dry_arg=""; \
  if [ "{{sanction_norms_source_record_upgrade_apply_dry_run}}" = "1" ]; then \
    dry_arg=" --dry-run"; \
  fi; \
  PYTHONPATH=. python3 scripts/apply_sanction_norms_seed_source_record_upgrade_queue.py --db {{db_path}} --seed-schema-version {{sanction_norms_seed_source_record_upgrade_queue_seed_schema_version}} --limit {{sanction_norms_source_record_upgrade_apply_limit}} --out {{sanction_norms_source_record_upgrade_apply_out}}${dry_arg}

parl-backfill-sanction-norms-parliamentary-evidence:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_parliamentary_evidence.py --db {{db_path}} --roles {{sanction_norms_parliamentary_evidence_roles}} --limit {{sanction_norms_parliamentary_evidence_limit}} --out {{sanction_norms_parliamentary_evidence_out}}

parl-backfill-sanction-norms-vote-evidence:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_vote_evidence.py --db {{db_path}} --roles {{sanction_norms_vote_evidence_roles}} --limit-events {{sanction_norms_vote_evidence_limit_events}} --out {{sanction_norms_vote_evidence_out}}

parl-backfill-sanction-norms-execution-evidence:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_execution_evidence.py --db {{db_path}} --roles {{sanction_norms_execution_evidence_roles}} --limit {{sanction_norms_execution_evidence_limit}} --out {{sanction_norms_execution_evidence_out}}

parl-backfill-sanction-norms-execution-lineage-evidence:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_execution_lineage_evidence.py --db {{db_path}} --roles {{sanction_norms_execution_lineage_evidence_roles}} --limit {{sanction_norms_execution_lineage_evidence_limit}} --out {{sanction_norms_execution_lineage_evidence_out}}

parl-backfill-sanction-norms-procedural-metric-evidence:
  PYTHONPATH=. python3 scripts/backfill_sanction_norms_procedural_metric_evidence.py --db {{db_path}} --roles {{sanction_norms_procedural_metric_evidence_roles}} --limit {{sanction_norms_procedural_metric_evidence_limit}} --out {{sanction_norms_procedural_metric_evidence_out}}

parl-sanction-norms-seed-pipeline:
  just parl-validate-sanction-norms-seed
  just parl-import-sanction-norms-seed
  just parl-report-sanction-norms-seed-status
  just parl-export-sanction-norms-seed-source-record-upgrade-queue

parl-test-sanction-norms-seed:
  python3 -m unittest tests/test_validate_sanction_norms_seed.py tests/test_import_sanction_norms_seed.py tests/test_report_sanction_norms_seed_status.py tests/test_report_sanction_norms_vote_gap_diagnosis.py tests/test_export_sanction_norms_seed_source_record_upgrade_queue.py tests/test_backfill_sanction_norms_boe_source_records.py tests/test_apply_sanction_norms_seed_source_record_upgrade_queue.py tests/test_backfill_sanction_norms_parliamentary_evidence.py tests/test_backfill_sanction_norms_vote_evidence.py tests/test_backfill_sanction_norms_execution_evidence.py tests/test_backfill_sanction_norms_execution_lineage_evidence.py tests/test_backfill_sanction_norms_procedural_metric_evidence.py

parl-validate-sanction-data-catalog-seed:
  PYTHONPATH=. python3 scripts/validate_sanction_data_catalog_seed.py --seed {{sanction_data_catalog_seed}} --out {{sanction_data_catalog_validate_out}}

parl-import-sanction-data-catalog-seed:
  PYTHONPATH=. python3 scripts/import_sanction_data_catalog_seed.py --db {{db_path}} --seed {{sanction_data_catalog_seed}} --snapshot-date {{snapshot_date}} --source-id {{sanction_data_catalog_source_id}} --out {{sanction_data_catalog_import_out}}

parl-report-sanction-data-catalog-status:
  PYTHONPATH=. python3 scripts/report_sanction_data_catalog_status.py --db {{db_path}} --sample-limit {{sanction_data_catalog_status_sample_limit}} --out {{sanction_data_catalog_status_out}}

parl-report-sanction-procedural-official-review-status:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_status_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_status_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_status_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_status_period_granularity}}"; \
  fi; \
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_status.py --db {{db_path}} --queue-limit {{sanction_procedural_official_review_status_queue_limit}} --csv-out {{sanction_procedural_official_review_status_csv_out}} --out {{sanction_procedural_official_review_status_out}}${period_args}

parl-export-sanction-procedural-official-review-kpi-gap-queue:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_kpi_gap_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_kpi_gap_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_kpi_gap_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_kpi_gap_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_kpi_gap_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_empty_arg=""; \
  if [ "{{sanction_procedural_official_review_kpi_gap_strict_empty}}" = "1" ]; then \
    strict_empty_arg=" --strict-empty"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_kpi_gap_queue.py --db {{db_path}} --queue-limit {{sanction_procedural_official_review_kpi_gap_queue_limit}} --csv-out {{sanction_procedural_official_review_kpi_gap_csv_out}} --out {{sanction_procedural_official_review_kpi_gap_out}}${period_args}${include_ready_arg}${strict_empty_arg}

parl-export-sanction-procedural-official-review-apply-from-kpi-gap-queue:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_apply_from_gap_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_apply_from_gap_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_apply_from_gap_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_apply_from_gap_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_apply_from_gap_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_apply_from_gap_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_apply_from_kpi_gap_queue.py --db {{db_path}} --source-id {{sanction_procedural_official_review_apply_from_gap_source_id}} --queue-limit {{sanction_procedural_official_review_apply_from_gap_queue_limit}} --statuses "{{sanction_procedural_official_review_apply_from_gap_statuses}}" --out {{sanction_procedural_official_review_apply_from_gap_out}} --summary-out {{sanction_procedural_official_review_apply_from_gap_summary_out}}${period_args}${include_ready_arg}${strict_actionable_arg}

parl-export-sanction-procedural-official-review-raw-packets-from-kpi-gap-queue:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_raw_packets_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_raw_packets_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_raw_packets_from_kpi_gap_queue.py --db {{db_path}} --source-id {{sanction_procedural_official_review_raw_packets_source_id}} --queue-limit {{sanction_procedural_official_review_raw_packets_queue_limit}} --statuses "{{sanction_procedural_official_review_raw_packets_statuses}}" --out-dir {{sanction_procedural_official_review_raw_packets_out_dir}} --summary-out {{sanction_procedural_official_review_raw_packets_summary_out}}${period_args}${include_ready_arg}${strict_actionable_arg}

parl-report-sanction-procedural-official-review-raw-packets-progress:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_progress_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_raw_packets_progress_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_progress_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_raw_packets_progress_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_progress_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_progress_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_progress_strict_ready}}" = "1" ]; then \
    strict_ready_arg=" --strict-ready"; \
  fi; \
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_raw_packets_progress.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_raw_packets_progress_packets_dir}} --source-id {{sanction_procedural_official_review_raw_packets_progress_source_id}} --queue-limit {{sanction_procedural_official_review_raw_packets_progress_queue_limit}} --statuses "{{sanction_procedural_official_review_raw_packets_progress_statuses}}" --csv-out {{sanction_procedural_official_review_raw_packets_progress_csv_out}} --out {{sanction_procedural_official_review_raw_packets_progress_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_ready_arg}

parl-export-sanction-procedural-official-review-packet-fix-queue:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_queue_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_packet_fix_queue_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_queue_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_packet_fix_queue_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_queue_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_empty_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_queue_strict_empty}}" = "1" ]; then \
    strict_empty_arg=" --strict-empty"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_packet_fix_queue.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_packet_fix_queue_packets_dir}} --source-id {{sanction_procedural_official_review_packet_fix_queue_source_id}} --queue-limit {{sanction_procedural_official_review_packet_fix_queue_queue_limit}} --statuses "{{sanction_procedural_official_review_packet_fix_queue_statuses}}" --csv-out {{sanction_procedural_official_review_packet_fix_queue_csv_out}} --out {{sanction_procedural_official_review_packet_fix_queue_out}}${period_args}${include_ready_arg}${strict_empty_arg}

parl-run-sanction-procedural-official-review-packet-fix-ready-cycle:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_ready_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_packet_fix_ready_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_ready_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_packet_fix_ready_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_fix_empty_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_fix_empty}}" = "1" ]; then \
    strict_fix_empty_arg=" --strict-fix-empty"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_min_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_min_ready}}" = "1" ]; then \
    strict_min_ready_arg=" --strict-min-ready"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_packet_fix_ready_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_packet_fix_ready_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_packet_fix_ready_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_packet_fix_ready_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_packet_fix_ready_cycle_statuses}}" --min-ready-packets {{sanction_procedural_official_review_packet_fix_ready_cycle_min_ready_packets}} --fix-csv-out {{sanction_procedural_official_review_packet_fix_ready_cycle_fix_csv_out}} --fix-out {{sanction_procedural_official_review_packet_fix_ready_cycle_fix_out}} --raw-in-out {{sanction_procedural_official_review_packet_fix_ready_cycle_raw_in_out}} --progress-out {{sanction_procedural_official_review_packet_fix_ready_cycle_progress_out}} --ready-cycle-out {{sanction_procedural_official_review_packet_fix_ready_cycle_ready_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --out {{sanction_procedural_official_review_packet_fix_ready_cycle_out}}${period_args}${include_ready_arg}${strict_fix_empty_arg}${strict_actionable_arg}${strict_min_ready_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-packet-fix-ready-cycle-dry-run:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_ready_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_packet_fix_ready_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_packet_fix_ready_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_packet_fix_ready_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_fix_empty_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_fix_empty}}" = "1" ]; then \
    strict_fix_empty_arg=" --strict-fix-empty"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_min_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_min_ready}}" = "1" ]; then \
    strict_min_ready_arg=" --strict-min-ready"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_packet_fix_ready_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_packet_fix_ready_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_packet_fix_ready_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_packet_fix_ready_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_packet_fix_ready_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_packet_fix_ready_cycle_statuses}}" --min-ready-packets {{sanction_procedural_official_review_packet_fix_ready_cycle_min_ready_packets}} --fix-csv-out {{sanction_procedural_official_review_packet_fix_ready_cycle_fix_csv_out}} --fix-out {{sanction_procedural_official_review_packet_fix_ready_cycle_fix_out}} --raw-in-out {{sanction_procedural_official_review_packet_fix_ready_cycle_raw_in_out}} --progress-out {{sanction_procedural_official_review_packet_fix_ready_cycle_progress_out}} --ready-cycle-out {{sanction_procedural_official_review_packet_fix_ready_cycle_ready_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --dry-run --out {{sanction_procedural_official_review_packet_fix_ready_cycle_out}}${period_args}${include_ready_arg}${strict_fix_empty_arg}${strict_actionable_arg}${strict_min_ready_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat.py --fix-queue-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_fix_queue_json}} --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_path}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-window:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window}} --max-failed {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_failed}} --max-failed-rate-pct {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_failed_rate_pct}} --max-degraded {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_degraded_rate_pct}} --max-nonempty-queue-runs {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_nonempty_queue_runs}} --max-nonempty-queue-rate-pct {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_nonempty_queue_rate_pct}} --max-malformed {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_max_malformed}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_window_out}}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_path}} --keep-recent {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_recent}} --keep-mid-span {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_mid_span}} --keep-mid-every {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_mid_every}} --keep-old-every {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_min_raw}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_last}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_out}}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest.py --compaction-window-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_in}} --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest.py --compaction-window-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_in}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_out}}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat.py --digest-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_digest_json}} --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-window:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window}} --max-failed {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_failed}} --max-failed-rate-pct {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_failed_rate_pct}} --max-degraded {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_degraded}} --max-degraded-rate-pct {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_max_degraded_rate_pct}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_window_out}}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_path}} --keep-recent {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_recent}} --keep-mid-span {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_mid_span}} --keep-mid-every {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_mid_every}} --keep-old-every {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_old_every}} --min-raw-for-dropped-check {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_min_raw}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction-window:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out}}

parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction-window-digest:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out}}
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out}} --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out}}

parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction-window-digest:
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window.py --heartbeat-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_path}} --compacted-jsonl {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_path}} --last {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_last}} --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out}}
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest.py --compaction-window-json {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_out}} --strict --out {{sanction_procedural_official_review_packet_fix_queue_heartbeat_compact_window_digest_heartbeat_compact_window_digest_out}}

parl-run-sanction-procedural-official-review-ready-packets-cycle:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_ready_packets_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_ready_packets_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_ready_packets_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_ready_packets_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_min_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_min_ready}}" = "1" ]; then \
    strict_min_ready_arg=" --strict-min-ready"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_ready_packets_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_ready_packets_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_ready_packets_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_ready_packets_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_ready_packets_cycle_statuses}}" --min-ready-packets {{sanction_procedural_official_review_ready_packets_cycle_min_ready_packets}} --raw-in-out {{sanction_procedural_official_review_ready_packets_cycle_raw_in_out}} --progress-out {{sanction_procedural_official_review_ready_packets_cycle_progress_out}} --cycle-out {{sanction_procedural_official_review_ready_packets_cycle_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --out {{sanction_procedural_official_review_ready_packets_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_min_ready_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-ready-packets-cycle-dry-run:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_ready_packets_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_ready_packets_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_ready_packets_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_ready_packets_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_min_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_min_ready}}" = "1" ]; then \
    strict_min_ready_arg=" --strict-min-ready"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_ready_packets_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_ready_packets_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_ready_packets_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_ready_packets_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_ready_packets_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_ready_packets_cycle_statuses}}" --min-ready-packets {{sanction_procedural_official_review_ready_packets_cycle_min_ready_packets}} --raw-in-out {{sanction_procedural_official_review_ready_packets_cycle_raw_in_out}} --progress-out {{sanction_procedural_official_review_ready_packets_cycle_progress_out}} --cycle-out {{sanction_procedural_official_review_ready_packets_cycle_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --dry-run --out {{sanction_procedural_official_review_ready_packets_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_min_ready_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-raw-packets-cycle:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_raw_packets_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_raw_packets_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_packet_coverage_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_packet_coverage}}" = "1" ]; then \
    strict_packet_coverage_arg=" --strict-packet-coverage"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_raw_packets_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_raw_packets_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_raw_packets_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_raw_packets_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_raw_packets_cycle_statuses}}" --raw-in-out {{sanction_procedural_official_review_raw_packets_cycle_raw_in_out}} --packets-out {{sanction_procedural_official_review_raw_packets_cycle_packets_out}} --cycle-out {{sanction_procedural_official_review_raw_packets_cycle_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --out {{sanction_procedural_official_review_raw_packets_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_packet_coverage_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-raw-packets-cycle-dry-run:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_raw_packets_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_raw_packets_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_raw_packets_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_packet_coverage_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_packet_coverage}}" = "1" ]; then \
    strict_packet_coverage_arg=" --strict-packet-coverage"; \
  fi; \
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_packets_cycle_strict_readiness}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_raw_packets_cycle.py --db {{db_path}} --packets-dir {{sanction_procedural_official_review_raw_packets_cycle_packets_dir}} --source-id {{sanction_procedural_official_review_raw_packets_cycle_source_id}} --queue-limit {{sanction_procedural_official_review_raw_packets_cycle_queue_limit}} --statuses "{{sanction_procedural_official_review_raw_packets_cycle_statuses}}" --raw-in-out {{sanction_procedural_official_review_raw_packets_cycle_raw_in_out}} --packets-out {{sanction_procedural_official_review_raw_packets_cycle_packets_out}} --cycle-out {{sanction_procedural_official_review_raw_packets_cycle_cycle_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --status-queue-limit {{sanction_procedural_official_review_status_queue_limit}} --dry-run --out {{sanction_procedural_official_review_raw_packets_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_packet_coverage_arg}${strict_raw_arg}${strict_prepare_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-apply-from-kpi-gap-cycle:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_gap_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_gap_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_gap_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_gap_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_gap_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_gap_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_readiness_strict}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_apply_from_kpi_gap_cycle.py --db {{db_path}} --statuses "{{sanction_procedural_official_review_gap_cycle_statuses}}" --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --queue-limit {{sanction_procedural_official_review_gap_cycle_queue_limit}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --gap-out {{sanction_procedural_official_review_gap_cycle_gap_out}} --apply-out {{sanction_procedural_official_review_gap_cycle_apply_out}} --cycle-out {{sanction_procedural_official_review_gap_cycle_cycle_out}} --out {{sanction_procedural_official_review_gap_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_readiness_arg}

parl-run-sanction-procedural-official-review-apply-from-kpi-gap-cycle-dry-run:
  period_args=""; \
  if [ -n "{{sanction_procedural_official_review_gap_cycle_period_date}}" ]; then \
    period_args="${period_args} --period-date {{sanction_procedural_official_review_gap_cycle_period_date}}"; \
  fi; \
  if [ -n "{{sanction_procedural_official_review_gap_cycle_period_granularity}}" ]; then \
    period_args="${period_args} --period-granularity {{sanction_procedural_official_review_gap_cycle_period_granularity}}"; \
  fi; \
  include_ready_arg=""; \
  if [ "{{sanction_procedural_official_review_gap_cycle_include_ready}}" = "1" ]; then \
    include_ready_arg=" --include-ready"; \
  fi; \
  strict_actionable_arg=""; \
  if [ "{{sanction_procedural_official_review_gap_cycle_strict_actionable}}" = "1" ]; then \
    strict_actionable_arg=" --strict-actionable"; \
  fi; \
  strict_readiness_arg=""; \
  if [ "{{sanction_procedural_official_review_readiness_strict}}" = "1" ]; then \
    strict_readiness_arg=" --strict-readiness"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_apply_from_kpi_gap_cycle.py --db {{db_path}} --statuses "{{sanction_procedural_official_review_gap_cycle_statuses}}" --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --queue-limit {{sanction_procedural_official_review_gap_cycle_queue_limit}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --gap-out {{sanction_procedural_official_review_gap_cycle_gap_out}} --apply-out {{sanction_procedural_official_review_gap_cycle_apply_out}} --cycle-out {{sanction_procedural_official_review_gap_cycle_cycle_out}} --dry-run --out {{sanction_procedural_official_review_gap_cycle_out}}${period_args}${include_ready_arg}${strict_actionable_arg}${strict_readiness_arg}

parl-apply-sanction-procedural-official-review-metrics:
  test -n "{{sanction_procedural_official_review_apply_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_IN=<csv_path>" && exit 2)
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_apply_cycle.py --db {{db_path}} --in "{{sanction_procedural_official_review_apply_in}}" --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --status-out {{sanction_procedural_official_review_apply_cycle_status_out}} --out {{sanction_procedural_official_review_apply_cycle_out}}

parl-apply-sanction-procedural-official-review-metrics-dry-run:
  test -n "{{sanction_procedural_official_review_apply_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_APPLY_IN=<csv_path>" && exit 2)
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_apply_cycle.py --db {{db_path}} --in "{{sanction_procedural_official_review_apply_in}}" --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --dry-run --status-out {{sanction_procedural_official_review_apply_cycle_status_out}} --out {{sanction_procedural_official_review_apply_cycle_out}}

parl-export-sanction-procedural-official-review-apply-template:
  only_missing_arg=""; \
  if [ "{{sanction_procedural_official_review_template_only_missing}}" = "1" ]; then \
    only_missing_arg=" --only-missing"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_apply_template.py --db {{db_path}} --period-date {{sanction_procedural_official_review_template_period_date}} --period-granularity {{sanction_procedural_official_review_template_period_granularity}} --source-id {{sanction_procedural_official_review_template_source_id}} --out {{sanction_procedural_official_review_template_out}} --summary-out {{sanction_procedural_official_review_template_summary_out}}${only_missing_arg}

parl-export-sanction-procedural-official-review-apply-from-raw:
  test -n "{{sanction_procedural_official_review_raw_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_IN=<csv_path>" && exit 2)
  strict_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_strict}}" = "1" ]; then \
    strict_arg=" --strict"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_apply_from_raw_metrics.py --in "{{sanction_procedural_official_review_raw_in}}" --out {{sanction_procedural_official_review_raw_out}} --rejected-csv-out {{sanction_procedural_official_review_raw_rejected_out}} --out-json {{sanction_procedural_official_review_raw_summary_out}} --default-source-id {{sanction_procedural_official_review_raw_default_source_id}} --default-period-granularity {{sanction_procedural_official_review_raw_default_period_granularity}}${strict_arg}

parl-export-sanction-procedural-official-review-raw-template:
  only_missing_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_template_only_missing}}" = "1" ]; then \
    only_missing_arg=" --only-missing"; \
  fi; \
  PYTHONPATH=. python3 scripts/export_sanction_procedural_official_review_raw_template.py --db {{db_path}} --period-date {{sanction_procedural_official_review_raw_template_period_date}} --period-granularity {{sanction_procedural_official_review_raw_template_period_granularity}} --source-id {{sanction_procedural_official_review_raw_template_source_id}} --out {{sanction_procedural_official_review_raw_template_out}} --summary-out {{sanction_procedural_official_review_raw_template_summary_out}}${only_missing_arg}

parl-run-sanction-procedural-official-review-raw-prepare-apply-cycle:
  test -n "{{sanction_procedural_official_review_raw_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_IN=<csv_path>" && exit 2)
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_prepare_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_raw_prepare_apply_cycle.py --db {{db_path}} --raw-in "{{sanction_procedural_official_review_raw_in}}" --apply-out {{sanction_procedural_official_review_raw_cycle_apply_out}} --raw-rejected-csv-out {{sanction_procedural_official_review_raw_cycle_raw_rejected_out}} --raw-out-json {{sanction_procedural_official_review_raw_cycle_raw_out}} --default-source-id {{sanction_procedural_official_review_raw_default_source_id}} --default-period-granularity {{sanction_procedural_official_review_raw_default_period_granularity}} --prepare-out {{sanction_procedural_official_review_prepare_out}} --prepare-rejected-csv-out {{sanction_procedural_official_review_prepare_rejected_out}} --prepare-out-json {{sanction_procedural_official_review_prepare_summary_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --cycle-out {{sanction_procedural_official_review_raw_cycle_cycle_out}} --out {{sanction_procedural_official_review_raw_cycle_out}}${strict_raw_arg}${strict_prepare_arg}

parl-run-sanction-procedural-official-review-raw-prepare-apply-cycle-dry-run:
  test -n "{{sanction_procedural_official_review_raw_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_RAW_IN=<csv_path>" && exit 2)
  strict_raw_arg=""; \
  if [ "{{sanction_procedural_official_review_raw_cycle_strict_raw}}" = "1" ]; then \
    strict_raw_arg=" --strict-raw"; \
  fi; \
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_prepare_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_raw_prepare_apply_cycle.py --db {{db_path}} --raw-in "{{sanction_procedural_official_review_raw_in}}" --apply-out {{sanction_procedural_official_review_raw_cycle_apply_out}} --raw-rejected-csv-out {{sanction_procedural_official_review_raw_cycle_raw_rejected_out}} --raw-out-json {{sanction_procedural_official_review_raw_cycle_raw_out}} --default-source-id {{sanction_procedural_official_review_raw_default_source_id}} --default-period-granularity {{sanction_procedural_official_review_raw_default_period_granularity}} --prepare-out {{sanction_procedural_official_review_prepare_out}} --prepare-rejected-csv-out {{sanction_procedural_official_review_prepare_rejected_out}} --prepare-out-json {{sanction_procedural_official_review_prepare_summary_out}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --dry-run --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --cycle-out {{sanction_procedural_official_review_raw_cycle_cycle_out}} --out {{sanction_procedural_official_review_raw_cycle_out}}${strict_raw_arg}${strict_prepare_arg}

parl-prepare-sanction-procedural-official-review-apply-input:
  test -n "{{sanction_procedural_official_review_prepare_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_IN=<csv_path>" && exit 2)
  strict_arg=""; \
  if [ "{{sanction_procedural_official_review_prepare_strict}}" = "1" ]; then \
    strict_arg=" --strict"; \
  fi; \
  PYTHONPATH=. python3 scripts/prepare_sanction_procedural_official_review_apply_input.py --in "{{sanction_procedural_official_review_prepare_in}}" --out {{sanction_procedural_official_review_prepare_out}} --rejected-csv-out {{sanction_procedural_official_review_prepare_rejected_out}} --out-json {{sanction_procedural_official_review_prepare_summary_out}}${strict_arg}

parl-check-sanction-procedural-official-review-apply-readiness:
  test -n "{{sanction_procedural_official_review_readiness_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_READINESS_IN=<csv_path>" && exit 2)
  strict_arg=""; \
  if [ "{{sanction_procedural_official_review_readiness_strict}}" = "1" ]; then \
    strict_arg=" --strict"; \
  fi; \
  PYTHONPATH=. python3 scripts/report_sanction_procedural_official_review_apply_readiness.py --db {{db_path}} --in "{{sanction_procedural_official_review_readiness_in}}" --tolerance {{sanction_procedural_official_review_readiness_tolerance}} --queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --csv-out {{sanction_procedural_official_review_readiness_csv_out}} --out {{sanction_procedural_official_review_readiness_out}}${strict_arg}

parl-run-sanction-procedural-official-review-prepare-apply-cycle:
  test -n "{{sanction_procedural_official_review_prepare_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_IN=<csv_path>" && exit 2)
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_prepare_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_prepare_apply_cycle.py --db {{db_path}} --in "{{sanction_procedural_official_review_prepare_in}}" --prepare-out {{sanction_procedural_official_review_prepare_out}} --prepare-rejected-csv-out {{sanction_procedural_official_review_prepare_rejected_out}} --prepare-out-json {{sanction_procedural_official_review_prepare_summary_out}} --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --cycle-out {{sanction_procedural_official_review_prepare_cycle_cycle_out}} --out {{sanction_procedural_official_review_prepare_cycle_out}}${strict_prepare_arg}

parl-run-sanction-procedural-official-review-prepare-apply-cycle-dry-run:
  test -n "{{sanction_procedural_official_review_prepare_in}}" || (echo "Set SANCTION_PROCEDURAL_OFFICIAL_REVIEW_PREPARE_IN=<csv_path>" && exit 2)
  strict_prepare_arg=""; \
  if [ "{{sanction_procedural_official_review_prepare_cycle_strict_prepare}}" = "1" ]; then \
    strict_prepare_arg=" --strict-prepare"; \
  fi; \
  PYTHONPATH=. python3 scripts/run_sanction_procedural_official_review_prepare_apply_cycle.py --db {{db_path}} --in "{{sanction_procedural_official_review_prepare_in}}" --prepare-out {{sanction_procedural_official_review_prepare_out}} --prepare-rejected-csv-out {{sanction_procedural_official_review_prepare_rejected_out}} --prepare-out-json {{sanction_procedural_official_review_prepare_summary_out}} --source-id {{sanction_procedural_official_review_apply_source_id}} --snapshot-date {{snapshot_date}} --readiness-tolerance {{sanction_procedural_official_review_readiness_tolerance}} --readiness-queue-limit {{sanction_procedural_official_review_readiness_queue_limit}} --readiness-csv-out {{sanction_procedural_official_review_readiness_csv_out}} --readiness-out {{sanction_procedural_official_review_readiness_out}} --strict-readiness --dry-run --status-out {{sanction_procedural_official_review_prepare_cycle_status_out}} --cycle-out {{sanction_procedural_official_review_prepare_cycle_cycle_out}} --out {{sanction_procedural_official_review_prepare_cycle_out}}${strict_prepare_arg}

parl-sanction-data-catalog-pipeline:
  just parl-validate-sanction-data-catalog-seed
  just parl-import-sanction-data-catalog-seed
  just parl-report-sanction-data-catalog-status
  just parl-report-sanction-procedural-official-review-status
  just parl-export-sanction-procedural-official-review-kpi-gap-queue
  just parl-export-sanction-procedural-official-review-raw-packets-from-kpi-gap-queue
  just parl-report-sanction-procedural-official-review-raw-packets-progress
  just parl-export-sanction-procedural-official-review-packet-fix-queue
  just parl-run-sanction-procedural-official-review-packet-fix-ready-cycle-dry-run
  just parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat
  just parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-window
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest
  just parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-window
  just parl-report-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction-window
  just parl-check-sanction-procedural-official-review-packet-fix-queue-heartbeat-compaction-window-digest-heartbeat-compaction-window-digest
  just parl-run-sanction-procedural-official-review-ready-packets-cycle-dry-run
  just parl-run-sanction-procedural-official-review-raw-packets-cycle-dry-run
  just parl-export-sanction-procedural-official-review-apply-from-kpi-gap-queue
  just parl-run-sanction-procedural-official-review-apply-from-kpi-gap-cycle-dry-run

parl-sanction-foundation-pipeline:
  just parl-sanction-norms-seed-pipeline
  just parl-sanction-data-catalog-pipeline

parl-test-sanction-data-catalog:
  python3 -m unittest tests/test_validate_sanction_data_catalog_seed.py tests/test_import_sanction_data_catalog_seed.py tests/test_report_sanction_data_catalog_status.py tests/test_report_sanction_procedural_official_review_status.py tests/test_export_sanction_procedural_official_review_kpi_gap_queue.py tests/test_export_sanction_procedural_official_review_raw_packets_from_kpi_gap_queue.py tests/test_report_sanction_procedural_official_review_raw_packets_progress.py tests/test_export_sanction_procedural_official_review_packet_fix_queue.py tests/test_run_sanction_procedural_official_review_packet_fix_ready_cycle.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_window.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_window.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window.py tests/test_report_sanction_procedural_official_review_packet_fix_queue_heartbeat_compaction_window_digest_heartbeat_compaction_window_digest.py tests/test_run_sanction_procedural_official_review_ready_packets_cycle.py tests/test_run_sanction_procedural_official_review_raw_packets_cycle.py tests/test_export_sanction_procedural_official_review_apply_from_kpi_gap_queue.py tests/test_run_sanction_procedural_official_review_apply_from_kpi_gap_cycle.py tests/test_apply_sanction_procedural_official_review_metrics.py tests/test_export_sanction_procedural_official_review_apply_template.py tests/test_export_sanction_procedural_official_review_raw_template.py tests/test_export_sanction_procedural_official_review_apply_from_raw_metrics.py tests/test_prepare_sanction_procedural_official_review_apply_input.py tests/test_report_sanction_procedural_official_review_apply_readiness.py tests/test_run_sanction_procedural_official_review_apply_cycle.py tests/test_run_sanction_procedural_official_review_prepare_apply_cycle.py tests/test_run_sanction_procedural_official_review_raw_prepare_apply_cycle.py

parl-validate-sanction-volume-pilot-seed:
  PYTHONPATH=. python3 scripts/validate_sanction_volume_pilot_seed.py --seed {{sanction_volume_pilot_seed}} --out {{sanction_volume_pilot_validate_out}}

parl-import-sanction-volume-pilot-seed:
  PYTHONPATH=. python3 scripts/import_sanction_volume_pilot_seed.py --db {{db_path}} --seed {{sanction_volume_pilot_seed}} --snapshot-date {{snapshot_date}} --source-id {{sanction_volume_pilot_source_id}} --out {{sanction_volume_pilot_import_out}}

parl-report-sanction-volume-pilot-status:
  PYTHONPATH=. python3 scripts/report_sanction_volume_pilot_status.py --db {{db_path}} --top-n {{sanction_volume_pilot_status_top_n}} --dossier-limit {{sanction_volume_pilot_status_dossier_limit}} --sample-limit {{sanction_volume_pilot_status_sample_limit}} --out {{sanction_volume_pilot_status_out}}

parl-sanction-volume-pilot-pipeline:
  just parl-validate-sanction-volume-pilot-seed
  just parl-import-sanction-volume-pilot-seed
  just parl-report-sanction-volume-pilot-status

parl-sanction-citizen-pilot-pipeline:
  just parl-sanction-foundation-pipeline
  just parl-sanction-volume-pilot-pipeline

parl-test-sanction-volume-pilot:
  python3 -m unittest tests/test_validate_sanction_volume_pilot_seed.py tests/test_import_sanction_volume_pilot_seed.py tests/test_report_sanction_volume_pilot_status.py

parl-validate-liberty-restrictions-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_restrictions_seed.py --seed {{liberty_restrictions_seed}} --out {{liberty_restrictions_validate_out}}

parl-import-liberty-restrictions-seed:
  PYTHONPATH=. python3 scripts/import_liberty_restrictions_seed.py --db {{db_path}} --seed {{liberty_restrictions_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_restrictions_source_id}} --out {{liberty_restrictions_import_out}}

parl-report-liberty-restrictions-status:
  PYTHONPATH=. python3 scripts/report_liberty_restrictions_status.py --db {{db_path}} --top-n {{liberty_restrictions_status_top_n}} --norms-classified-min {{liberty_restrictions_norms_classified_min}} --fragments-irlc-min {{liberty_restrictions_fragments_irlc_min}} --fragments-accountability-min {{liberty_restrictions_fragments_accountability_min}} --rights-with-data-min {{liberty_restrictions_rights_with_data_min}} --sources-with-assessments-min-pct {{liberty_restrictions_sources_with_assessments_min_pct}} --scopes-with-assessments-min-pct {{liberty_restrictions_scopes_with_assessments_min_pct}} --min-assessment-sources {{liberty_restrictions_min_assessment_sources}} --min-assessment-scopes {{liberty_restrictions_min_assessment_scopes}} --sources-with-dual-coverage-min-pct {{liberty_restrictions_sources_with_dual_coverage_min_pct}} --scopes-with-dual-coverage-min-pct {{liberty_restrictions_scopes_with_dual_coverage_min_pct}} --min-dual-coverage-sources {{liberty_restrictions_min_dual_coverage_sources}} --min-dual-coverage-scopes {{liberty_restrictions_min_dual_coverage_scopes}} --accountability-primary-evidence-min-pct {{liberty_restrictions_accountability_primary_evidence_min_pct}} --min-accountability-primary-evidence-edges {{liberty_restrictions_min_accountability_primary_evidence_edges}} --out {{liberty_restrictions_status_out}}

parl-check-liberty-focus-gate:
  PYTHONPATH=. python3 scripts/report_liberty_restrictions_status.py --db {{db_path}} --top-n {{liberty_restrictions_status_top_n}} --norms-classified-min {{liberty_restrictions_norms_classified_min}} --fragments-irlc-min {{liberty_restrictions_fragments_irlc_min}} --fragments-accountability-min {{liberty_restrictions_fragments_accountability_min}} --rights-with-data-min {{liberty_restrictions_rights_with_data_min}} --sources-with-assessments-min-pct {{liberty_restrictions_sources_with_assessments_min_pct}} --scopes-with-assessments-min-pct {{liberty_restrictions_scopes_with_assessments_min_pct}} --min-assessment-sources {{liberty_restrictions_min_assessment_sources}} --min-assessment-scopes {{liberty_restrictions_min_assessment_scopes}} --sources-with-dual-coverage-min-pct {{liberty_restrictions_sources_with_dual_coverage_min_pct}} --scopes-with-dual-coverage-min-pct {{liberty_restrictions_scopes_with_dual_coverage_min_pct}} --min-dual-coverage-sources {{liberty_restrictions_min_dual_coverage_sources}} --min-dual-coverage-scopes {{liberty_restrictions_min_dual_coverage_scopes}} --accountability-primary-evidence-min-pct {{liberty_restrictions_accountability_primary_evidence_min_pct}} --min-accountability-primary-evidence-edges {{liberty_restrictions_min_accountability_primary_evidence_edges}} --enforce-gate --out {{liberty_restrictions_status_out}}

parl-report-liberty-focus-scope:
  PYTHONPATH=. python3 scripts/report_liberty_focus_scope_guard.py --status-json {{liberty_restrictions_status_out}} --changed-paths-file {{liberty_focus_scope_changed_paths}} --out {{liberty_focus_scope_out}}

parl-check-liberty-focus-scope:
  PYTHONPATH=. python3 scripts/report_liberty_focus_scope_guard.py --status-json {{liberty_restrictions_status_out}} --changed-paths-file {{liberty_focus_scope_changed_paths}} --strict --out {{liberty_focus_scope_out}}

parl-report-liberty-restrictions-status-heartbeat:
  PYTHONPATH=. python3 scripts/report_liberty_restrictions_status_heartbeat.py --status-json {{liberty_restrictions_status_out}} --heartbeat-jsonl {{liberty_restrictions_status_heartbeat_path}} --strict --out {{liberty_restrictions_status_heartbeat_out}}

parl-check-liberty-restrictions-status-heartbeat-window:
  PYTHONPATH=. python3 scripts/report_liberty_restrictions_status_heartbeat_window.py --heartbeat-jsonl {{liberty_restrictions_status_heartbeat_path}} --last {{liberty_restrictions_status_heartbeat_window}} --max-failed {{liberty_restrictions_status_heartbeat_max_failed}} --max-failed-rate-pct {{liberty_restrictions_status_heartbeat_max_failed_rate_pct}} --max-focus-gate-failed {{liberty_restrictions_status_heartbeat_max_focus_gate_failed}} --max-focus-gate-failed-rate-pct {{liberty_restrictions_status_heartbeat_max_focus_gate_failed_rate_pct}} --max-norms-classified-gate-failed {{liberty_restrictions_status_heartbeat_max_norms_classified_gate_failed}} --max-fragments-irlc-gate-failed {{liberty_restrictions_status_heartbeat_max_fragments_irlc_gate_failed}} --max-fragments-accountability-gate-failed {{liberty_restrictions_status_heartbeat_max_fragments_accountability_gate_failed}} --max-rights-with-data-gate-failed {{liberty_restrictions_status_heartbeat_max_rights_with_data_gate_failed}} --max-source-representativity-gate-failed {{liberty_restrictions_status_heartbeat_max_source_representativity_gate_failed}} --max-scope-representativity-gate-failed {{liberty_restrictions_status_heartbeat_max_scope_representativity_gate_failed}} --max-source-dual-coverage-gate-failed {{liberty_restrictions_status_heartbeat_max_source_dual_coverage_gate_failed}} --max-scope-dual-coverage-gate-failed {{liberty_restrictions_status_heartbeat_max_scope_dual_coverage_gate_failed}} --max-accountability-primary-evidence-gate-failed {{liberty_restrictions_status_heartbeat_max_accountability_primary_evidence_gate_failed}} --strict --out {{liberty_restrictions_status_heartbeat_window_out}}

parl-validate-liberty-proportionality-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_proportionality_seed.py --seed {{liberty_proportionality_seed}} --out {{liberty_proportionality_validate_out}}

parl-import-liberty-proportionality-seed:
  PYTHONPATH=. python3 scripts/import_liberty_proportionality_seed.py --db {{db_path}} --seed {{liberty_proportionality_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_proportionality_source_id}} --out {{liberty_proportionality_import_out}}

parl-report-liberty-proportionality-status:
  PYTHONPATH=. python3 scripts/report_liberty_proportionality_status.py --db {{db_path}} --low-score-threshold {{liberty_proportionality_low_score_threshold}} --target-coverage-min {{liberty_proportionality_target_coverage_min}} --objective-defined-min {{liberty_proportionality_objective_defined_min}} --indicator-defined-min {{liberty_proportionality_indicator_defined_min}} --alternatives-considered-min {{liberty_proportionality_alternatives_min}} --out {{liberty_proportionality_status_out}}

parl-check-liberty-proportionality-gate:
  PYTHONPATH=. python3 scripts/report_liberty_proportionality_status.py --db {{db_path}} --low-score-threshold {{liberty_proportionality_low_score_threshold}} --target-coverage-min {{liberty_proportionality_target_coverage_min}} --objective-defined-min {{liberty_proportionality_objective_defined_min}} --indicator-defined-min {{liberty_proportionality_indicator_defined_min}} --alternatives-considered-min {{liberty_proportionality_alternatives_min}} --enforce-gate --out {{liberty_proportionality_status_out}}

parl-report-liberty-direct-accountability-scores:
  PYTHONPATH=. python3 scripts/report_liberty_direct_accountability_scores.py --db {{db_path}} --top-n {{liberty_direct_accountability_top_n}} --direct-coverage-min {{liberty_direct_accountability_coverage_min}} --direct-primary-evidence-min-pct {{liberty_direct_accountability_primary_evidence_min_pct}} --min-direct-primary-evidence-edges {{liberty_direct_accountability_min_primary_evidence_edges}} --out {{liberty_direct_accountability_scores_out}}

parl-check-liberty-direct-accountability-gate:
  PYTHONPATH=. python3 scripts/report_liberty_direct_accountability_scores.py --db {{db_path}} --top-n {{liberty_direct_accountability_top_n}} --direct-coverage-min {{liberty_direct_accountability_coverage_min}} --direct-primary-evidence-min-pct {{liberty_direct_accountability_primary_evidence_min_pct}} --min-direct-primary-evidence-edges {{liberty_direct_accountability_min_primary_evidence_edges}} --enforce-gate --out {{liberty_direct_accountability_scores_out}}

parl-report-liberty-personal-accountability-scores:
  PYTHONPATH=. python3 scripts/report_liberty_personal_accountability_scores.py --db {{db_path}} --top-n {{liberty_personal_accountability_top_n}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --personal-fragment-coverage-min {{liberty_personal_fragment_coverage_min}} --personal-primary-evidence-min-pct {{liberty_personal_primary_evidence_min_pct}} --min-personal-primary-evidence-edges {{liberty_personal_min_primary_evidence_edges}} --indirect-person-window-min-pct {{liberty_personal_indirect_window_min_pct}} --min-indirect-person-window-edges {{liberty_personal_min_indirect_window_edges}} --indirect-identity-resolution-min-pct {{liberty_personal_indirect_identity_resolution_min_pct}} --min-indirect-identity-resolution-edges {{liberty_personal_min_indirect_identity_resolution_edges}} --indirect-non-manual-alias-resolution-min-pct {{liberty_personal_indirect_non_manual_alias_resolution_min_pct}} --min-indirect-non-manual-alias-resolution-edges {{liberty_personal_min_indirect_non_manual_alias_resolution_edges}} --manual-alias-share-max {{liberty_personal_manual_alias_share_max}} --min-alias-rows-for-manual-share-gate {{liberty_personal_min_alias_rows_for_manual_share_gate}} --official-alias-share-min-pct {{liberty_personal_official_alias_share_min_pct}} --min-alias-rows-for-official-share-gate {{liberty_personal_min_alias_rows_for_official_share_gate}} --official-alias-evidence-min-pct {{liberty_personal_official_alias_evidence_min_pct}} --min-official-alias-rows-for-evidence-gate {{liberty_personal_min_official_alias_rows_for_evidence_gate}} --official-alias-source-record-min-pct {{liberty_personal_official_alias_source_record_min_pct}} --min-official-alias-rows-for-source-record-gate {{liberty_personal_min_official_alias_rows_for_source_record_gate}} --min-persons-scored {{liberty_personal_min_persons_scored}} --out {{liberty_personal_accountability_scores_out}}

parl-check-liberty-personal-accountability-gate:
  PYTHONPATH=. python3 scripts/report_liberty_personal_accountability_scores.py --db {{db_path}} --top-n {{liberty_personal_accountability_top_n}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --personal-fragment-coverage-min {{liberty_personal_fragment_coverage_min}} --personal-primary-evidence-min-pct {{liberty_personal_primary_evidence_min_pct}} --min-personal-primary-evidence-edges {{liberty_personal_min_primary_evidence_edges}} --indirect-person-window-min-pct {{liberty_personal_indirect_window_min_pct}} --min-indirect-person-window-edges {{liberty_personal_min_indirect_window_edges}} --indirect-identity-resolution-min-pct {{liberty_personal_indirect_identity_resolution_min_pct}} --min-indirect-identity-resolution-edges {{liberty_personal_min_indirect_identity_resolution_edges}} --indirect-non-manual-alias-resolution-min-pct {{liberty_personal_indirect_non_manual_alias_resolution_min_pct}} --min-indirect-non-manual-alias-resolution-edges {{liberty_personal_min_indirect_non_manual_alias_resolution_edges}} --manual-alias-share-max {{liberty_personal_manual_alias_share_max}} --min-alias-rows-for-manual-share-gate {{liberty_personal_min_alias_rows_for_manual_share_gate}} --official-alias-share-min-pct {{liberty_personal_official_alias_share_min_pct}} --min-alias-rows-for-official-share-gate {{liberty_personal_min_alias_rows_for_official_share_gate}} --official-alias-evidence-min-pct {{liberty_personal_official_alias_evidence_min_pct}} --min-official-alias-rows-for-evidence-gate {{liberty_personal_min_official_alias_rows_for_evidence_gate}} --official-alias-source-record-min-pct {{liberty_personal_official_alias_source_record_min_pct}} --min-official-alias-rows-for-source-record-gate {{liberty_personal_min_official_alias_rows_for_source_record_gate}} --min-persons-scored {{liberty_personal_min_persons_scored}} --enforce-gate --out {{liberty_personal_accountability_scores_out}}

parl-validate-liberty-person-identity-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_person_identity_resolution_seed.py --seed {{liberty_person_identity_seed}} --out {{liberty_person_identity_validate_out}}

parl-import-liberty-person-identity-seed:
  PYTHONPATH=. python3 scripts/import_liberty_person_identity_resolution_seed.py --db {{db_path}} --seed {{liberty_person_identity_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_person_identity_source_id}} --out {{liberty_person_identity_import_out}}

parl-report-liberty-person-identity-resolution-queue:
  PYTHONPATH=. python3 scripts/report_liberty_person_identity_resolution_queue.py --db {{db_path}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --identity-resolution-min-pct {{liberty_person_identity_resolution_min_pct}} --min-indirect-person-edges {{liberty_person_identity_resolution_min_edges}} --non-manual-alias-resolution-min-pct {{liberty_person_identity_non_manual_alias_resolution_min_pct}} --min-non-manual-alias-resolution-edges {{liberty_person_identity_non_manual_alias_resolution_min_edges}} --manual-alias-share-max {{liberty_person_identity_manual_alias_share_max}} --min-alias-rows-for-manual-share-gate {{liberty_person_identity_min_alias_rows_for_manual_share_gate}} --official-alias-share-min-pct {{liberty_person_identity_official_alias_share_min_pct}} --min-alias-rows-for-official-share-gate {{liberty_person_identity_min_alias_rows_for_official_share_gate}} --official-alias-evidence-min-pct {{liberty_person_identity_official_alias_evidence_min_pct}} --min-official-alias-rows-for-evidence-gate {{liberty_person_identity_min_official_alias_rows_for_evidence_gate}} --official-alias-source-record-min-pct {{liberty_person_identity_official_alias_source_record_min_pct}} --min-official-alias-rows-for-source-record-gate {{liberty_person_identity_min_official_alias_rows_for_source_record_gate}} --limit {{liberty_person_identity_resolution_queue_limit}} --queue-csv-out {{liberty_person_identity_resolution_queue_csv_out}} --manual-alias-upgrade-csv-out {{liberty_person_identity_manual_upgrade_queue_csv_out}} --official-alias-evidence-upgrade-csv-out {{liberty_person_identity_official_evidence_upgrade_queue_csv_out}} --official-alias-source-record-upgrade-csv-out {{liberty_person_identity_official_source_record_upgrade_queue_csv_out}} --out {{liberty_person_identity_resolution_queue_out}}

parl-check-liberty-person-identity-resolution-gate:
  PYTHONPATH=. python3 scripts/report_liberty_person_identity_resolution_queue.py --db {{db_path}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --identity-resolution-min-pct {{liberty_person_identity_resolution_min_pct}} --min-indirect-person-edges {{liberty_person_identity_resolution_min_edges}} --non-manual-alias-resolution-min-pct {{liberty_person_identity_non_manual_alias_resolution_min_pct}} --min-non-manual-alias-resolution-edges {{liberty_person_identity_non_manual_alias_resolution_min_edges}} --manual-alias-share-max {{liberty_person_identity_manual_alias_share_max}} --min-alias-rows-for-manual-share-gate {{liberty_person_identity_min_alias_rows_for_manual_share_gate}} --official-alias-share-min-pct {{liberty_person_identity_official_alias_share_min_pct}} --min-alias-rows-for-official-share-gate {{liberty_person_identity_min_alias_rows_for_official_share_gate}} --official-alias-evidence-min-pct {{liberty_person_identity_official_alias_evidence_min_pct}} --min-official-alias-rows-for-evidence-gate {{liberty_person_identity_min_official_alias_rows_for_evidence_gate}} --official-alias-source-record-min-pct {{liberty_person_identity_official_alias_source_record_min_pct}} --min-official-alias-rows-for-source-record-gate {{liberty_person_identity_min_official_alias_rows_for_source_record_gate}} --limit {{liberty_person_identity_resolution_queue_limit}} --queue-csv-out {{liberty_person_identity_resolution_queue_csv_out}} --manual-alias-upgrade-csv-out {{liberty_person_identity_manual_upgrade_queue_csv_out}} --official-alias-evidence-upgrade-csv-out {{liberty_person_identity_official_evidence_upgrade_queue_csv_out}} --official-alias-source-record-upgrade-csv-out {{liberty_person_identity_official_source_record_upgrade_queue_csv_out}} --enforce-gate --out {{liberty_person_identity_resolution_queue_out}}

parl-export-liberty-person-identity-official-upgrade-review-queue:
  PYTHONPATH=. python3 scripts/export_liberty_person_identity_official_upgrade_review_queue.py --db {{db_path}} --seed {{liberty_person_identity_seed}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --limit {{liberty_person_identity_resolution_queue_limit}} --out {{liberty_person_identity_official_upgrade_review_queue_out}} --summary-out {{liberty_person_identity_official_upgrade_review_queue_summary_out}}

parl-export-liberty-person-identity-official-upgrade-review-queue-actionable:
  PYTHONPATH=. python3 scripts/export_liberty_person_identity_official_upgrade_review_queue.py --db {{db_path}} --seed {{liberty_person_identity_seed}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --limit {{liberty_person_identity_resolution_queue_limit}} --only-actionable --out {{liberty_person_identity_official_upgrade_review_queue_actionable_out}} --summary-out {{liberty_person_identity_official_upgrade_review_queue_actionable_summary_out}}

parl-check-liberty-person-identity-official-upgrade-review-queue-actionable-empty:
  PYTHONPATH=. python3 scripts/export_liberty_person_identity_official_upgrade_review_queue.py --db {{db_path}} --seed {{liberty_person_identity_seed}} --personal-confidence-min {{liberty_personal_confidence_min}} --personal-max-causal-distance {{liberty_personal_max_distance}} --limit {{liberty_person_identity_resolution_queue_limit}} --only-actionable --strict-empty-actionable --out {{liberty_person_identity_official_upgrade_review_queue_actionable_out}} --summary-out {{liberty_person_identity_official_upgrade_review_queue_actionable_summary_out}}

parl-report-liberty-person-identity-official-upgrade-review-queue-actionable-heartbeat:
  just parl-export-liberty-person-identity-official-upgrade-review-queue-actionable
  PYTHONPATH=. python3 scripts/report_liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat.py --summary-json {{liberty_person_identity_official_upgrade_review_queue_actionable_summary_out}} --heartbeat-jsonl {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_path}} --out {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_out}}

parl-check-liberty-person-identity-official-upgrade-review-queue-actionable-heartbeat:
  just parl-export-liberty-person-identity-official-upgrade-review-queue-actionable
  PYTHONPATH=. python3 scripts/report_liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat.py --summary-json {{liberty_person_identity_official_upgrade_review_queue_actionable_summary_out}} --heartbeat-jsonl {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_path}} --strict --out {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_out}}

parl-check-liberty-person-identity-official-upgrade-review-queue-actionable-heartbeat-window:
  PYTHONPATH=. python3 scripts/report_liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window.py --heartbeat-jsonl {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_path}} --last {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window}} --max-failed {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_failed}} --max-failed-rate-pct {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_failed_rate_pct}} --max-actionable-nonempty-runs {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_actionable_nonempty_runs}} --max-actionable-nonempty-runs-rate-pct {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_max_actionable_nonempty_runs_rate_pct}} --strict --out {{liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window_out}}

parl-apply-liberty-person-identity-official-upgrade-reviews:
  PYTHONPATH=. python3 scripts/apply_liberty_person_identity_official_upgrade_reviews.py --seed {{liberty_person_identity_seed}} --in {{liberty_person_identity_official_upgrade_reviews_in}} --db {{db_path}} --seed-out {{liberty_person_identity_seed_review_out}} --out {{liberty_person_identity_official_upgrade_apply_out}}

parl-validate-liberty-enforcement-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_enforcement_seed.py --seed {{liberty_enforcement_seed}} --out {{liberty_enforcement_validate_out}}

parl-import-liberty-enforcement-seed:
  PYTHONPATH=. python3 scripts/import_liberty_enforcement_seed.py --db {{db_path}} --seed {{liberty_enforcement_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_enforcement_source_id}} --out {{liberty_enforcement_import_out}}

parl-report-liberty-enforcement-variation-status:
  PYTHONPATH=. python3 scripts/report_liberty_enforcement_variation_status.py --db {{db_path}} --top-n {{liberty_enforcement_top_n}} --sanction-rate-spread-pct-min {{liberty_enforcement_sanction_spread_min}} --annulment-rate-spread-pp-min {{liberty_enforcement_annulment_spread_min}} --delay-spread-days-min {{liberty_enforcement_delay_spread_days_min}} --target-coverage-min {{liberty_enforcement_target_coverage_min}} --multi-territory-coverage-min {{liberty_enforcement_multi_territory_min}} --out {{liberty_enforcement_status_out}}

parl-check-liberty-enforcement-variation-gate:
  PYTHONPATH=. python3 scripts/report_liberty_enforcement_variation_status.py --db {{db_path}} --top-n {{liberty_enforcement_top_n}} --sanction-rate-spread-pct-min {{liberty_enforcement_sanction_spread_min}} --annulment-rate-spread-pp-min {{liberty_enforcement_annulment_spread_min}} --delay-spread-days-min {{liberty_enforcement_delay_spread_days_min}} --target-coverage-min {{liberty_enforcement_target_coverage_min}} --multi-territory-coverage-min {{liberty_enforcement_multi_territory_min}} --enforce-gate --out {{liberty_enforcement_status_out}}

parl-validate-liberty-indirect-accountability-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_indirect_accountability_seed.py --seed {{liberty_indirect_seed}} --out {{liberty_indirect_validate_out}}

parl-import-liberty-indirect-accountability-seed:
  PYTHONPATH=. python3 scripts/import_liberty_indirect_accountability_seed.py --db {{db_path}} --seed {{liberty_indirect_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_indirect_source_id}} --out {{liberty_indirect_import_out}}

parl-report-liberty-indirect-accountability-status:
  PYTHONPATH=. python3 scripts/report_liberty_indirect_accountability_status.py --db {{db_path}} --top-n {{liberty_indirect_top_n}} --attributable-confidence-min {{liberty_indirect_confidence_min}} --attributable-max-causal-distance {{liberty_indirect_max_distance}} --attributable-fragment-coverage-min {{liberty_indirect_fragment_coverage_min}} --attributable-person-window-min {{liberty_indirect_person_window_min}} --min-attributable-edges-for-person-window {{liberty_indirect_min_person_window_edges}} --out {{liberty_indirect_status_out}}

parl-check-liberty-indirect-accountability-gate:
  PYTHONPATH=. python3 scripts/report_liberty_indirect_accountability_status.py --db {{db_path}} --top-n {{liberty_indirect_top_n}} --attributable-confidence-min {{liberty_indirect_confidence_min}} --attributable-max-causal-distance {{liberty_indirect_max_distance}} --attributable-fragment-coverage-min {{liberty_indirect_fragment_coverage_min}} --attributable-person-window-min {{liberty_indirect_person_window_min}} --min-attributable-edges-for-person-window {{liberty_indirect_min_person_window_edges}} --enforce-gate --out {{liberty_indirect_status_out}}

parl-validate-liberty-delegated-enforcement-seed:
  PYTHONPATH=. python3 scripts/validate_liberty_delegated_enforcement_seed.py --seed {{liberty_delegated_seed}} --out {{liberty_delegated_validate_out}}

parl-import-liberty-delegated-enforcement-seed:
  PYTHONPATH=. python3 scripts/import_liberty_delegated_enforcement_seed.py --db {{db_path}} --seed {{liberty_delegated_seed}} --snapshot-date {{snapshot_date}} --source-id {{liberty_delegated_source_id}} --out {{liberty_delegated_import_out}}

parl-report-liberty-delegated-enforcement-status:
  PYTHONPATH=. python3 scripts/report_liberty_delegated_enforcement_status.py --db {{db_path}} --top-n {{liberty_delegated_top_n}} --target-fragment-coverage-min {{liberty_delegated_target_coverage_min}} --designated-actor-coverage-min {{liberty_delegated_designated_actor_min}} --enforcement-evidence-coverage-min {{liberty_delegated_enforcement_evidence_min}} --out {{liberty_delegated_status_out}}

parl-check-liberty-delegated-enforcement-gate:
  PYTHONPATH=. python3 scripts/report_liberty_delegated_enforcement_status.py --db {{db_path}} --top-n {{liberty_delegated_top_n}} --target-fragment-coverage-min {{liberty_delegated_target_coverage_min}} --designated-actor-coverage-min {{liberty_delegated_designated_actor_min}} --enforcement-evidence-coverage-min {{liberty_delegated_enforcement_evidence_min}} --enforce-gate --out {{liberty_delegated_status_out}}

parl-export-liberty-restrictions-snapshot:
  @set -euo pipefail; \
  prev_arg=""; \
  if [ -n "{{liberty_restrictions_snapshot_prev}}" ]; then prev_arg="--prev-snapshot {{liberty_restrictions_snapshot_prev}}"; fi; \
  docker compose run --rm --build etl "PYTHONPATH=. python3 scripts/export_liberty_restrictions_snapshot.py --db {{db_path}} --snapshot-date {{snapshot_date}} --out {{liberty_restrictions_snapshot_out}} --irlc-parquet-out {{liberty_restrictions_snapshot_irlc_parquet_out}} --accountability-parquet-out {{liberty_restrictions_snapshot_accountability_parquet_out}} --parquet-compression {{liberty_restrictions_snapshot_parquet_compression}} --diff-out {{liberty_restrictions_snapshot_diff_out}} --changelog-jsonl {{liberty_restrictions_snapshot_changelog_jsonl}} --changelog-out {{liberty_restrictions_snapshot_changelog_out}} ${prev_arg}"

parl-publish-liberty-atlas-artifacts:
  @set -euo pipefail; \
  allow_missing_arg=""; \
  gh_pages_arg=""; \
  if [ "{{liberty_atlas_publish_allow_missing}}" = "1" ]; then allow_missing_arg=" --allow-missing"; fi; \
  if [ -n "{{liberty_atlas_publish_gh_pages_out}}" ]; then gh_pages_arg=" --gh-pages-out {{liberty_atlas_publish_gh_pages_out}}"; fi; \
  python3 scripts/publish_liberty_atlas_artifacts.py --snapshot-json {{liberty_atlas_publish_snapshot_json}} --irlc-parquet {{liberty_atlas_publish_irlc_parquet}} --accountability-parquet {{liberty_atlas_publish_accountability_parquet}} --diff-json {{liberty_atlas_publish_diff_json}} --changelog-entry-json {{liberty_atlas_publish_changelog_entry_json}} --changelog-history-jsonl {{liberty_atlas_publish_changelog_history_jsonl}} --snapshot-date {{snapshot_date}} --published-dir {{liberty_atlas_published_dir}} --out {{liberty_atlas_publish_out}}${gh_pages_arg}${allow_missing_arg}

parl-report-liberty-atlas-changelog-continuity:
  python3 scripts/report_liberty_atlas_changelog_continuity.py --changelog-jsonl {{liberty_atlas_publish_changelog_history_jsonl}} --snapshot-date {{snapshot_date}} --release-json {{liberty_atlas_release_latest_json}} --out {{liberty_atlas_changelog_continuity_out}}

parl-check-liberty-atlas-changelog-continuity:
  python3 scripts/report_liberty_atlas_changelog_continuity.py --changelog-jsonl {{liberty_atlas_publish_changelog_history_jsonl}} --snapshot-date {{snapshot_date}} --release-json {{liberty_atlas_release_latest_json}} --strict --out {{liberty_atlas_changelog_continuity_out}}

parl-report-liberty-atlas-release-heartbeat:
  @set -euo pipefail; \
  allow_hf_unavailable_arg=""; \
  expected_snapshot_arg=""; \
  hf_json_arg=""; \
  hf_url_arg=""; \
  hf_repo_arg=""; \
  hf_username_arg=""; \
  if [ "{{liberty_atlas_release_allow_hf_unavailable}}" = "1" ]; then allow_hf_unavailable_arg=" --allow-hf-unavailable"; fi; \
  if [ -n "{{liberty_atlas_release_expected_snapshot_date}}" ]; then expected_snapshot_arg=" --snapshot-date {{liberty_atlas_release_expected_snapshot_date}}"; fi; \
  if [ -n "{{liberty_atlas_release_hf_json}}" ]; then hf_json_arg=" --hf-release-json {{liberty_atlas_release_hf_json}}"; fi; \
  if [ -n "{{liberty_atlas_release_hf_latest_url}}" ]; then hf_url_arg=" --hf-release-json-url {{liberty_atlas_release_hf_latest_url}}"; fi; \
  if [ -n "{{liberty_atlas_release_hf_dataset_repo}}" ]; then hf_repo_arg=" --hf-dataset-repo {{liberty_atlas_release_hf_dataset_repo}}"; fi; \
  if [ -n "{{liberty_atlas_release_hf_username}}" ]; then hf_username_arg=" --hf-username {{liberty_atlas_release_hf_username}}"; fi; \
  python3 scripts/report_liberty_atlas_release_heartbeat.py --published-release-json {{liberty_atlas_release_latest_json}} --gh-pages-release-json {{liberty_atlas_publish_gh_pages_out}} --continuity-json {{liberty_atlas_changelog_continuity_out}} --heartbeat-jsonl {{liberty_atlas_release_heartbeat_path}} --max-snapshot-age-days {{liberty_atlas_release_max_snapshot_age_days}} --hf-timeout {{liberty_atlas_release_hf_timeout}} --strict --out {{liberty_atlas_release_heartbeat_out}}${allow_hf_unavailable_arg}${expected_snapshot_arg}${hf_json_arg}${hf_url_arg}${hf_repo_arg}${hf_username_arg}

parl-check-liberty-atlas-release-heartbeat-window:
  python3 scripts/report_liberty_atlas_release_heartbeat_window.py --heartbeat-jsonl {{liberty_atlas_release_heartbeat_path}} --last {{liberty_atlas_release_heartbeat_window}} --max-failed {{liberty_atlas_release_window_max_failed}} --max-degraded {{liberty_atlas_release_window_max_degraded}} --max-stale-alerts {{liberty_atlas_release_window_max_stale_alerts}} --max-drift-alerts {{liberty_atlas_release_window_max_drift_alerts}} --max-hf-unavailable {{liberty_atlas_release_window_max_hf_unavailable}} --strict --out {{liberty_atlas_release_heartbeat_window_out}}

parl-liberty-restrictions-pipeline:
  just parl-sanction-norms-seed-pipeline
  just parl-validate-liberty-restrictions-seed
  just parl-import-liberty-restrictions-seed
  just parl-report-liberty-restrictions-status
  just parl-report-liberty-restrictions-status-heartbeat
  just parl-check-liberty-restrictions-status-heartbeat-window
  just parl-check-liberty-focus-gate
  just parl-validate-liberty-proportionality-seed
  just parl-import-liberty-proportionality-seed
  just parl-report-liberty-proportionality-status
  just parl-check-liberty-proportionality-gate
  just parl-report-liberty-direct-accountability-scores
  just parl-check-liberty-direct-accountability-gate
  just parl-validate-liberty-enforcement-seed
  just parl-import-liberty-enforcement-seed
  just parl-report-liberty-enforcement-variation-status
  just parl-check-liberty-enforcement-variation-gate
  just parl-validate-liberty-indirect-accountability-seed
  just parl-import-liberty-indirect-accountability-seed
  just parl-report-liberty-indirect-accountability-status
  just parl-check-liberty-indirect-accountability-gate
  just parl-validate-liberty-person-identity-seed
  just parl-import-liberty-person-identity-seed
  just parl-report-liberty-personal-accountability-scores
  just parl-check-liberty-personal-accountability-gate
  just parl-report-liberty-person-identity-resolution-queue
  just parl-check-liberty-person-identity-resolution-gate
  just parl-report-liberty-person-identity-official-upgrade-review-queue-actionable-heartbeat
  just parl-check-liberty-person-identity-official-upgrade-review-queue-actionable-empty
  just parl-check-liberty-person-identity-official-upgrade-review-queue-actionable-heartbeat-window
  just parl-validate-liberty-delegated-enforcement-seed
  just parl-import-liberty-delegated-enforcement-seed
  just parl-report-liberty-delegated-enforcement-status
  just parl-check-liberty-delegated-enforcement-gate
  just parl-export-liberty-restrictions-snapshot
  just parl-publish-liberty-atlas-artifacts
  just parl-check-liberty-atlas-changelog-continuity
  just parl-report-liberty-atlas-release-heartbeat
  just parl-check-liberty-atlas-release-heartbeat-window

parl-test-liberty-restrictions:
  python3 -m unittest tests/test_validate_liberty_restrictions_seed.py tests/test_import_liberty_restrictions_seed.py tests/test_report_liberty_restrictions_status.py tests/test_report_liberty_focus_scope_guard.py tests/test_report_liberty_restrictions_status_heartbeat.py tests/test_report_liberty_restrictions_status_heartbeat_window.py tests/test_validate_liberty_proportionality_seed.py tests/test_import_liberty_proportionality_seed.py tests/test_report_liberty_proportionality_status.py tests/test_report_liberty_direct_accountability_scores.py tests/test_validate_liberty_person_identity_resolution_seed.py tests/test_import_liberty_person_identity_resolution_seed.py tests/test_report_liberty_personal_accountability_scores.py tests/test_report_liberty_person_identity_resolution_queue.py tests/test_export_liberty_person_identity_official_upgrade_review_queue.py tests/test_report_liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat.py tests/test_report_liberty_person_identity_official_upgrade_review_queue_actionable_heartbeat_window.py tests/test_apply_liberty_person_identity_official_upgrade_reviews.py tests/test_validate_liberty_enforcement_seed.py tests/test_import_liberty_enforcement_seed.py tests/test_report_liberty_enforcement_variation_status.py tests/test_validate_liberty_indirect_accountability_seed.py tests/test_import_liberty_indirect_accountability_seed.py tests/test_report_liberty_indirect_accountability_status.py tests/test_validate_liberty_delegated_enforcement_seed.py tests/test_import_liberty_delegated_enforcement_seed.py tests/test_report_liberty_delegated_enforcement_status.py tests/test_export_liberty_restrictions_snapshot.py tests/test_publish_liberty_atlas_artifacts.py tests/test_report_liberty_atlas_changelog_continuity.py tests/test_report_liberty_atlas_release_heartbeat.py tests/test_report_liberty_atlas_release_heartbeat_window.py

parl-programas-pipeline:
  just parl-validate-programas-manifest
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source programas_partidos --from-file {{programas_manifest}} --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-declared-stance --db {{db_path}} --source-id programas_partidos --min-auto-confidence {{declared_min_auto_confidence}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-declared-positions --db {{db_path}} --source-id programas_partidos --as-of-date {{snapshot_date}}"
  just parl-programas-status

parl-backfill-combined-positions:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-combined-positions --db {{db_path}} --as-of-date {{snapshot_date}}"

parl-review-queue:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py review-queue --db {{db_path}} --source-id {{declared_source_id}} --status pending --limit {{declared_review_limit}}"

parl-review-resolve evidence_id stance:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py review-decision --db {{db_path}} --source-id {{declared_source_id}} --evidence-ids {{evidence_id}} --status resolved --final-stance {{stance}} --recompute --as-of-date {{snapshot_date}}"

parl-temas-pipeline:
  just parl-link-votes
  just parl-backfill-topic-analytics
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_intervenciones --snapshot-date {{snapshot_date}} --strict-network"
  just parl-backfill-text-documents
  just parl-backfill-declared-stance
  just parl-backfill-declared-positions
  just parl-backfill-combined-positions

parl-quality-report:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}}"

parl-quality-report-json:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --json-out etl/data/published/votaciones-kpis-es-{{snapshot_date}}.json"

parl-quality-report-initiatives:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --include-initiatives --initiative-source-ids congreso_iniciativas,senado_iniciativas --json-out etl/data/published/votaciones-kpis-initiatives-es-{{snapshot_date}}.json"

parl-quality-report-initiatives-enforce:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --include-initiatives --initiative-source-ids congreso_iniciativas,senado_iniciativas --enforce-gate --json-out etl/data/published/votaciones-kpis-initiatives-es-{{snapshot_date}}.json"

parl-quality-report-declared:
  out_arg=""; skip_arg=""; \
  if [ -n "{{declared_quality_out}}" ]; then \
    out_arg=" --json-out {{declared_quality_out}}"; \
  fi; \
  if [ "{{declared_quality_skip_vote_gate}}" = "1" ]; then \
    skip_arg=" --skip-vote-gate"; \
  fi; \
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --source-ids {{declared_quality_vote_source_ids}} --include-declared --declared-source-ids {{declared_quality_source_ids}}${skip_arg}${out_arg}"

parl-quality-report-declared-enforce:
  out_arg=""; skip_arg=""; \
  if [ -n "{{declared_quality_out}}" ]; then \
    out_arg=" --json-out {{declared_quality_out}}"; \
  fi; \
  if [ "{{declared_quality_skip_vote_gate}}" = "1" ]; then \
    skip_arg=" --skip-vote-gate"; \
  fi; \
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --source-ids {{declared_quality_vote_source_ids}} --include-declared --declared-source-ids {{declared_quality_source_ids}} --enforce-gate${skip_arg}${out_arg}"

parl-quality-report-unmatched:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --include-unmatched --unmatched-sample-limit 50"

parl-quality-pipeline:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-member-ids --db {{db_path}} --unmatched-sample-limit 50"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py link-votes --db {{db_path}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-topic-analytics --db {{db_path}} --as-of-date {{snapshot_date}} --taxonomy-seed {{topic_taxonomy_seed}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --include-initiatives --initiative-source-ids congreso_iniciativas,senado_iniciativas --enforce-gate --json-out etl/data/published/votaciones-kpis-es-{{snapshot_date}}.json"

parl-publish-votaciones:
  just parl-quality-pipeline
  just etl-publish-votaciones

parl-congreso-votaciones-pipeline:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_votaciones --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-member-ids --db {{db_path}} --source-ids congreso_votaciones --unmatched-sample-limit 50"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py link-votes --db {{db_path}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py quality-report --db {{db_path}} --source-ids congreso_votaciones --json-out etl/data/published/votaciones-kpis-congreso-{{snapshot_date}}.json"
  docker compose run --rm --build etl "python3 scripts/publicar_votaciones_es.py --db {{db_path}} --snapshot-date {{snapshot_date}} --source-ids congreso_votaciones --backfill-member-ids --include-unmatched --unmatched-sample-limit 100"

congreso-votaciones-download-zips:
  python3 scripts/download_congreso_votaciones_zips.py --max-workers 20 --timeout 30

senado-votaciones-download-xmls:
  python3 scripts/download_senado_votaciones_xmls.py --max-workers 20 --timeout 30

parl-backfill-member-ids:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-member-ids --db {{db_path}}"

parl-backfill-member-ids-dry-run:
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py backfill-member-ids --db {{db_path}} --dry-run"

etl-smoke-e2e:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py init-db --db {{db_path}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source congreso_diputados --from-file etl/data/raw/samples/congreso_diputados_sample.json --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_votaciones --from-file etl/data/raw/samples/congreso_votaciones_sample.json --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/etl_smoke_e2e.py --db {{db_path}}"

etl-smoke-votes:
  python3 scripts/ingestar_parlamentario_es.py init-db --db {{db_path}}
  python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source congreso_votaciones --from-file etl/data/raw/samples/congreso_votaciones_sample.json --snapshot-date {{snapshot_date}} --strict-network
  python3 scripts/ingestar_parlamentario_es.py ingest --db {{db_path}} --source senado_votaciones --from-file etl/data/raw/samples/senado_votaciones_sample.xml --snapshot-date {{snapshot_date}} --strict-network
  python3 scripts/etl_smoke_votes.py --db {{db_path}}

etl-extract-congreso:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source congreso_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-cortes-aragon:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_aragon_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-senado:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source senado_senadores --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-europarl:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source europarl_meps --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-municipal:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source municipal_concejales --snapshot-date {{snapshot_date}} --strict-network --timeout {{municipal_timeout}}"

etl-extract-asamblea-madrid:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_madrid_ocupaciones --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-asamblea-ceuta:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_ceuta_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-asamblea-melilla:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_melilla_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-asamblea-extremadura:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_extremadura_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-asamblea-murcia:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_murcia_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-jgpa:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source jgpa_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-canarias:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_canarias_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-cantabria:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_cantabria_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlament-balears:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_balears_diputats --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-larioja:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_larioja_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlament-catalunya:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_catalunya_diputats --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-corts-valencianes:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source corts_valencianes_diputats --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-cortes-clm:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_clm_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-cortes-cyl:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_cyl_procuradores --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-andalucia:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_andalucia_diputados --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-vasco:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_vasco_parlamentarios --snapshot-date {{snapshot_date}} --strict-network"

etl-extract-parlamento-galicia-manual:
  test -d {{galicia_manual_dir}} || (echo "GALICIA_MANUAL_DIR no existe: {{galicia_manual_dir}}. Captura perfiles (Playwright) y exporta la ruta." && exit 2)
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_galicia_deputados --from-file {{galicia_manual_dir}} --snapshot-date {{snapshot_date}}"

etl-extract-parlamento-navarra-manual:
  test -d {{navarra_manual_dir}} || (echo "NAVARRA_MANUAL_DIR no existe: {{navarra_manual_dir}}. Captura perfiles (Playwright) y exporta la ruta." && exit 2)
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_navarra_parlamentarios_forales --from-file {{navarra_manual_dir}} --snapshot-date {{snapshot_date}}"

etl-extract-infoelectoral-descargas:
  docker compose run --rm --build etl "python3 scripts/ingestar_infoelectoral_es.py ingest --db {{db_path}} --source infoelectoral_descargas --snapshot-date {{snapshot_date}} --timeout {{infoelectoral_timeout}} --strict-network"

etl-extract-infoelectoral-procesos:
  docker compose run --rm --build etl "python3 scripts/ingestar_infoelectoral_es.py ingest --db {{db_path}} --source infoelectoral_procesos --snapshot-date {{snapshot_date}} --timeout {{infoelectoral_timeout}} --strict-network"

etl-extract-all:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source congreso_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_aragon_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source senado_senadores --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source europarl_meps --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source municipal_concejales --snapshot-date {{snapshot_date}} --strict-network --timeout {{municipal_timeout}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_madrid_ocupaciones --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_ceuta_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_melilla_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_extremadura_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_murcia_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source jgpa_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_canarias_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_cantabria_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_balears_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_larioja_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_catalunya_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source corts_valencianes_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_clm_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_cyl_procuradores --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_andalucia_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_vasco_parlamentarios --snapshot-date {{snapshot_date}} --strict-network"

etl-e2e:
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py init-db --db {{db_path}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source congreso_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_aragon_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source senado_senadores --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source europarl_meps --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source municipal_concejales --snapshot-date {{snapshot_date}} --strict-network --timeout {{municipal_timeout}}"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_madrid_ocupaciones --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_ceuta_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_melilla_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_extremadura_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source asamblea_murcia_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source jgpa_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_canarias_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_cantabria_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_balears_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_larioja_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlament_catalunya_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source corts_valencianes_diputats --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_clm_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source cortes_cyl_procuradores --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_andalucia_diputados --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py ingest --db {{db_path}} --source parlamento_vasco_parlamentarios --snapshot-date {{snapshot_date}} --strict-network"
  docker compose run --rm --build etl "python3 scripts/ingestar_politicos_es.py stats --db {{db_path}}"

etl-poblacion-municipios-json:
  python3 etl/poblacion_municipios.py --json-out etl/data/published/poblacion_municipios_es.json

etl-poblacion-municipios-2025:
  python3 etl/poblacion_municipios.py --year 2025 --workers 20 --timeout 30 --json-out etl/data/published/poblacion_municipios_es.json

# UI: explorador de grafo (web)
graph-ui:
  DB_PATH={{db_path}} docker compose up --build graph-ui

graph-ui-bg:
  DB_PATH={{db_path}} docker compose up --build -d graph-ui

graph-ui-stop:
  docker compose stop graph-ui
  docker compose rm -f graph-ui

# UI: explorador directo (localhost, sin Docker)
# Single app serving:
# - /explorer -> interfaz clsica
# - /explorer-politico -> vista poltica jerrquica (radar poltico)
# - /explorer-sources -> panel de estado de fuentes
explorer:
  DB_PATH={{db_path}} EXPLORER_HOST={{explorer_host}} EXPLORER_PORT={{explorer_port}} python3 scripts/watch_graph_ui_server.py

explorer-watch:
  DB_PATH={{db_path}} EXPLORER_HOST={{explorer_host}} EXPLORER_PORT={{explorer_port}} python3 scripts/watch_graph_ui_server.py

explorer-bg:
  @just explorer-stop >/tmp/vota-explorer-ui-stop.log 2>&1 || true
  DB_PATH={{db_path}} nohup python3 scripts/graph_ui_server.py --db "{{db_path}}" --host {{explorer_host}} --port {{explorer_port}} >/tmp/vota-explorer-ui.log 2>&1 & echo $! >/tmp/vota-explorer-ui.pid
  @echo "Explorer corriendo en http://{{explorer_host}}:{{explorer_port}}/explorer"
  @echo "Explorer poltico en http://{{explorer_host}}:{{explorer_port}}/explorer-politico"
  @echo "Fuentes en http://{{explorer_host}}:{{explorer_port}}/explorer-sources"
  @echo "Ciudadana en http://{{explorer_host}}:{{explorer_port}}/citizen"
  @echo "PID guardado en /tmp/vota-explorer-ui.pid"
  @echo "Logs en /tmp/vota-explorer-ui.log"

explorer-bg-watch:
  @just explorer-stop >/tmp/vota-explorer-ui-stop.log 2>&1 || true
  DB_PATH={{db_path}} EXPLORER_HOST={{explorer_host}} EXPLORER_PORT={{explorer_port}} nohup python3 scripts/watch_graph_ui_server.py >/tmp/vota-explorer-ui.log 2>&1 & echo $! >/tmp/vota-explorer-ui.pid
  @echo "Explorer (watch) corriendo en http://{{explorer_host}}:{{explorer_port}}/explorer"
  @echo "Explorer poltico en http://{{explorer_host}}:{{explorer_port}}/explorer-politico"
  @echo "Fuentes en http://{{explorer_host}}:{{explorer_port}}/explorer-sources"
  @echo "Ciudadana en http://{{explorer_host}}:{{explorer_port}}/citizen"
  @echo "PID guardado en /tmp/vota-explorer-ui.pid"
  @echo "Logs en /tmp/vota-explorer-ui.log"

explorer-gh-pages-build:
  rm -rf {{gh_pages_dir}}/explorer-sports {{gh_pages_dir}}/explorer-politico {{gh_pages_dir}}/explorer-temas {{gh_pages_dir}}/explorer-sources/data {{gh_pages_dir}}/citizen
  mkdir -p {{gh_pages_dir}}/explorer {{gh_pages_dir}}/graph {{gh_pages_dir}}/graph/data {{gh_pages_dir}}/explorer-politico {{gh_pages_dir}}/explorer-politico/data {{gh_pages_dir}}/explorer-sources {{gh_pages_dir}}/explorer-sources/data {{gh_pages_dir}}/explorer-temas {{gh_pages_dir}}/explorer-temas/data {{gh_pages_dir}}/explorer-votaciones {{gh_pages_dir}}/explorer-votaciones/data {{gh_pages_dir}}/citizen {{gh_pages_dir}}/citizen/data
  python3 scripts/build_citizen_tailwind_md3_css.py --tokens "{{citizen_tailwind_md3_tokens}}" --out "{{citizen_tailwind_md3_css}}"
  cp ui/graph/explorers.html {{gh_pages_dir}}/index.html
  cp ui/graph/explorer.html {{gh_pages_dir}}/explorer/index.html
  cp ui/graph/index.html {{gh_pages_dir}}/graph/index.html
  cp ui/graph/explorer-sports.html {{gh_pages_dir}}/explorer-politico/index.html
  cp ui/graph/explorer-temas.html {{gh_pages_dir}}/explorer-temas/index.html
  cp ui/graph/explorer-votaciones.html {{gh_pages_dir}}/explorer-votaciones/index.html
  cp ui/graph/explorer-sources.html {{gh_pages_dir}}/explorer-sources/index.html
  cp ui/citizen/index.html {{gh_pages_dir}}/citizen/index.html
  cp ui/citizen/preset_codec.js {{gh_pages_dir}}/citizen/preset_codec.js
  cp ui/citizen/onboarding_funnel.js {{gh_pages_dir}}/citizen/onboarding_funnel.js
  cp ui/citizen/first_answer_accelerator.js {{gh_pages_dir}}/citizen/first_answer_accelerator.js
  cp ui/citizen/unknown_explainability.js {{gh_pages_dir}}/citizen/unknown_explainability.js
  cp ui/citizen/cross_method_stability.js {{gh_pages_dir}}/citizen/cross_method_stability.js
  cp ui/citizen/evidence_trust_panel.js {{gh_pages_dir}}/citizen/evidence_trust_panel.js
  cp ui/citizen/tailwind_md3.generated.css {{gh_pages_dir}}/citizen/tailwind_md3.generated.css
  cp ui/citizen/tailwind_md3.tokens.json {{gh_pages_dir}}/citizen/tailwind_md3.tokens.json
  cp ui/citizen/tailwind_md3.tokens.json {{gh_pages_dir}}/citizen/data/tailwind_md3.tokens.json
  cp ui/citizen/concerns_v1.json {{gh_pages_dir}}/citizen/data/concerns_v1.json
  python3 scripts/validate_citizen_concerns.py \
    --path "{{gh_pages_dir}}/citizen/data/concerns_v1.json"
  python3 scripts/export_explorer_sports_snapshot.py \
    --db "{{db_path}}" \
    --snapshot-date {{snapshot_date}} \
    --out-dir "{{gh_pages_dir}}/explorer-politico/data"
  python3 scripts/export_graph_snapshot.py \
    --db "{{db_path}}" \
    --limit 350 \
    --include-inactive \
    --out "{{gh_pages_dir}}/graph/data/graph.json"
  python3 scripts/export_explorer_votaciones_snapshot.py \
    --db "{{db_path}}" \
    --limit 200 \
    --out "{{gh_pages_dir}}/explorer-votaciones/data/votes-preview.json"
  python3 scripts/export_explorer_sources_snapshot.py \
    --db "{{db_path}}" \
    --out "{{gh_pages_dir}}/explorer-sources/data/status.json"
  python3 scripts/export_explorer_temas_snapshot.py \
    --db "{{db_path}}" \
    --out "{{gh_pages_dir}}/explorer-temas/data/temas-preview.json"
  python3 scripts/export_citizen_snapshot.py \
    --db "{{db_path}}" \
    --out "{{gh_pages_dir}}/citizen/data/citizen.json" \
    --topic-set-id 1 \
    --computed-method combined \
    --max-bytes 5000000
  python3 scripts/export_citizen_snapshot.py \
    --db "{{db_path}}" \
    --out "{{gh_pages_dir}}/citizen/data/citizen_votes.json" \
    --topic-set-id 1 \
    --computed-method votes \
    --max-bytes 5000000
  python3 scripts/export_citizen_snapshot.py \
    --db "{{db_path}}" \
    --out "{{gh_pages_dir}}/citizen/data/citizen_declared.json" \
    --topic-set-id 1 \
    --computed-method declared \
    --max-bytes 5000000
  python3 scripts/validate_citizen_snapshot.py \
    --path "{{gh_pages_dir}}/citizen/data/citizen.json" \
    --max-bytes 5000000 \
    --strict-grid
  python3 scripts/validate_citizen_snapshot.py \
    --path "{{gh_pages_dir}}/citizen/data/citizen_votes.json" \
    --max-bytes 5000000 \
    --strict-grid
  python3 scripts/validate_citizen_snapshot.py \
    --path "{{gh_pages_dir}}/citizen/data/citizen_declared.json" \
    --max-bytes 5000000 \
    --strict-grid
  python3 scripts/report_citizen_concern_pack_quality.py \
    --snapshot "{{gh_pages_dir}}/citizen/data/citizen.json" \
    --concerns-config "{{gh_pages_dir}}/citizen/data/concerns_v1.json" \
    --out "{{gh_pages_dir}}/citizen/data/concern_pack_quality.json"
  cp docs/ideal_sources_say_do.json "{{gh_pages_dir}}/explorer-sources/data/ideal.json"
  just privacy-check-public-artifacts
  @echo "Build GitHub Pages listo en {{gh_pages_dir}}"

privacy-check-public-artifacts:
  python3 scripts/check_public_privacy_leaks.py --path "{{gh_pages_dir}}" --path etl/data/published

citizen-test-preset-codec:
  node --test tests/test_citizen_preset_codec.js tests/test_citizen_preset_recovery_ui_contract.js tests/test_report_citizen_preset_fixture_contract.js tests/test_report_citizen_preset_codec_parity.js tests/test_report_citizen_preset_codec_sync_state.js tests/test_report_citizen_preset_contract_bundle.js tests/test_report_citizen_preset_contract_bundle_history.js tests/test_report_citizen_preset_contract_bundle_history_window.js tests/test_report_citizen_preset_contract_bundle_history_compaction.js tests/test_report_citizen_preset_contract_bundle_history_slo.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_window.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_window.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_compaction.js tests/test_report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.js

citizen-test-onboarding-funnel:
  node --test tests/test_citizen_onboarding_funnel.js tests/test_citizen_onboarding_ui_contract.js

citizen-test-first-answer-accelerator:
  node --test tests/test_citizen_first_answer_accelerator.js tests/test_citizen_first_answer_ui_contract.js

citizen-test-unknown-explainability:
  node --test tests/test_citizen_unknown_explainability.js tests/test_citizen_unknown_explainability_ui_contract.js

citizen-test-evidence-trust-panel:
  node --test tests/test_citizen_evidence_trust_panel.js tests/test_citizen_evidence_trust_panel_ui_contract.js

citizen-test-cross-method-stability:
  node --test tests/test_citizen_cross_method_stability.js tests/test_citizen_cross_method_stability_ui_contract.js

citizen-test-coherence-drilldown:
  node --test tests/test_citizen_coherence_drilldown_ui_contract.js tests/test_explorer_temas_coherence_drilldown_url_contract.js
  python3 -m unittest tests/test_graph_ui_server_coherence.py

citizen-test-accessibility-readability:
  node --test tests/test_citizen_accessibility_readability_ui_contract.js

citizen-test-explainability-copy:
  node --test tests/test_citizen_explainability_copy_ui_contract.js
  python3 -m unittest tests/test_report_citizen_explainability_copy.py

citizen-test-explainability-outcomes:
  node --test tests/test_citizen_explainability_outcomes_ui_contract.js
  python3 -m unittest tests/test_report_citizen_explainability_outcomes.py

citizen-test-explainability-outcomes-heartbeat:
  python3 -m unittest tests/test_report_citizen_explainability_outcomes_heartbeat.py tests/test_report_citizen_explainability_outcomes_heartbeat_window.py

citizen-test-coherence-drilldown-outcomes:
  python3 -m unittest tests/test_report_citizen_coherence_drilldown_outcomes.py tests/test_report_citizen_coherence_drilldown_outcomes_heartbeat.py tests/test_report_citizen_coherence_drilldown_outcomes_heartbeat_window.py tests/test_report_citizen_coherence_drilldown_outcomes_heartbeat_compaction.py tests/test_report_citizen_coherence_drilldown_outcomes_heartbeat_compaction_window.py

citizen-test-product-kpis-heartbeat:
  python3 -m unittest tests/test_report_citizen_product_kpis_heartbeat.py tests/test_report_citizen_product_kpis_heartbeat_window.py tests/test_report_citizen_product_kpis_heartbeat_compaction.py tests/test_report_citizen_product_kpis_heartbeat_compaction_window.py

citizen-test-mobile-performance:
  node --test tests/test_citizen_mobile_performance_ui_contract.js
  python3 -m unittest tests/test_report_citizen_mobile_performance_budget.py

citizen-test-mobile-observability:
  node --test tests/test_citizen_mobile_observability_ui_contract.js
  python3 -m unittest tests/test_report_citizen_mobile_observability.py

citizen-test-mobile-observability-heartbeat:
  python3 -m unittest tests/test_report_citizen_mobile_observability_heartbeat.py tests/test_report_citizen_mobile_observability_heartbeat_window.py tests/test_report_citizen_mobile_observability_heartbeat_compaction.py tests/test_report_citizen_mobile_observability_heartbeat_compaction_window.py

citizen-test-tailwind-md3:
  node --test tests/test_citizen_tailwind_md3_ui_contract.js
  python3 -m unittest tests/test_build_citizen_tailwind_md3_css.py tests/test_report_citizen_tailwind_md3_contract.py tests/test_report_citizen_tailwind_md3_visual_drift_digest.py tests/test_report_citizen_tailwind_md3_visual_drift_digest_heartbeat.py tests/test_report_citizen_tailwind_md3_visual_drift_digest_heartbeat_window.py tests/test_report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction.py tests/test_report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction_window.py tests/test_graph_ui_server_citizen_assets.py

citizen-test-concern-pack-quality:
  node --test tests/test_citizen_concern_pack_quality_ui_contract.js
  python3 -m unittest tests/test_report_citizen_concern_pack_quality.py

citizen-test-concern-pack-outcomes:
  node --test tests/test_citizen_concern_pack_outcomes_ui_contract.js
  python3 -m unittest tests/test_report_citizen_concern_pack_outcomes.py

citizen-test-concern-pack-outcomes-heartbeat:
  python3 -m unittest tests/test_report_citizen_concern_pack_outcomes_heartbeat.py tests/test_report_citizen_concern_pack_outcomes_heartbeat_window.py tests/test_report_citizen_concern_pack_outcomes_heartbeat_compaction.py tests/test_report_citizen_concern_pack_outcomes_heartbeat_compaction_window.py

citizen-test-trust-action-nudges:
  node --test tests/test_citizen_trust_action_nudges.js tests/test_citizen_trust_action_nudges_ui_contract.js
  python3 -m unittest tests/test_report_citizen_trust_action_nudges.py

citizen-test-trust-action-nudges-heartbeat:
  python3 -m unittest tests/test_report_citizen_trust_action_nudges_heartbeat.py tests/test_report_citizen_trust_action_nudges_heartbeat_window.py tests/test_report_citizen_trust_action_nudges_heartbeat_compaction.py tests/test_report_citizen_trust_action_nudges_heartbeat_compaction_window.py

citizen-test-release-hardening:
  node --test tests/test_report_citizen_release_hardening.js

citizen-test-release-trace-digest:
  node --test tests/test_report_citizen_release_trace_digest.js

citizen-test-release-trace-heartbeat:
  python3 -m unittest tests/test_report_citizen_release_trace_digest_heartbeat.py tests/test_report_citizen_release_trace_digest_heartbeat_window.py tests/test_report_citizen_release_trace_digest_heartbeat_compaction.py tests/test_report_citizen_release_trace_digest_heartbeat_compaction_window.py

citizen-release-regression-suite:
  just citizen-test-preset-codec
  just citizen-test-tailwind-md3
  just citizen-test-accessibility-readability
  just citizen-test-explainability-copy
  just citizen-test-explainability-outcomes
  just citizen-test-explainability-outcomes-heartbeat
  just citizen-test-product-kpis-heartbeat
  just citizen-test-mobile-observability-heartbeat
  just citizen-test-release-trace-digest
  just citizen-test-release-trace-heartbeat
  just citizen-test-evidence-trust-panel
  just citizen-test-cross-method-stability
  just citizen-test-coherence-drilldown
  just citizen-test-coherence-drilldown-outcomes
  just citizen-test-mobile-performance
  just citizen-test-mobile-observability
  just citizen-test-mobile-observability-heartbeat
  just citizen-test-first-answer-accelerator
  just citizen-test-unknown-explainability
  just citizen-test-concern-pack-quality
  just citizen-test-concern-pack-outcomes
  just citizen-test-concern-pack-outcomes-heartbeat
  just citizen-test-trust-action-nudges
  just citizen-test-trust-action-nudges-heartbeat

citizen-report-product-kpis:
  events_arg=""; \
  if [ -n "{{citizen_product_kpi_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_product_kpi_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_product_kpi_summary}}" ]; then summary_arg="--telemetry-json {{citizen_product_kpi_summary}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_out}}" ]; then out_arg="--out {{citizen_product_kpi_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis.py --snapshot "{{citizen_product_kpi_snapshot}}" --max-unknown-rate "{{citizen_product_kpi_max_unknown_rate}}" --max-time-to-first-answer-seconds "{{citizen_product_kpi_max_tfa_seconds}}" --min-drilldown-click-rate "{{citizen_product_kpi_min_drilldown_rate}}" ${summary_arg} ${events_arg} ${out_arg}

citizen-check-product-kpis:
  events_arg=""; \
  if [ -n "{{citizen_product_kpi_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_product_kpi_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_product_kpi_summary}}" ]; then summary_arg="--telemetry-json {{citizen_product_kpi_summary}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_out}}" ]; then out_arg="--out {{citizen_product_kpi_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis.py --snapshot "{{citizen_product_kpi_snapshot}}" --max-unknown-rate "{{citizen_product_kpi_max_unknown_rate}}" --max-time-to-first-answer-seconds "{{citizen_product_kpi_max_tfa_seconds}}" --min-drilldown-click-rate "{{citizen_product_kpi_min_drilldown_rate}}" --strict ${summary_arg} ${events_arg} ${out_arg}

citizen-check-product-kpis-complete:
  events_arg=""; \
  if [ -n "{{citizen_product_kpi_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_product_kpi_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_product_kpi_summary}}" ]; then summary_arg="--telemetry-json {{citizen_product_kpi_summary}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_out}}" ]; then out_arg="--out {{citizen_product_kpi_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis.py --snapshot "{{citizen_product_kpi_snapshot}}" --max-unknown-rate "{{citizen_product_kpi_max_unknown_rate}}" --max-time-to-first-answer-seconds "{{citizen_product_kpi_max_tfa_seconds}}" --min-drilldown-click-rate "{{citizen_product_kpi_min_drilldown_rate}}" --strict --strict-require-complete ${summary_arg} ${events_arg} ${out_arg}

citizen-report-product-kpis-heartbeat:
  events_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_product_kpi_heartbeat_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_summary}}" ]; then summary_arg="--telemetry-json {{citizen_product_kpi_heartbeat_summary}}"; fi; \
  python3 scripts/report_citizen_product_kpis.py --snapshot "{{citizen_product_kpi_snapshot}}" --max-unknown-rate "{{citizen_product_kpi_max_unknown_rate}}" --max-time-to-first-answer-seconds "{{citizen_product_kpi_max_tfa_seconds}}" --min-drilldown-click-rate "{{citizen_product_kpi_min_drilldown_rate}}" ${summary_arg} ${events_arg} --out "{{citizen_product_kpi_heartbeat_digest}}"
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat.py --digest-json "{{citizen_product_kpi_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" ${out_arg}

citizen-check-product-kpis-heartbeat:
  events_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_product_kpi_heartbeat_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_summary}}" ]; then summary_arg="--telemetry-json {{citizen_product_kpi_heartbeat_summary}}"; fi; \
  python3 scripts/report_citizen_product_kpis.py --snapshot "{{citizen_product_kpi_snapshot}}" --max-unknown-rate "{{citizen_product_kpi_max_unknown_rate}}" --max-time-to-first-answer-seconds "{{citizen_product_kpi_max_tfa_seconds}}" --min-drilldown-click-rate "{{citizen_product_kpi_min_drilldown_rate}}" --strict --strict-require-complete ${summary_arg} ${events_arg} --out "{{citizen_product_kpi_heartbeat_digest}}"
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat.py --digest-json "{{citizen_product_kpi_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --strict ${out_arg}

citizen-report-product-kpis-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_window.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --last "{{citizen_product_kpi_heartbeat_window_last}}" --max-failed "{{citizen_product_kpi_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_product_kpi_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_product_kpi_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_product_kpi_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_product_kpi_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_product_kpi_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-unknown-rate-violations "{{citizen_product_kpi_heartbeat_window_max_unknown_rate_violations}}" --max-unknown-rate-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_unknown_rate_violation_rate_pct}}" --max-tfa-violations "{{citizen_product_kpi_heartbeat_window_max_tfa_violations}}" --max-tfa-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_tfa_violation_rate_pct}}" --max-drilldown-violations "{{citizen_product_kpi_heartbeat_window_max_drilldown_violations}}" --max-drilldown-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_drilldown_violation_rate_pct}}" ${out_arg}

citizen-check-product-kpis-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_window.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --last "{{citizen_product_kpi_heartbeat_window_last}}" --max-failed "{{citizen_product_kpi_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_product_kpi_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_product_kpi_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_product_kpi_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_product_kpi_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_product_kpi_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-unknown-rate-violations "{{citizen_product_kpi_heartbeat_window_max_unknown_rate_violations}}" --max-unknown-rate-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_unknown_rate_violation_rate_pct}}" --max-tfa-violations "{{citizen_product_kpi_heartbeat_window_max_tfa_violations}}" --max-tfa-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_tfa_violation_rate_pct}}" --max-drilldown-violations "{{citizen_product_kpi_heartbeat_window_max_drilldown_violations}}" --max-drilldown-violation-rate-pct "{{citizen_product_kpi_heartbeat_window_max_drilldown_violation_rate_pct}}" --strict ${out_arg}

citizen-report-product-kpis-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --compacted-jsonl "{{citizen_product_kpi_heartbeat_compact_path}}" --keep-recent "{{citizen_product_kpi_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_product_kpi_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_product_kpi_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_product_kpi_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_product_kpi_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-product-kpis-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --compacted-jsonl "{{citizen_product_kpi_heartbeat_compact_path}}" --keep-recent "{{citizen_product_kpi_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_product_kpi_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_product_kpi_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_product_kpi_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_product_kpi_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-product-kpis-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --compacted-jsonl "{{citizen_product_kpi_heartbeat_compact_path}}" --last "{{citizen_product_kpi_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-product-kpis-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_product_kpi_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_product_kpi_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_product_kpis_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_product_kpi_heartbeat_path}}" --compacted-jsonl "{{citizen_product_kpi_heartbeat_compact_path}}" --last "{{citizen_product_kpi_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-mobile-performance-budget:
  out_arg=""; \
  if [ -n "{{citizen_mobile_perf_out}}" ]; then out_arg="--out {{citizen_mobile_perf_out}}"; fi; \
  python3 scripts/report_citizen_mobile_performance_budget.py --ui-html "{{citizen_mobile_perf_ui_html}}" --ui-assets "{{citizen_mobile_perf_ui_assets}}" --snapshot "{{citizen_mobile_perf_snapshot}}" --max-ui-html-bytes "{{citizen_mobile_perf_max_ui_html_bytes}}" --max-ui-assets-total-bytes "{{citizen_mobile_perf_max_ui_assets_total_bytes}}" --max-snapshot-bytes "{{citizen_mobile_perf_max_snapshot_bytes}}" ${out_arg}

citizen-check-mobile-performance-budget:
  out_arg=""; \
  if [ -n "{{citizen_mobile_perf_out}}" ]; then out_arg="--out {{citizen_mobile_perf_out}}"; fi; \
  python3 scripts/report_citizen_mobile_performance_budget.py --ui-html "{{citizen_mobile_perf_ui_html}}" --ui-assets "{{citizen_mobile_perf_ui_assets}}" --snapshot "{{citizen_mobile_perf_snapshot}}" --max-ui-html-bytes "{{citizen_mobile_perf_max_ui_html_bytes}}" --max-ui-assets-total-bytes "{{citizen_mobile_perf_max_ui_assets_total_bytes}}" --max-snapshot-bytes "{{citizen_mobile_perf_max_snapshot_bytes}}" --strict ${out_arg}

citizen-report-mobile-observability:
  events_arg=""; \
  if [ -n "{{citizen_mobile_obs_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_mobile_obs_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_mobile_obs_summary}}" ]; then summary_arg="--telemetry-json {{citizen_mobile_obs_summary}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_out}}" ]; then out_arg="--out {{citizen_mobile_obs_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability.py --min-samples "{{citizen_mobile_obs_min_samples}}" --max-input-to-render-p50-ms "{{citizen_mobile_obs_max_p50_ms}}" --max-input-to-render-p90-ms "{{citizen_mobile_obs_max_p90_ms}}" ${summary_arg} ${events_arg} ${out_arg}

citizen-check-mobile-observability:
  events_arg=""; \
  if [ -n "{{citizen_mobile_obs_events}}" ]; then events_arg="--telemetry-events-jsonl {{citizen_mobile_obs_events}}"; fi; \
  summary_arg=""; \
  if [ -n "{{citizen_mobile_obs_summary}}" ]; then summary_arg="--telemetry-json {{citizen_mobile_obs_summary}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_out}}" ]; then out_arg="--out {{citizen_mobile_obs_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability.py --min-samples "{{citizen_mobile_obs_min_samples}}" --max-input-to-render-p50-ms "{{citizen_mobile_obs_max_p50_ms}}" --max-input-to-render-p90-ms "{{citizen_mobile_obs_max_p90_ms}}" --strict --strict-require-complete ${summary_arg} ${events_arg} ${out_arg}

citizen-report-mobile-observability-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat.py --observability-json "{{citizen_mobile_obs_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" ${out_arg}

citizen-check-mobile-observability-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat.py --observability-json "{{citizen_mobile_obs_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --strict ${out_arg}

citizen-report-mobile-observability-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_window.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --last "{{citizen_mobile_obs_heartbeat_window_last}}" --max-failed "{{citizen_mobile_obs_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_mobile_obs_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_degraded_rate_pct}}" --max-p90-threshold-violations "{{citizen_mobile_obs_heartbeat_window_max_p90_threshold_violations}}" --max-p90-threshold-violation-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_p90_threshold_violation_rate_pct}}" ${out_arg}

citizen-check-mobile-observability-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_window.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --last "{{citizen_mobile_obs_heartbeat_window_last}}" --max-failed "{{citizen_mobile_obs_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_mobile_obs_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_degraded_rate_pct}}" --max-p90-threshold-violations "{{citizen_mobile_obs_heartbeat_window_max_p90_threshold_violations}}" --max-p90-threshold-violation-rate-pct "{{citizen_mobile_obs_heartbeat_window_max_p90_threshold_violation_rate_pct}}" --strict ${out_arg}

citizen-report-mobile-observability-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --compacted-jsonl "{{citizen_mobile_obs_heartbeat_compact_path}}" --keep-recent "{{citizen_mobile_obs_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_mobile_obs_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_mobile_obs_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_mobile_obs_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_mobile_obs_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-mobile-observability-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --compacted-jsonl "{{citizen_mobile_obs_heartbeat_compact_path}}" --keep-recent "{{citizen_mobile_obs_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_mobile_obs_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_mobile_obs_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_mobile_obs_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_mobile_obs_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-mobile-observability-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --compacted-jsonl "{{citizen_mobile_obs_heartbeat_compact_path}}" --last "{{citizen_mobile_obs_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-mobile-observability-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_mobile_obs_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_mobile_obs_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_mobile_observability_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_mobile_obs_heartbeat_path}}" --compacted-jsonl "{{citizen_mobile_obs_heartbeat_compact_path}}" --last "{{citizen_mobile_obs_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-build-tailwind-md3:
  python3 scripts/build_citizen_tailwind_md3_css.py --tokens "{{citizen_tailwind_md3_tokens}}" --out "{{citizen_tailwind_md3_css}}"

citizen-check-tailwind-md3-sync:
  python3 scripts/build_citizen_tailwind_md3_css.py --tokens "{{citizen_tailwind_md3_tokens}}" --out "{{citizen_tailwind_md3_css}}" --check

citizen-report-tailwind-md3:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_contract.py --tokens "{{citizen_tailwind_md3_tokens}}" --generated-css "{{citizen_tailwind_md3_css}}" --ui-html "{{citizen_mobile_perf_ui_html}}" --max-generated-css-bytes "{{citizen_tailwind_md3_max_css_bytes}}" --min-md3-card-markers "{{citizen_tailwind_md3_min_card_markers}}" --min-md3-chip-markers "{{citizen_tailwind_md3_min_chip_markers}}" --min-md3-button-markers "{{citizen_tailwind_md3_min_button_markers}}" --min-md3-tab-markers "{{citizen_tailwind_md3_min_tab_markers}}" ${out_arg}

citizen-check-tailwind-md3:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_contract.py --tokens "{{citizen_tailwind_md3_tokens}}" --generated-css "{{citizen_tailwind_md3_css}}" --ui-html "{{citizen_mobile_perf_ui_html}}" --max-generated-css-bytes "{{citizen_tailwind_md3_max_css_bytes}}" --min-md3-card-markers "{{citizen_tailwind_md3_min_card_markers}}" --min-md3-chip-markers "{{citizen_tailwind_md3_min_chip_markers}}" --min-md3-button-markers "{{citizen_tailwind_md3_min_button_markers}}" --min-md3-tab-markers "{{citizen_tailwind_md3_min_tab_markers}}" --strict ${out_arg}

citizen-report-tailwind-md3-drift-digest:
  python3 scripts/report_citizen_tailwind_md3_contract.py --tokens "{{citizen_tailwind_md3_tokens}}" --generated-css "{{citizen_tailwind_md3_css}}" --ui-html "{{citizen_mobile_perf_ui_html}}" --max-generated-css-bytes "{{citizen_tailwind_md3_max_css_bytes}}" --min-md3-card-markers "{{citizen_tailwind_md3_min_card_markers}}" --min-md3-chip-markers "{{citizen_tailwind_md3_min_chip_markers}}" --min-md3-button-markers "{{citizen_tailwind_md3_min_button_markers}}" --min-md3-tab-markers "{{citizen_tailwind_md3_min_tab_markers}}" --out "{{citizen_tailwind_md3_drift_contract}}"
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest.py --tailwind-contract-json "{{citizen_tailwind_md3_drift_contract}}" --source-tokens "{{citizen_tailwind_md3_tokens}}" --source-css "{{citizen_tailwind_md3_css}}" --source-ui-html "{{citizen_mobile_perf_ui_html}}" --published-tokens "{{citizen_tailwind_md3_drift_published_tokens}}" --published-data-tokens "{{citizen_tailwind_md3_drift_published_data_tokens}}" --published-css "{{citizen_tailwind_md3_drift_published_css}}" --published-ui-html "{{citizen_tailwind_md3_drift_published_ui_html}}" ${out_arg}

citizen-check-tailwind-md3-drift-digest:
  python3 scripts/report_citizen_tailwind_md3_contract.py --tokens "{{citizen_tailwind_md3_tokens}}" --generated-css "{{citizen_tailwind_md3_css}}" --ui-html "{{citizen_mobile_perf_ui_html}}" --max-generated-css-bytes "{{citizen_tailwind_md3_max_css_bytes}}" --min-md3-card-markers "{{citizen_tailwind_md3_min_card_markers}}" --min-md3-chip-markers "{{citizen_tailwind_md3_min_chip_markers}}" --min-md3-button-markers "{{citizen_tailwind_md3_min_button_markers}}" --min-md3-tab-markers "{{citizen_tailwind_md3_min_tab_markers}}" --strict --out "{{citizen_tailwind_md3_drift_contract}}"
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest.py --tailwind-contract-json "{{citizen_tailwind_md3_drift_contract}}" --source-tokens "{{citizen_tailwind_md3_tokens}}" --source-css "{{citizen_tailwind_md3_css}}" --source-ui-html "{{citizen_mobile_perf_ui_html}}" --published-tokens "{{citizen_tailwind_md3_drift_published_tokens}}" --published-data-tokens "{{citizen_tailwind_md3_drift_published_data_tokens}}" --published-css "{{citizen_tailwind_md3_drift_published_css}}" --published-ui-html "{{citizen_tailwind_md3_drift_published_ui_html}}" --strict --strict-require-complete ${out_arg}

citizen-report-tailwind-md3-drift-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat.py --digest-json "{{citizen_tailwind_md3_drift_out}}" --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" ${out_arg}

citizen-check-tailwind-md3-drift-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat.py --digest-json "{{citizen_tailwind_md3_drift_out}}" --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --strict ${out_arg}

citizen-report-tailwind-md3-drift-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_window.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --last "{{citizen_tailwind_md3_drift_heartbeat_window_last}}" --max-failed "{{citizen_tailwind_md3_drift_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_tailwind_md3_drift_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_degraded_rate_pct}}" --max-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch}}" --max-parity-mismatch-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch_rate_pct}}" --max-tokens-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_tokens_parity_mismatch}}" --max-tokens-data-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_tokens_data_parity_mismatch}}" --max-css-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_css_parity_mismatch}}" --max-ui-html-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_ui_html_parity_mismatch}}" --max-marker-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_marker_mismatch}}" ${out_arg}

citizen-check-tailwind-md3-drift-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_window.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --last "{{citizen_tailwind_md3_drift_heartbeat_window_last}}" --max-failed "{{citizen_tailwind_md3_drift_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_tailwind_md3_drift_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_degraded_rate_pct}}" --max-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch}}" --max-parity-mismatch-rate-pct "{{citizen_tailwind_md3_drift_heartbeat_window_max_parity_mismatch_rate_pct}}" --max-tokens-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_tokens_parity_mismatch}}" --max-tokens-data-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_tokens_data_parity_mismatch}}" --max-css-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_css_parity_mismatch}}" --max-ui-html-parity-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_ui_html_parity_mismatch}}" --max-marker-mismatch "{{citizen_tailwind_md3_drift_heartbeat_window_max_marker_mismatch}}" --strict ${out_arg}

citizen-report-tailwind-md3-drift-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --compacted-jsonl "{{citizen_tailwind_md3_drift_heartbeat_compact_path}}" --keep-recent "{{citizen_tailwind_md3_drift_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_tailwind_md3_drift_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_tailwind_md3_drift_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_tailwind_md3_drift_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_tailwind_md3_drift_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-tailwind-md3-drift-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --compacted-jsonl "{{citizen_tailwind_md3_drift_heartbeat_compact_path}}" --keep-recent "{{citizen_tailwind_md3_drift_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_tailwind_md3_drift_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_tailwind_md3_drift_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_tailwind_md3_drift_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_tailwind_md3_drift_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-tailwind-md3-drift-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --compacted-jsonl "{{citizen_tailwind_md3_drift_heartbeat_compact_path}}" --last "{{citizen_tailwind_md3_drift_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-tailwind-md3-drift-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_tailwind_md3_drift_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_tailwind_md3_drift_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_tailwind_md3_visual_drift_digest_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_tailwind_md3_drift_heartbeat_path}}" --compacted-jsonl "{{citizen_tailwind_md3_drift_heartbeat_compact_path}}" --last "{{citizen_tailwind_md3_drift_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-concern-pack-quality:
  out_arg=""; \
  if [ -n "{{citizen_pack_quality_out}}" ]; then out_arg="--out {{citizen_pack_quality_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_quality.py --snapshot "{{citizen_pack_quality_snapshot}}" --concerns-config "{{citizen_pack_quality_concerns}}" --min-topics-per-pack "{{citizen_pack_quality_min_topics_per_pack}}" --min-clear-cells-pct "{{citizen_pack_quality_min_clear_cells_pct}}" --max-unknown-cells-pct "{{citizen_pack_quality_max_unknown_cells_pct}}" --min-confidence-avg-signal "{{citizen_pack_quality_min_confidence_avg_signal}}" --min-high-stakes-share "{{citizen_pack_quality_min_high_stakes_share}}" --max-weak-packs "{{citizen_pack_quality_max_weak_packs}}" ${out_arg}

citizen-check-concern-pack-quality:
  out_arg=""; \
  if [ -n "{{citizen_pack_quality_out}}" ]; then out_arg="--out {{citizen_pack_quality_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_quality.py --snapshot "{{citizen_pack_quality_snapshot}}" --concerns-config "{{citizen_pack_quality_concerns}}" --min-topics-per-pack "{{citizen_pack_quality_min_topics_per_pack}}" --min-clear-cells-pct "{{citizen_pack_quality_min_clear_cells_pct}}" --max-unknown-cells-pct "{{citizen_pack_quality_max_unknown_cells_pct}}" --min-confidence-avg-signal "{{citizen_pack_quality_min_confidence_avg_signal}}" --min-high-stakes-share "{{citizen_pack_quality_min_high_stakes_share}}" --max-weak-packs "{{citizen_pack_quality_max_weak_packs}}" --strict ${out_arg}

citizen-report-concern-pack-outcomes:
  quality_arg=""; \
  if [ -n "{{citizen_pack_outcome_quality}}" ]; then quality_arg="--concern-pack-quality-json {{citizen_pack_outcome_quality}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_out}}" ]; then out_arg="--out {{citizen_pack_outcome_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes.py --events-jsonl "{{citizen_pack_outcome_events}}" --min-pack-select-events "{{citizen_pack_outcome_min_pack_select_events}}" --min-weak-pack-select-sessions "{{citizen_pack_outcome_min_weak_pack_select_sessions}}" --min-weak-pack-followthrough-rate "{{citizen_pack_outcome_min_weak_pack_followthrough_rate}}" --max-unknown-pack-select-share "{{citizen_pack_outcome_max_unknown_pack_select_share}}" ${quality_arg} ${out_arg}

citizen-check-concern-pack-outcomes:
  quality_arg=""; \
  if [ -n "{{citizen_pack_outcome_quality}}" ]; then quality_arg="--concern-pack-quality-json {{citizen_pack_outcome_quality}}"; fi; \
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_out}}" ]; then out_arg="--out {{citizen_pack_outcome_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes.py --events-jsonl "{{citizen_pack_outcome_events}}" --min-pack-select-events "{{citizen_pack_outcome_min_pack_select_events}}" --min-weak-pack-select-sessions "{{citizen_pack_outcome_min_weak_pack_select_sessions}}" --min-weak-pack-followthrough-rate "{{citizen_pack_outcome_min_weak_pack_followthrough_rate}}" --max-unknown-pack-select-share "{{citizen_pack_outcome_max_unknown_pack_select_share}}" --strict --strict-require-complete ${quality_arg} ${out_arg}

citizen-report-concern-pack-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat.py --digest-json "{{citizen_pack_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" ${out_arg}

citizen-check-concern-pack-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat.py --digest-json "{{citizen_pack_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --strict ${out_arg}

citizen-report-concern-pack-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --last "{{citizen_pack_outcome_heartbeat_window_last}}" --max-failed "{{citizen_pack_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_pack_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_pack_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-weak-pack-followthrough-violations "{{citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violations}}" --max-weak-pack-followthrough-violation-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violation_rate_pct}}" --max-unknown-pack-select-share-violations "{{citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violations}}" --max-unknown-pack-select-share-violation-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violation_rate_pct}}" ${out_arg}

citizen-check-concern-pack-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --last "{{citizen_pack_outcome_heartbeat_window_last}}" --max-failed "{{citizen_pack_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_pack_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_pack_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-weak-pack-followthrough-violations "{{citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violations}}" --max-weak-pack-followthrough-violation-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_weak_pack_followthrough_violation_rate_pct}}" --max-unknown-pack-select-share-violations "{{citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violations}}" --max-unknown-pack-select-share-violation-rate-pct "{{citizen_pack_outcome_heartbeat_window_max_unknown_pack_select_share_violation_rate_pct}}" --strict ${out_arg}

citizen-report-concern-pack-outcomes-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_pack_outcome_heartbeat_compact_path}}" --keep-recent "{{citizen_pack_outcome_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_pack_outcome_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_pack_outcome_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_pack_outcome_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_pack_outcome_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-concern-pack-outcomes-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_pack_outcome_heartbeat_compact_path}}" --keep-recent "{{citizen_pack_outcome_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_pack_outcome_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_pack_outcome_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_pack_outcome_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_pack_outcome_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-concern-pack-outcomes-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_pack_outcome_heartbeat_compact_path}}" --last "{{citizen_pack_outcome_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-concern-pack-outcomes-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_pack_outcome_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_pack_outcome_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_concern_pack_outcomes_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_pack_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_pack_outcome_heartbeat_compact_path}}" --last "{{citizen_pack_outcome_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-trust-action-nudges:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges.py --events-jsonl "{{citizen_trust_action_nudge_events}}" --min-nudge-shown-events "{{citizen_trust_action_nudge_min_shown_events}}" --min-nudge-shown-sessions "{{citizen_trust_action_nudge_min_shown_sessions}}" --min-nudge-clickthrough-rate "{{citizen_trust_action_nudge_min_clickthrough_rate}}" ${out_arg}

citizen-check-trust-action-nudges:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges.py --events-jsonl "{{citizen_trust_action_nudge_events}}" --min-nudge-shown-events "{{citizen_trust_action_nudge_min_shown_events}}" --min-nudge-shown-sessions "{{citizen_trust_action_nudge_min_shown_sessions}}" --min-nudge-clickthrough-rate "{{citizen_trust_action_nudge_min_clickthrough_rate}}" --strict --strict-require-complete ${out_arg}

citizen-report-trust-action-nudges-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat.py --digest-json "{{citizen_trust_action_nudge_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" ${out_arg}

citizen-check-trust-action-nudges-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat.py --digest-json "{{citizen_trust_action_nudge_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --strict ${out_arg}

citizen-report-trust-action-nudges-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_window.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --last "{{citizen_trust_action_nudge_heartbeat_window_last}}" --max-failed "{{citizen_trust_action_nudge_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_trust_action_nudge_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-nudge-clickthrough-violations "{{citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violations}}" --max-nudge-clickthrough-violation-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violation_rate_pct}}" ${out_arg}

citizen-check-trust-action-nudges-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_window.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --last "{{citizen_trust_action_nudge_heartbeat_window_last}}" --max-failed "{{citizen_trust_action_nudge_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_trust_action_nudge_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-nudge-clickthrough-violations "{{citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violations}}" --max-nudge-clickthrough-violation-rate-pct "{{citizen_trust_action_nudge_heartbeat_window_max_nudge_clickthrough_violation_rate_pct}}" --strict ${out_arg}

citizen-report-trust-action-nudges-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --compacted-jsonl "{{citizen_trust_action_nudge_heartbeat_compact_path}}" --keep-recent "{{citizen_trust_action_nudge_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_trust_action_nudge_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_trust_action_nudge_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_trust_action_nudge_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_trust_action_nudge_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-trust-action-nudges-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --compacted-jsonl "{{citizen_trust_action_nudge_heartbeat_compact_path}}" --keep-recent "{{citizen_trust_action_nudge_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_trust_action_nudge_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_trust_action_nudge_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_trust_action_nudge_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_trust_action_nudge_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-trust-action-nudges-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --compacted-jsonl "{{citizen_trust_action_nudge_heartbeat_compact_path}}" --last "{{citizen_trust_action_nudge_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-trust-action-nudges-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_trust_action_nudge_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_trust_action_nudge_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_trust_action_nudges_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_trust_action_nudge_heartbeat_path}}" --compacted-jsonl "{{citizen_trust_action_nudge_heartbeat_compact_path}}" --last "{{citizen_trust_action_nudge_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-explainability-copy:
  out_arg=""; \
  if [ -n "{{citizen_explainability_copy_out}}" ]; then out_arg="--out {{citizen_explainability_copy_out}}"; fi; \
  python3 scripts/report_citizen_explainability_copy.py --ui-html "{{citizen_explainability_copy_ui_html}}" --min-glossary-terms "{{citizen_explainability_copy_min_terms}}" --max-definition-words "{{citizen_explainability_copy_max_definition_words}}" --max-copy-sentence-words "{{citizen_explainability_copy_max_copy_sentence_words}}" --forbidden-jargon "{{citizen_explainability_copy_forbidden_jargon}}" ${out_arg}

citizen-check-explainability-copy:
  out_arg=""; \
  if [ -n "{{citizen_explainability_copy_out}}" ]; then out_arg="--out {{citizen_explainability_copy_out}}"; fi; \
  python3 scripts/report_citizen_explainability_copy.py --ui-html "{{citizen_explainability_copy_ui_html}}" --min-glossary-terms "{{citizen_explainability_copy_min_terms}}" --max-definition-words "{{citizen_explainability_copy_max_definition_words}}" --max-copy-sentence-words "{{citizen_explainability_copy_max_copy_sentence_words}}" --forbidden-jargon "{{citizen_explainability_copy_forbidden_jargon}}" --strict --strict-require-complete ${out_arg}

citizen-report-explainability-outcomes:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes.py --events-jsonl "{{citizen_explainability_outcome_events}}" --min-glossary-interaction-events "{{citizen_explainability_outcome_min_glossary_interaction_events}}" --min-help-copy-interaction-events "{{citizen_explainability_outcome_min_help_copy_interaction_events}}" --min-adoption-sessions "{{citizen_explainability_outcome_min_adoption_sessions}}" --min-adoption-completeness-rate "{{citizen_explainability_outcome_min_adoption_completeness_rate}}" ${out_arg}

citizen-check-explainability-outcomes:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes.py --events-jsonl "{{citizen_explainability_outcome_events}}" --min-glossary-interaction-events "{{citizen_explainability_outcome_min_glossary_interaction_events}}" --min-help-copy-interaction-events "{{citizen_explainability_outcome_min_help_copy_interaction_events}}" --min-adoption-sessions "{{citizen_explainability_outcome_min_adoption_sessions}}" --min-adoption-completeness-rate "{{citizen_explainability_outcome_min_adoption_completeness_rate}}" --strict --strict-require-complete ${out_arg}

citizen-report-explainability-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes_heartbeat.py --digest-json "{{citizen_explainability_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_explainability_outcome_heartbeat_path}}" ${out_arg}

citizen-check-explainability-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes_heartbeat.py --digest-json "{{citizen_explainability_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_explainability_outcome_heartbeat_path}}" --strict ${out_arg}

citizen-report-explainability-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_explainability_outcome_heartbeat_path}}" --last "{{citizen_explainability_outcome_heartbeat_window_last}}" --max-failed "{{citizen_explainability_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_explainability_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_explainability_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" ${out_arg}

citizen-check-explainability-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_explainability_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_explainability_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_explainability_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_explainability_outcome_heartbeat_path}}" --last "{{citizen_explainability_outcome_heartbeat_window_last}}" --max-failed "{{citizen_explainability_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_explainability_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_explainability_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_explainability_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" --strict ${out_arg}

citizen-report-coherence-drilldown-outcomes:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes.py --events-jsonl "{{citizen_coherence_outcome_events}}" --min-drilldown-click-events "{{citizen_coherence_outcome_min_drilldown_click_events}}" --min-replay-attempt-events "{{citizen_coherence_outcome_min_replay_attempt_events}}" --min-replay-success-rate "{{citizen_coherence_outcome_min_replay_success_rate}}" --min-contract-complete-click-rate "{{citizen_coherence_outcome_min_contract_complete_click_rate}}" --max-replay-failure-rate "{{citizen_coherence_outcome_max_replay_failure_rate}}" ${out_arg}

citizen-check-coherence-drilldown-outcomes:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes.py --events-jsonl "{{citizen_coherence_outcome_events}}" --min-drilldown-click-events "{{citizen_coherence_outcome_min_drilldown_click_events}}" --min-replay-attempt-events "{{citizen_coherence_outcome_min_replay_attempt_events}}" --min-replay-success-rate "{{citizen_coherence_outcome_min_replay_success_rate}}" --min-contract-complete-click-rate "{{citizen_coherence_outcome_min_contract_complete_click_rate}}" --max-replay-failure-rate "{{citizen_coherence_outcome_max_replay_failure_rate}}" --strict --strict-require-complete ${out_arg}

citizen-report-coherence-drilldown-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat.py --digest-json "{{citizen_coherence_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" ${out_arg}

citizen-check-coherence-drilldown-outcomes-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat.py --digest-json "{{citizen_coherence_outcome_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --strict ${out_arg}

citizen-report-coherence-drilldown-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --last "{{citizen_coherence_outcome_heartbeat_window_last}}" --max-failed "{{citizen_coherence_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_coherence_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_coherence_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-replay-success-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violations}}" --max-replay-success-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violation_rate_pct}}" --max-contract-click-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violations}}" --max-contract-click-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violation_rate_pct}}" --max-replay-failure-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violations}}" --max-replay-failure-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violation_rate_pct}}" ${out_arg}

citizen-check-coherence-drilldown-outcomes-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_window.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --last "{{citizen_coherence_outcome_heartbeat_window_last}}" --max-failed "{{citizen_coherence_outcome_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_coherence_outcome_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_degraded_rate_pct}}" --max-contract-incomplete "{{citizen_coherence_outcome_heartbeat_window_max_contract_incomplete}}" --max-contract-incomplete-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_contract_incomplete_rate_pct}}" --max-replay-success-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violations}}" --max-replay-success-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_replay_success_rate_violation_rate_pct}}" --max-contract-click-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violations}}" --max-contract-click-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_contract_click_rate_violation_rate_pct}}" --max-replay-failure-rate-violations "{{citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violations}}" --max-replay-failure-rate-violation-rate-pct "{{citizen_coherence_outcome_heartbeat_window_max_replay_failure_rate_violation_rate_pct}}" --strict ${out_arg}

citizen-report-coherence-drilldown-outcomes-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_coherence_outcome_heartbeat_compact_path}}" --keep-recent "{{citizen_coherence_outcome_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_coherence_outcome_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_coherence_outcome_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_coherence_outcome_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_coherence_outcome_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-coherence-drilldown-outcomes-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_coherence_outcome_heartbeat_compact_path}}" --keep-recent "{{citizen_coherence_outcome_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_coherence_outcome_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_coherence_outcome_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_coherence_outcome_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_coherence_outcome_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-coherence-drilldown-outcomes-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_coherence_outcome_heartbeat_compact_path}}" --last "{{citizen_coherence_outcome_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-coherence-drilldown-outcomes-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_coherence_outcome_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_coherence_outcome_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_coherence_drilldown_outcomes_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_coherence_outcome_heartbeat_path}}" --compacted-jsonl "{{citizen_coherence_outcome_heartbeat_compact_path}}" --last "{{citizen_coherence_outcome_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-release-hardening:
  out_arg=""; \
  if [ -n "{{citizen_release_out}}" ]; then out_arg="--json-out {{citizen_release_out}}"; fi; \
  node scripts/report_citizen_release_hardening.js --source-root "{{citizen_release_source_root}}" --published-root "{{citizen_release_published_root}}" --snapshot "{{citizen_release_snapshot}}" --concerns "{{citizen_release_concerns}}" --assets "{{citizen_release_assets}}" --max-snapshot-bytes "{{citizen_release_max_snapshot_bytes}}" ${out_arg}

citizen-check-release-hardening:
  out_arg=""; \
  if [ -n "{{citizen_release_out}}" ]; then out_arg="--json-out {{citizen_release_out}}"; fi; \
  node scripts/report_citizen_release_hardening.js --source-root "{{citizen_release_source_root}}" --published-root "{{citizen_release_published_root}}" --snapshot "{{citizen_release_snapshot}}" --concerns "{{citizen_release_concerns}}" --assets "{{citizen_release_assets}}" --max-snapshot-bytes "{{citizen_release_max_snapshot_bytes}}" --strict ${out_arg}

citizen-report-release-trace-digest:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_out}}" ]; then out_arg="--json-out {{citizen_release_trace_out}}"; fi; \
  node scripts/report_citizen_release_trace_digest.js --release-hardening-json "{{citizen_release_trace_source}}" --max-age-minutes "{{citizen_release_trace_max_age_minutes}}" ${out_arg}

citizen-check-release-trace-digest:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_out}}" ]; then out_arg="--json-out {{citizen_release_trace_out}}"; fi; \
  node scripts/report_citizen_release_trace_digest.js --release-hardening-json "{{citizen_release_trace_source}}" --max-age-minutes "{{citizen_release_trace_max_age_minutes}}" --strict --strict-require-complete ${out_arg}

citizen-report-release-trace-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat.py --digest-json "{{citizen_release_trace_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" ${out_arg}

citizen-check-release-trace-heartbeat:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat.py --digest-json "{{citizen_release_trace_heartbeat_digest}}" --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --strict ${out_arg}

citizen-report-release-trace-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_window.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --last "{{citizen_release_trace_heartbeat_window_last}}" --max-failed "{{citizen_release_trace_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_release_trace_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_release_trace_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_release_trace_heartbeat_window_max_degraded_rate_pct}}" --max-stale "{{citizen_release_trace_heartbeat_window_max_stale}}" --max-stale-rate-pct "{{citizen_release_trace_heartbeat_window_max_stale_rate_pct}}" ${out_arg}

citizen-check-release-trace-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_window_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_window_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_window.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --last "{{citizen_release_trace_heartbeat_window_last}}" --max-failed "{{citizen_release_trace_heartbeat_window_max_failed}}" --max-failed-rate-pct "{{citizen_release_trace_heartbeat_window_max_failed_rate_pct}}" --max-degraded "{{citizen_release_trace_heartbeat_window_max_degraded}}" --max-degraded-rate-pct "{{citizen_release_trace_heartbeat_window_max_degraded_rate_pct}}" --max-stale "{{citizen_release_trace_heartbeat_window_max_stale}}" --max-stale-rate-pct "{{citizen_release_trace_heartbeat_window_max_stale_rate_pct}}" --strict ${out_arg}

citizen-report-release-trace-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --compacted-jsonl "{{citizen_release_trace_heartbeat_compact_path}}" --keep-recent "{{citizen_release_trace_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_release_trace_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_release_trace_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_release_trace_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_release_trace_heartbeat_compact_min_raw}}" ${out_arg}

citizen-check-release-trace-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_compact_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_compact_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_compaction.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --compacted-jsonl "{{citizen_release_trace_heartbeat_compact_path}}" --keep-recent "{{citizen_release_trace_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_release_trace_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_release_trace_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_release_trace_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_release_trace_heartbeat_compact_min_raw}}" --strict ${out_arg}

citizen-report-release-trace-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --compacted-jsonl "{{citizen_release_trace_heartbeat_compact_path}}" --last "{{citizen_release_trace_heartbeat_compact_window_last}}" ${out_arg}

citizen-check-release-trace-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_release_trace_heartbeat_compact_window_out}}" ]; then out_arg="--out {{citizen_release_trace_heartbeat_compact_window_out}}"; fi; \
  python3 scripts/report_citizen_release_trace_digest_heartbeat_compaction_window.py --heartbeat-jsonl "{{citizen_release_trace_heartbeat_path}}" --compacted-jsonl "{{citizen_release_trace_heartbeat_compact_path}}" --last "{{citizen_release_trace_heartbeat_compact_window_last}}" --strict ${out_arg}

citizen-report-preset-contract:
  out_arg=""; \
  if [ -n "{{citizen_preset_contract_out}}" ]; then out_arg="--json-out {{citizen_preset_contract_out}}"; fi; \
  node scripts/report_citizen_preset_fixture_contract.js --fixture "{{citizen_preset_contract_fixture}}" --strict ${out_arg}

citizen-report-preset-codec-parity:
  out_arg=""; \
  if [ -n "{{citizen_preset_parity_out}}" ]; then out_arg="--json-out {{citizen_preset_parity_out}}"; fi; \
  node scripts/report_citizen_preset_codec_parity.js --source "{{citizen_preset_parity_source}}" --published "{{citizen_preset_parity_published}}" --strict ${out_arg}

citizen-report-preset-codec-sync:
  out_arg=""; \
  if [ -n "{{citizen_preset_sync_out}}" ]; then out_arg="--json-out {{citizen_preset_sync_out}}"; fi; \
  node scripts/report_citizen_preset_codec_sync_state.js --source "{{citizen_preset_sync_source}}" --published "{{citizen_preset_sync_published}}" --strict ${out_arg}

citizen-report-preset-contract-bundle:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle.js --fixture "{{citizen_preset_contract_fixture}}" --source "{{citizen_preset_parity_source}}" --published "{{citizen_preset_parity_published}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history:
  test -n "{{citizen_preset_bundle_out}}" || (echo "Set CITIZEN_PRESET_BUNDLE_OUT=<bundle_json_path> before running history report" && exit 2); \
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history.js --bundle-json "{{citizen_preset_bundle_out}}" --history-jsonl "{{citizen_preset_bundle_history_path}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-window:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_window_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_window_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_window.js --history-jsonl "{{citizen_preset_bundle_history_path}}" --last "{{citizen_preset_bundle_history_window}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-compact:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_compact_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_compact_out}}"; fi; \
  compact_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_compact_path}}" ]; then compact_arg="--compacted-jsonl {{citizen_preset_bundle_history_compact_path}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_compaction.js --history-jsonl "{{citizen_preset_bundle_history_path}}" --keep-recent "{{citizen_preset_bundle_history_compact_recent}}" --keep-mid-span "{{citizen_preset_bundle_history_compact_mid_span}}" --keep-mid-every "{{citizen_preset_bundle_history_compact_mid_every}}" --keep-old-every "{{citizen_preset_bundle_history_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_preset_bundle_history_compact_min_raw}}" --strict ${compact_arg} ${out_arg}

citizen-report-preset-contract-bundle-history-slo:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo.js --history-jsonl "{{citizen_preset_bundle_history_path}}" --last "{{citizen_preset_bundle_history_slo_window}}" --max-regressions "{{citizen_preset_bundle_history_slo_max_regressions}}" --max-regression-rate-pct "{{citizen_preset_bundle_history_slo_max_regression_rate_pct}}" --min-green-streak "{{citizen_preset_bundle_history_slo_min_green_streak}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest:
  test -n "{{citizen_preset_bundle_history_slo_out}}" || (echo "Set CITIZEN_PRESET_BUNDLE_HISTORY_SLO_OUT=<slo_json_path> before running slo digest" && exit 2); \
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest.js --slo-json "{{citizen_preset_bundle_history_slo_out}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat:
  test -n "{{citizen_preset_bundle_history_slo_digest_out}}" || (echo "Set CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_OUT=<slo_digest_json_path> before running slo digest heartbeat" && exit 2); \
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat.js --digest-json "{{citizen_preset_bundle_history_slo_digest_out}}" --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_path}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_window_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_window_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_window.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_path}}" --last "{{citizen_preset_bundle_history_slo_digest_heartbeat_window}}" --max-failed "{{citizen_preset_bundle_history_slo_digest_heartbeat_max_failed}}" --max-failed-rate-pct "{{citizen_preset_bundle_history_slo_digest_heartbeat_max_failed_rate_pct}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_out}}"; fi; \
  compact_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_path}}" ]; then compact_arg="--compacted-jsonl {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_path}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_path}}" --keep-recent "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_min_raw}}" --strict ${compact_arg} ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_path}}" --compacted-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_path}}" --last "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window-digest:
  test -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_out}}" || (echo "Set CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_OUT=<compaction_window_json_path> before running compact-window digest" && exit 2); \
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest.js --compaction-window-json "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_out}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window-digest-heartbeat:
  test -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_out}}" || (echo "Set CITIZEN_PRESET_BUNDLE_HISTORY_SLO_DIGEST_HEARTBEAT_COMPACT_WINDOW_DIGEST_OUT=<compact_window_digest_json_path> before running compact-window digest heartbeat" && exit 2); \
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat.js --digest-json "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_out}}" --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_path}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window-digest-heartbeat-window:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_window_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_window_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_window.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_path}}" --last "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_window}}" --max-failed "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_failed}}" --max-failed-rate-pct "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_failed_rate_pct}}" --max-degraded "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_degraded}}" --max-degraded-rate-pct "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_max_degraded_rate_pct}}" --strict ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window-digest-heartbeat-compact:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_out}}"; fi; \
  compact_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_path}}" ]; then compact_arg="--compacted-jsonl {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_path}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_compaction.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_path}}" --keep-recent "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_recent}}" --keep-mid-span "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_mid_span}}" --keep-mid-every "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_mid_every}}" --keep-old-every "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_old_every}}" --min-raw-for-dropped-check "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_min_raw}}" --strict ${compact_arg} ${out_arg}

citizen-report-preset-contract-bundle-history-slo-digest-heartbeat-compact-window-digest-heartbeat-compact-window:
  out_arg=""; \
  if [ -n "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_window_out}}" ]; then out_arg="--json-out {{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_window_out}}"; fi; \
  node scripts/report_citizen_preset_contract_bundle_history_slo_digest_heartbeat_compaction_window_digest_heartbeat_compaction_window.js --heartbeat-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_path}}" --compacted-jsonl "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_path}}" --last "{{citizen_preset_bundle_history_slo_digest_heartbeat_compact_window_digest_heartbeat_compact_window}}" --strict ${out_arg}

explorer-gh-pages-publish:
  remote_url=$(git config --get remote.origin.url); \
  if [ -z "$remote_url" ]; then \
    echo "No se encontr remote.origin.url"; \
    exit 1; \
  fi; \
  just explorer-gh-pages-build; \
  tmp_dir=$(mktemp -d); \
  trap 'rm -rf "$tmp_dir"' EXIT; \
  cp -R {{gh_pages_dir}} "$tmp_dir/site"; \
  cd "$tmp_dir/site"; \
  git init -q; \
  git checkout -b "{{gh_pages_branch}}"; \
  git add .; \
  git commit --allow-empty -m "Publish explorers landing and explorer-politico static snapshot" -q; \
  git remote add origin "$remote_url"; \
  git push -f "$remote_url" "{{gh_pages_branch}}:{{gh_pages_branch}}"

explorer-gh-pages:
  @just explorer-gh-pages-publish

explorer-stop:
  @pid_file=/tmp/vota-explorer-ui.pid; \
  stopped=false; \
  if [ -f "$pid_file" ]; then \
    pid=$(cat $pid_file 2>/dev/null | tr -d " \\t\\n"); \
    if [ -n "$pid" ] && kill -0 "$pid" >/dev/null 2>&1; then \
      kill "$pid" >/dev/null 2>&1 || true; \
      echo "Stopped by pid file: $pid"; \
      stopped=true; \
    fi; \
    rm -f $pid_file; \
  fi; \
  port_pids=$(lsof -n -iTCP:{{explorer_port}} -sTCP:LISTEN -P 2>/dev/null | awk 'NR>1 {print $2}' | sort -u | tr '\n' ' ' | tr -s ' '); \
  if [ -n "$port_pids" ]; then \
    echo "$port_pids" | tr ' ' '\n' | xargs -r kill -9 || true; \
    sleep 0.15; \
    remaining_pids=$(lsof -n -iTCP:{{explorer_port}} -sTCP:LISTEN -P 2>/dev/null | awk 'NR>1 {print $2}' | sort -u | tr '\n' ' ' | tr -s ' '); \
    if [ -n "$remaining_pids" ]; then \
      echo "Still bound to port {{explorer_port}}: $remaining_pids"; \
      echo "Run manually: kill -9 $remaining_pids (or sudo kill -9 ...)"; \
    else \
      echo "Stopped by port bind: $port_pids"; \
      stopped=true; \
    fi; \
  fi; \
  if [ "$stopped" = "false" ]; then \
    if [ -n "$port_pids" ]; then \
      echo "Could not stop the process on port {{explorer_port}} automatically (permissions)."; \
      echo "Try: sudo kill -9 $port_pids"; \
    else \
      echo "No explorer server process found"; \
    fi; \
  fi

explore: explorer

# Legacy aliases (compatibilidad):
graph-explorer: explorer
graph-explorer-bg: explorer-bg
graph-explorer-stop: explorer-stop
explorer-politico: explorer
explorer-politico-bg: explorer-bg
explorer-politico-watch: explorer-watch
explorer-politico-bg-watch: explorer-bg-watch

# Tracker: estado SQL vs checklist
etl-tracker-status:
  docker compose run --rm --build etl "python3 scripts/e2e_tracker_status.py --db {{db_path}} --tracker {{tracker_path}} --waivers {{tracker_waivers_path}}"

# Gate default estricto:
# - fail-on-mismatch (solo mismatches no waived o waivers expiradas)
# - fail-on-done-zero-real
# Usa registro canonico de waivers en docs/etl/mismatch-waivers.json (override via TRACKER_WAIVERS_PATH).
etl-tracker-gate:
  docker compose run --rm --build etl "python3 scripts/e2e_tracker_status.py --db {{db_path}} --tracker {{tracker_path}} --waivers {{tracker_waivers_path}} --fail-on-mismatch --fail-on-done-zero-real"

# Compatibilidad: gate histrico (solo DONE sin red real)
etl-tracker-gate-legacy:
  docker compose run --rm --build etl "python3 scripts/e2e_tracker_status.py --db {{db_path}} --tracker {{tracker_path}} --fail-on-done-zero-real"
